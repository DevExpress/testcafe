<!DOCTYPE html>
<html>
    <head>
        <title>Network Test</title>
    </head>
    <body>
        <div id="logger"></div>
        <script>
            function log (text) {
                const textDiv = document.createElement('div');

                textDiv.textContent = text;

                logger.appendChild(textDiv);

                window.scrollBy(0, textDiv.clientHeight)
            }

            interval = setInterval(() => {
                var oXHR = new XMLHttpRequest();

                oXHR.open("GET", "http://localhost:3000/fixtures/ping/pages/test.html", true);

                oXHR.onreadystatechange = function () {
                    if (oXHR.readyState === 4) {
                        if (oXHR.status === 200) {
                            log(oXHR.responseText)
                        } else {
                             clearInterval(interval);

                             log("Error", oXHR.statusText);
                             if (window.resolver)
                                 window.resolver(oXHR.statusText)
                        }
                    }
                };

                oXHR.send(null);
            }, 300)

            setTimeout(() => window.resolver && window.resolver('OK'), 2400000);
        </script>
    </body>
</html>
