!function x(A){var U=A.document;!function(l){"use strict";var h,f,s,p,m,a={".js":[],".json":[],".css":[],".html":[]},u="function"==typeof require?require:null;return p=function(t){var e=new Error("Could not find module '"+t+"'");return e.code="MODULE_NOT_FOUND",e},m=function(t,e,i){var n,s;if("function"==typeof t[e+i])return e+i;for(n=0;s=a[i][n];++n)if("function"==typeof t[e+s])return e+s;return null},h=function(t,e,i,n,s,a){var o,r,l,u,d,c;for("."!==(o=(i=i.split("/")).pop())&&".."!==o||(i.push(o),o="");null!=(r=i.shift());)if(r&&"."!==r&&(".."===r?(t=e.pop(),a=a.slice(0,a.lastIndexOf("/"))):(e.push(t),t=t[r],a+="/"+r),!t))throw p(n);if(o&&"function"!=typeof t[o]&&((c=m(t,o,".js"))||(c=m(t,o,".json")),c||(c=m(t,o,".css")),c||(c=m(t,o,".html")),c?o=c:2!==s&&"object"==typeof t[o]&&(e.push(t),t=t[o],a+="/"+o,o="")),!o)return 1!==s&&t[":mainpath:"]?h(t,e,t[":mainpath:"],n,1,a):h(t,e,"index",n,2,a);if(!(d=t[o]))throw p(n);return d.hasOwnProperty("module")?d.module.exports:(l={},d.module=u={exports:l,id:a+"/"+o},d.call(l,l,u,f(t,e,a)),u.exports)},s=function(t,e,i,n){var s,a=i,o=i.charAt(0),r=0;if("/"===o){if(a=a.slice(1),!(t=l["/"])){if(u)return u(i);throw p(i)}n="/",e=[]}else if("."!==o){if(s=a.split("/",1)[0],!(t=l[s])){if(u)return u(i);throw p(i)}n=s,e=[],(a=a.slice(s.length+1))||((a=t[":mainpath:"])?r=1:(a="index",r=2))}return h(t,e,a,i,r,n)},(f=function(e,i,n){return function(t){return s(e,[].concat(i),t,n)}})(l,[],"")}({testcafe:{src:{client:{ui:{cursor:{"iframe-cursor.js":function(t,e,i){t.__esModule=!0;var n=o(i("../deps/hammerhead")),s=i("../deps/testcafe-core"),a=o(i("./messages"));function o(t){return t&&t.__esModule?t:{default:t}}var r=n.default.utils.browser.isIE?1:0;t.default={move:function(t,e){var i={cmd:a.default.moveRequest,x:t+r,y:e+r};return(0,s.sendRequestToFrame)(i,a.default.moveResponse,A.parent)},leftButtonDown:function(){return(0,s.sendRequestToFrame)({cmd:a.default.leftButtonDownRequest},a.default.leftButtonDownResponse,A.parent)},rightButtonDown:function(){return(0,s.sendRequestToFrame)({cmd:a.default.rightButtonDownRequest},a.default.rightButtonDownResponse,A.parent)},buttonUp:function(){return(0,s.sendRequestToFrame)({cmd:a.default.buttonUpRequest},a.default.buttonUpResponse,A.parent)}},e.exports=t.default},"index.js":function(t,e,i){t.__esModule=!0;var n=r(i("./../deps/hammerhead")),s=r(i("./../deps/testcafe-core")),a=r(i("../ui-root")),o=r(i("./messages"));function r(t){return t&&t.__esModule?t:{default:t}}var l=n.default.Promise,u=n.default.shadowUI,d=n.default.utils.browser,c=n.default.utils.featureDetection,h=n.default.eventSandbox.message,f=s.default.styleUtils,p=s.default.positionUtils,m="l-mouse-down",g="r-mouse-down",v=[m,g].join(" ");h.on(h.SERVICE_MSG_RECEIVED_EVENT,function(t){var e=t.message;switch(e.cmd){case o.default.moveRequest:var i=p.getIframePointRelativeToParentFrame({x:e.x,y:e.y},t.source);y.move(i.x,i.y).then(function(){return h.sendServiceMsg({cmd:o.default.moveResponse},t.source)});break;case o.default.leftButtonDownRequest:y.leftButtonDown().then(function(){return h.sendServiceMsg({cmd:o.default.leftButtonDownResponse},t.source)});break;case o.default.rightButtonDownRequest:y.rightButtonDown().then(function(){return h.sendServiceMsg({cmd:o.default.rightButtonDownResponse},t.source)});break;case o.default.buttonUpRequest:y.buttonUp().then(function(){return h.sendServiceMsg({cmd:o.default.buttonUpResponse},t.source)})}});var y={cursorElement:null,x:50,y:50,pointerOffsetX:0,pointerOffsetY:0,_createElement:function(){this.cursorElement=U.createElement("div"),u.addClass(this.cursorElement,"cursor"),c.isTouchDevice&&!d.isIE&&(u.addClass(this.cursorElement,"touch"),this.pointerOffsetX=Math.ceil(f.getWidth(this.cursorElement)/2),this.pointerOffsetY=Math.ceil(f.getHeight(this.cursorElement)/2)),a.default.element().appendChild(this.cursorElement)},isVisible:function(){return this.cursorElement&&"hidden"!==f.get(this.cursorElement,"visibility")},hide:function(){this.cursorElement||this._createElement(),f.set(this.cursorElement,"visibility","hidden")},show:function(){this.cursorElement||this._createElement(),f.set(this.cursorElement,"visibility","")},move:function(t,e){return this.x=t,this.y=e,this.cursorElement||this._createElement(),f.set(this.cursorElement,{left:this.x-this.pointerOffsetX+"px",top:this.y-this.pointerOffsetY+"px"}),l.resolve()},leftButtonDown:function(){return this.cursorElement||this._createElement(),u.removeClass(this.cursorElement,v),u.addClass(this.cursorElement,m),l.resolve()},rightButtonDown:function(){return this.cursorElement||this._createElement(),u.removeClass(this.cursorElement,v),u.addClass(this.cursorElement,g),l.resolve()},buttonUp:function(){return this.cursorElement||this._createElement(),u.removeClass(this.cursorElement,v),l.resolve()}};t.default=y,e.exports=t.default},"messages.js":function(t,e,i){t.__esModule=!0,t.default={moveRequest:"ui|cursor|move|request",leftButtonDownRequest:"ui|cursor|leftbuttondown|request",rightButtonDownRequest:"ui|cursor|rightbuttondown|request",buttonUpRequest:"ui|cursor|buttonup|request",moveResponse:"ui|cursor|move|response",leftButtonDownResponse:"ui|cursor|leftbuttondown|response",rightButtonDownResponse:"ui|cursor|rightbuttondown|response",buttonUpResponse:"ui|cursor|buttonup|response"},e.exports=t.default}},deps:{"hammerhead.js":function(t,e,i){t.__esModule=!0,t.default=A["%hammerhead%"],e.exports=t.default},"testcafe-core.js":function(t,e,i){t.__esModule=!0,t.default=A["%testCafeCore%"],e.exports=t.default}},"index.js":function(t,e,i){var n=m(i("./deps/hammerhead")),s=m(i("./deps/testcafe-core")),a=p(i("./select-element")),o=p(i("./modal-background")),r=m(i("./progress-panel")),l=m(i("./status-bar")),u=m(i("./status-bar/iframe-status-bar")),d=m(i("./cursor")),c=p(i("./cursor/iframe-cursor")),h=m(i("./screenshot-mark")),f=m(i("./ui-root"));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function m(t){return t&&t.__esModule?t:{default:t}}var g=n.default.Promise,v=n.default.eventSandbox.message,y=s.default.sendRequestToFrame,_="ui|hide|request",w="ui|hide|response",E="ui|show|request",C="ui|show|response";v.on(v.SERVICE_MSG_RECEIVED_EVENT,function(t){t.message.cmd===_?(f.default.hide(),v.sendServiceMsg({cmd:w},t.source)):t.message.cmd===E&&(f.default.show(),v.sendServiceMsg({cmd:C},t.source))}),t.cursorUI=d.default,t.iframeCursorUI=c,t.selectElement=a,t.modalBackground=o,t.ProgressPanel=r.default,t.StatusBar=l.default,t.IframeStatusBar=u.default,t.get=i,t.hide=function(t){return t?y({cmd:_},w,A.top):(f.default.hide(),g.resolve())},t.show=function(t){return t?y({cmd:E},C,A.top):(f.default.show(),g.resolve())},t.showScreenshotMark=function(t){return h.default.show(t)},t.hideScreenshotMark=function(){return h.default.hide()},n.default.nativeMethods.objectDefineProperty.call(A,A,"%testCafeUI%",{configurable:!0,value:t}),n.default.on(n.default.EVENTS.evalIframeScript,function(t){return x(t.iframe.contentWindow)})},"modal-background.js":function(t,e,i){t.__esModule=!0,t.initAndShowLoadingText=function(){var e=!1,i=function(){v(),o.styleUtils.set(f,"opacity",c),o.styleUtils.set(f,"display","block"),o.styleUtils.set(p,"display","block"),e=!0};(function t(){e||(U.body?i():a.nativeMethods.setTimeout.call(A,t,0))})(),o.eventUtils.documentReady().then(function(){e||i()})},t.show=function(t){g||v(),o.styleUtils.set(f,"opacity",t?0:s),o.styleUtils.set(f,"display","block")},t.hide=function(){g&&(o.styleUtils.set(p,"display","none"),o.styleUtils.set(f,"display","none"))},t.showLoadingIcon=function(){o.styleUtils.set(m,"visibility","visible")},t.hideLoadingIcon=function(){o.styleUtils.set(m,"visibility","hidden")};var n,a=i("./deps/hammerhead"),o=i("./deps/testcafe-core"),r=(n=i("./ui-root"))&&n.__esModule?n:{default:n},l="Loading page...",u="modal-background",d="loading-text",s=.7,c=.8,h="loading-icon",f=null,p=null,m=null,g=!1;function v(){var t,e,i,n,s;t=r.default.element(),f=U.createElement("div"),t.appendChild(f),a.shadowUI.addClass(f,u),p=U.createElement("div"),a.nativeMethods.nodeTextContentSetter.call(p,l),t.appendChild(p),a.shadowUI.addClass(p,d),m=U.createElement("div"),o.styleUtils.set(m,"visibility","hidden"),t.appendChild(m),a.shadowUI.addClass(m,h),(e=function(){var t=o.styleUtils.getHeight(A),e=o.styleUtils.getWidth(A);o.styleUtils.set(f,"width",e+"px"),o.styleUtils.set(f,"height",t+"px"),o.styleUtils.set(m,{left:Math.round((e-o.styleUtils.getWidth(m))/2)+"px",top:Math.round((t-o.styleUtils.getHeight(m))/2)+"px"})})(),o.eventUtils.bind(A,"resize",e),i=o.styleUtils.getHeight(A),n=o.styleUtils.getWidth(A),(s=!o.styleUtils.hasDimensions(p))&&(o.styleUtils.set(p,"visibility","hidden"),o.styleUtils.set(p,"display","block")),o.styleUtils.set(p,{left:Math.max((n-o.styleUtils.getWidth(p))/2,0)+"px",top:Math.max((i-o.styleUtils.getHeight(p))/2,0)+"px"}),s&&(o.styleUtils.set(p,"display","none"),o.styleUtils.set(p,"visibility","")),g=!0}},"progress-panel":{"index.js":function(t,e,i){t.__esModule=!0;var n=a(i("../deps/hammerhead")),s=a(i("../deps/testcafe-core")),o=a(i("./progress-bar")),r=a(i("../ui-root"));function a(t){return t&&t.__esModule?t:{default:t}}var l=n.default.shadowUI,d=n.default.nativeMethods,u=s.default.eventUtils,c=s.default.styleUtils,h=function(){function a(){var t=this;!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.startTime=null,this.openingTimeout=null,this.updateInterval=null,this.animationInterval=null,this.panelDiv=U.createElement("div"),r.default.element().appendChild(this.panelDiv),this.titleDiv=U.createElement("div"),this.panelDiv.appendChild(this.titleDiv),this.contentDiv=U.createElement("div"),this.panelDiv.appendChild(this.contentDiv),l.addClass(this.panelDiv,"progress-panel"),l.addClass(this.titleDiv,"title"),l.addClass(this.contentDiv,"content"),a._showAtWindowCenter(this.panelDiv),this.progressBar=new o.default(this.contentDiv),this.disposePanel=function(){return a._showAtWindowCenter(t.panelDiv)}}return a._getInvisibleElementProperty=function(t,e){var i="none"===c.get(t,"display");i&&c.set(t,"display","block");var n=t[e];return i&&c.set(t,"display","none"),n},a._showAtWindowCenter=function(t){var e=a._getInvisibleElementProperty(t,"offsetHeight"),i=a._getInvisibleElementProperty(t,"offsetWidth"),n=Math.round(c.getHeight(A)/2-e/2),s=Math.round(c.getWidth(A)/2-i/2);c.set(t,{left:s+"px",top:n+"px"})},a.prototype._setCurrentProgress=function(){var t=Math.round((Date.now()-this.startTime)/this.maxTimeout*100);this.progressBar.setValue(t)},a.prototype._setSuccess=function(t){this.progressBar.setSuccess(t)},a.prototype._stopAnimation=function(){d.clearInterval.call(A,this.animationInterval)},a.prototype._animate=function(t,e,i,n){var s=this,a=Date.now(),o=i?0:1,r=0,l=0,u=0;i&&(c.set(t,"opacity",o),c.set(t,"display","block")),this._stopAnimation(),this.animationInterval=d.setInterval.call(A,function(){r=Date.now()-a,l=Math.min(r/e,1),u=.5-Math.cos(l*Math.PI)/2,c.set(t,"opacity",o+(i?u:-u)),1===l&&(s._stopAnimation(),n&&n())},10)},a.prototype._showPanel=function(){u.bind(A,"resize",this.disposePanel),this._animate(this.panelDiv,200,!0)},a.prototype._hidePanel=function(t){var e=this;this.startTime=null,u.unbind(A,"resize",this.disposePanel),this._animate(this.panelDiv,t?0:600,!1,function(){return c.set(e.panelDiv,"display","none")})},a.prototype.show=function(t,e){var i=this;this.startTime=Date.now(),this.maxTimeout=e,d.nodeTextContentSetter.call(this.titleDiv,t),this._setSuccess(!1),this.openingTimeout=d.setTimeout.call(A,function(){i.openingTimeout=null,i._setCurrentProgress(),i._showPanel(),i.updateInterval=d.setInterval.call(A,function(){return i._setCurrentProgress()},100)},300)},a.prototype.close=function(t){var e=this;t&&this._setSuccess(!0),this.openingTimeout&&(d.clearTimeout.call(A,this.openingTimeout),this.openingTimeout=null),this.updateInterval&&(d.clearInterval.call(A,this.updateInterval),this.updateInterval=null),t?this.startTime&&Date.now()-this.startTime<1e3?d.setTimeout.call(A,function(){d.setTimeout.call(A,function(){return e._hidePanel(!1)},200)},100):d.setTimeout.call(A,function(){return e._hidePanel(!1)},200):this._hidePanel(!0)},a}();t.default=h,e.exports=t.default},"progress-bar.js":function(t,e,i){t.__esModule=!0;var n=a(i("../deps/hammerhead")),s=a(i("../deps/testcafe-core"));function a(t){return t&&t.__esModule?t:{default:t}}var o=n.default.shadowUI,r=s.default.styleUtils,l="success",u=function(){function i(t){!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.containerElement=U.createElement("div"),this.valueElement=U.createElement("div"),t.appendChild(this.containerElement),this.containerElement.appendChild(this.valueElement),o.addClass(this.containerElement,"progress-bar"),o.addClass(this.valueElement,"value")}return i.prototype.setValue=function(t){t="number"!=typeof t?0:Math.min(Math.max(t,0),100),r.set(this.valueElement,"width",t+"%")},i.prototype.setSuccess=function(t){t?o.addClass(this.containerElement,l):o.removeClass(this.containerElement,l)},i}();t.default=u,e.exports=t.default}},"screenshot-mark.js":function(t,e,i){t.__esModule=!0;var n=i("./deps/hammerhead"),s=i("../../screenshots/constants");t.default={screenshotMark:null,_createMark:function(){this.screenshotMark=U.createElement("img"),n.shadowUI.addClass(this.screenshotMark,"screenshot-mark"),this.screenshotMark.style.right=s.MARK_RIGHT_MARGIN/A.devicePixelRatio+"px",this.screenshotMark.style.width=s.MARK_LENGTH/A.devicePixelRatio+"px",this.screenshotMark.style.height=s.MARK_HEIGHT/A.devicePixelRatio+"px",this.hide(),n.shadowUI.getRoot().appendChild(this.screenshotMark)},hide:function(){this.screenshotMark&&(this.screenshotMark.style.visibility="hidden")},show:function(t){this.screenshotMark||this._createMark(),n.nativeMethods.imageSrcSetter.call(this.screenshotMark,t),this.screenshotMark.style.visibility=""}},e.exports=t.default},"select-element.js":function(t,e,i){t.__esModule=!0,t.expandOptionList=function(t){var e=t.children;if(e.length){if(b){var i=t===b;if(R(),i)return}b=t,S=U.createElement("div"),r.default.element().appendChild(S),h.addClass(S,_),function t(e,i){for(var n,s,a,o,r,l,u,d=m.getChildrenLength(e),c=0;c<d;c++)m.isOptionElement(e[c])?(o=e[c],r=i,l=U.createElement("div"),u=o.disabled||"optgroup"===m.getTagName(o.parentElement)&&o.parentElement.disabled,f.nodeTextContentSetter.call(l,o.text),r.appendChild(l),h.addClass(l,E),u&&(h.addClass(l,C),g.set(l,"color",g.get(o,"color"))),T.push(l)):"optgroup"===m.getTagName(e[c])&&(n=e[c],s=i,a=U.createElement("div"),f.nodeTextContentSetter.call(a,n.label||" "),s.appendChild(a),h.addClass(a,w),a.disabled&&(h.addClass(a,C),g.set(a,"color",g.get(n,"color"))),t(n.children,a),I.push(a))}(e,S),l.addInternalEventListener(A,["click"],B),f.setTimeout.call(A,function(){v.bind(U,"mousedown",M)},0),g.set(S,{position:"absolute",fontSize:g.get(b,"fontSize"),fontFamily:g.get(b,"fontFamily"),minWidth:g.getWidth(b)+"px",left:u.getOffsetPosition(b).left+"px",height:m.getSelectVisibleChildren(t).length>x?g.getOptionHeight(t)*x:""});var n=u.getOffsetPosition(b).top,s=g.getHeight(S),a=n+g.getHeight(b)+2;if(a+s>g.getScrollTop(A)+g.getHeight(A)){var o=n-3-s;o>=g.getScrollTop(A)&&(a=o)}g.set(S,"top",a+"px")}},t.collapseOptionList=R,t.isOptionListExpanded=o,t.getEmulatedChildElement=function(t){var e="optgroup"===m.getTagName(t),i=m.getElementIndexInParent(b,t);return e?I[i]:T[i]},t.scrollOptionListByChild=function(t){var e=m.getSelectParent(t);if(e){var i=g.getSelectElementSize(e),n=g.getOptionHeight(e),s=0,a=Math.max(g.getScrollTop(e)/n,0),o=a+i-1,r=m.getChildVisibleIndex(e,t);r<a?(s=n*(a-r),g.setScrollTop(e,Math.max(g.getScrollTop(e)-s,0))):o<r&&(s=n*(r-o),g.setScrollTop(e,g.getScrollTop(e)+s))}},t.getSelectChildCenter=function(t){var e=m.getSelectParent(t);if(!e)return{x:0,y:0};var i=g.getOptionHeight(e),n=u.getElementRectangle(t);return{x:Math.round(n.left+n.width/2),y:Math.round(n.top+i/2)}},t.switchOptionsByKeys=function(t,e){var i=g.getSelectElementSize(t),n=!g.hasDimensions(h.select("."+_)[0]);if(/down|up/.test(e)||!d.isIE&&(i<=1||d.isFirefox)&&(n||d.isFirefox)&&/left|right/.test(e)){for(var s=t.querySelectorAll("option"),a=[],o=0;o<s.length;o++){var r=s[o].parentElement;s[o].disabled||"optgroup"===m.getTagName(r)&&r.disabled||a.push(s[o])}var l=y.indexOf(a,s[t.selectedIndex])+(/down|right/.test(e)?1:-1);0<=l&&l<a.length&&(t.selectedIndex=y.indexOf(s,a[l]),d.isIE||p.input(t),p.change(t))}},t.isOptionElementVisible=function(t){var e=m.getSelectParent(t);if(!e)return!0;var i=o(e),n=g.getSelectElementSize(e);return i||1<n};var n=a(i("./deps/hammerhead")),s=a(i("./deps/testcafe-core")),r=a(i("./ui-root"));function a(t){return t&&t.__esModule?t:{default:t}}var h=n.default.shadowUI,d=n.default.utils.browser,c=n.default.utils.featureDetection,f=n.default.nativeMethods,p=n.default.eventSandbox.eventSimulator,l=n.default.eventSandbox.listeners,u=s.default.positionUtils,m=s.default.domUtils,g=s.default.styleUtils,v=s.default.eventUtils,y=s.default.arrayUtils,_="tcOptionList",w="tcOptionGroup",E="tcOption",C="disabled",x=d.isIE?30:20,b=null,S=null,I=[],T=[];function M(t){(t.target||t.srcElement)===b||m.containsElement(b,t.target)||m.containsElement(S,t.target)||R()}function B(t,e,i){var n,s,a,o,r,l=y.indexOf(T,t.target);if(!(l<0)){i();var u=-1<t.target.className.indexOf(C);u&&d.isWebKit||(n=l,s=u,a=b.selectedIndex,o=b.getElementsByTagName("option")[n],(r=!s&&n!==a)&&!d.isIE&&(b.selectedIndex=n),d.isFirefox||d.isIE||!r||(p.input(b),p.change(b)),(d.isFirefox||d.isIE)&&p.mousedown(d.isFirefox?o:b),c.isTouchDevice||p.mouseup(d.isFirefox?o:b),(d.isFirefox||d.isIE)&&r&&(d.isIE&&(b.selectedIndex=n),d.isIE||p.input(b),p.change(b)),c.isTouchDevice||p.click(d.isFirefox||d.isIE?o:b),s||R())}}function R(){m.remove(S),v.unbind(U,"mousedown",M),b=S=null,T=[],I=[]}function o(t){return t?t===b:!!b}},"status-bar":{"iframe-status-bar.js":function(t,e,i){t.__esModule=!0;var n=r(i("./../deps/hammerhead")),s=r(i("./../deps/testcafe-core")),a=r(i("./messages")),o=r(i("./index"));function r(t){return t&&t.__esModule?t:{default:t}}var l=s.default.sendRequestToFrame,u=n.default.eventSandbox.message,d=function(t){function i(){return function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,t),i.prototype.showWaitingElementStatus=function(t){u.sendServiceMsg({cmd:a.default.startWaitingElement,timeout:t},A.top)},i.prototype.hideWaitingElementStatus=function(t){var e={cmd:a.default.endWaitingElementRequest,waitingSuccess:t};return l(e,a.default.endWaitingElementResponse,A.top)},i.prototype.showWaitingAssertionRetriesStatus=function(t){u.sendServiceMsg({cmd:a.default.startWaitingAssertionRetries,timeout:t},A.top)},i.prototype.hideWaitingAssertionRetriesStatus=function(t){var e={cmd:a.default.endWaitingAssertionRetriesRequest,waitingSuccess:t};return l(e,a.default.endWaitingAssertionRetriesResponse,A.top)},i}(o.default);t.default=d,e.exports=t.default},"index.js":function(t,e,i){t.__esModule=!0;var n=a(i("./../deps/hammerhead")),s=a(i("./../deps/testcafe-core")),o=a(i("./progress-bar")),r=a(i("../ui-root")),l=a(i("./messages"));function a(t){return t&&t.__esModule?t:{default:t}}var u=n.default.Promise,d=n.default.shadowUI,c=n.default.nativeMethods,h=n.default.eventSandbox.message,f=n.default.utils.browser,p=n.default.utils.featureDetection,m=n.default.eventSandbox.listeners,g=s.default.styleUtils,v=s.default.eventUtils,y=s.default.domUtils,_=s.default.serviceUtils,w=s.default.arrayUtils,E="info-container",C="waiting-element-failed",x="waiting-element-success",b={name:"show-all-elements"},S={name:"hide-fixture",maxSize:940,className:"icon-status-view"},I={name:"hide-status",maxSize:380,className:"icon-unlock-buttons-view"},T=740,M={name:"hide-unlock-area",maxSize:460,className:"icon-buttons-view"},B={name:"show-buttons-only",maxSize:330,className:"only-buttons-view"},R={name:"show-icon-only",maxSize:330,className:"only-icon-view"},D=function(s){function a(t,e,i){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this));return n.UNLOCK_PAGE_BTN_CLICK="testcafe|ui|status-bar|unlock-page-btn-click",n.userAgent=t,n.fixtureName=e,n.testName=i,n.statusBar=null,n.container=null,n.infoContainer=null,n.icon=null,n.fixtureContainer=null,n.resumeButton=null,n.finishButton=null,n.stepButton=null,n.statusDiv=null,n.buttons=null,n.progressBar=null,n.animationInterval=null,n.showingTimeout=null,n.windowHeight=g.getHeight(A),n.state={created:!1,showing:!1,hiding:!1,debugging:!1,waiting:!1,assertionRetries:!1,hidden:!1},n.currentView=null,n._createBeforeReady(),n._initChildListening(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,s),a.prototype._createFixtureArea=function(){this.infoContainer=U.createElement("div"),d.addClass(this.infoContainer,E),d.addClass(this.infoContainer,E),this.container.appendChild(this.infoContainer),this.icon=U.createElement("div"),d.addClass(this.icon,"icon"),this.infoContainer.appendChild(this.icon),this.fixtureContainer=U.createElement("div"),d.addClass(this.fixtureContainer,"fixture-container"),this.infoContainer.appendChild(this.fixtureContainer);var t=U.createElement("div");c.nodeTextContentSetter.call(t,this.fixtureName+" - "+this.testName),d.addClass(t,"fixture"),this.fixtureContainer.appendChild(t);var e=U.createElement("div");c.nodeTextContentSetter.call(e,this.userAgent),d.addClass(e,"user-agent"),this.fixtureContainer.appendChild(e)},a.prototype._createUnlockPageArea=function(t){var e=this,i=U.createElement("div"),n=U.createElement("div"),s=U.createElement("div"),a=U.createElement("div"),o=U.createElement("span");return c.nodeTextContentSetter.call(o,"Unlock page"),d.addClass(i,"unlock-page-area"),d.addClass(n,"unlock-page-container"),d.addClass(n,"locked"),d.addClass(s,"unlock-icon"),d.addClass(a,"icon-separator"),f.isMacPlatform&&(n.style.paddingTop="3px",n.style.height="24px",f.isFirefox&&(o.style.lineHeight="30px")),t.appendChild(i),i.appendChild(n),n.appendChild(s),n.appendChild(o),n.appendChild(a),this._bindClickOnce([n],function(){d.removeClass(n,"locked"),d.addClass(n,"unlocked"),c.nodeTextContentSetter.call(o,"Page unlocked"),e.emit(e.UNLOCK_PAGE_BTN_CLICK,{})}),i.style.display="none",i},a.prototype._createStatusArea=function(){var t=U.createElement("div");d.addClass(t,"status-container"),this.container.appendChild(t),this.statusDiv=U.createElement("div"),c.nodeTextContentSetter.call(this.statusDiv,"Loading Web Page..."),d.addClass(this.statusDiv,"status"),f.isMacPlatform&&(this.statusDiv.style.marginTop="9px"),t.appendChild(this.statusDiv),this.unlockPageArea=this._createUnlockPageArea(t),this.buttons=U.createElement("div"),d.addClass(this.buttons,"buttons"),t.appendChild(this.buttons),this.resumeButton=this._createButton("Resume","resume"),this.stepButton=this._createButton("Next Step","step"),this.finishButton=this._createButton("Finish","resume"),this.buttons.appendChild(this.resumeButton),this.buttons.appendChild(this.stepButton),this.buttons.style.display="none"},a.prototype._createButton=function(t,e){var i=U.createElement("div"),n=U.createElement("div"),s=U.createElement("span");return c.nodeTextContentSetter.call(s,t),d.addClass(i,"button"),d.addClass(i,e),d.addClass(n,"button-icon"),f.isSafari&&(s.style.position="relative",s.style.top="1px"),i.appendChild(n),i.appendChild(s),i},a.prototype._create=function(){this.statusBar=U.createElement("div"),this.container=U.createElement("div"),d.addClass(this.statusBar,"status-bar"),d.addClass(this.container,"container"),this.statusBar.appendChild(this.container),this._createFixtureArea(),this._createStatusArea(),this.progressBar=new o.default(this.statusBar),this.progressBar.indeterminateIndicator.start(),this.progressBar.show(),r.default.element().appendChild(this.statusBar),this._recalculateSizes(),this._bindHandlers(),this.state.created=!0},a.prototype._createBeforeReady=function(){var t=this;this.state.created||A!==A.top||(U.body?this._create():c.setTimeout.call(A,function(){return t._createBeforeReady()},0))},a.prototype._switchView=function(t){this.currentView&&this.currentView.name===t.name||(this.currentView&&this.currentView.className&&d.removeClass(this.statusBar,this.currentView.className),t.className&&d.addClass(this.statusBar,t.className),this.currentView=t)},a.prototype._calculateActualView=function(t){var e=this.state.debugging?T:I.maxSize;return S.maxSize<=t?b:t<S.maxSize&&e<=t?S:this.state.debugging?t<e&&M.maxSize<=t?I:t<M.maxSize&&B.maxSize<=t?M:B:R},a.prototype._setFixtureContainerWidth=function(){if("none"!==g.get(this.fixtureContainer,"display")){var t=g.getWidth(this.infoContainer),e=g.getWidth(this.icon),i=g.getElementMargin(this.icon),n=t-e-i.left-i.right-1;g.set(this.fixtureContainer,"width",n+"px")}},a.prototype._setStatusDivLeftMargin=function(){if(this.statusDiv.parentNode&&"none"!==g.get(this.statusDiv.parentNode,"display")){var t="none"===g.get(this.statusDiv,"display"),e=g.getWidth(this.infoContainer),i=g.getWidth(this.container)/2-(t?0:g.getWidth(this.statusDiv))/2-e;this.state.debugging&&(i-=g.getWidth(this.buttons)/2,i-=g.getWidth(this.unlockPageArea)/2);var n=Math.max(Math.round(i),0)+"px";g.set(this.statusDiv,"marginLeft",t?0:n),g.set(this.statusDiv.parentNode,"marginLeft",t?n:0)}},a.prototype._recalculateSizes=function(){var t=g.getWidth(A);this.windowHeight=g.getHeight(A),g.set(this.statusBar,"width",t+"px"),this._switchView(this._calculateActualView(t)),this._setFixtureContainerWidth(),this._setStatusDivLeftMargin()},a.prototype._animate=function(t){var e=this,i=Date.now(),n=parseInt(g.get(this.statusBar,"opacity"),10)||0,s=0,a=0,o=0;this._stopAnimation(),t&&(g.set(this.statusBar,"visibility",""),this.state.hidden=!1),this.animationInterval=c.setInterval.call(A,function(){s=Date.now()-i,a=Math.min(s/500,1),o=.5-Math.cos(a*Math.PI)/2,g.set(e.statusBar,"opacity",n+(t?o:-o)),1===a&&(e._stopAnimation(),t||(g.set(e.statusBar,"visibility","hidden"),e.state.hidden=!0),e.state.showing=!1,e.state.hiding=!1)},10)},a.prototype._stopAnimation=function(){this.animationInterval&&(c.clearInterval.call(A,this.animationInterval),this.animationInterval=null)},a.prototype._fadeOut=function(){this.state.hiding||this.state.debugging||(this.state.showing=!1,this.state.hiding=!0,this._animate())},a.prototype._fadeIn=function(){this.state.showing||this.state.debugging||(this.state.hiding=!1,this.state.showing=!0,this._animate(!0))},a.prototype._bindHandlers=function(){var e=this;m.initElementListening(A,["resize"]),m.addInternalEventListener(A,["resize"],function(){return e._recalculateSizes()});var i=g.getHeight(this.statusBar);m.addFirstInternalHandler(A,["mousemove","mouseout"],function(t){"mouseout"!==t.type||t.relatedTarget?"mousemove"===t.type&&(t.clientY>e.windowHeight-i?e._fadeOut(t):e.state.hidden&&e._fadeIn(t)):e._fadeIn(t)})},a.prototype._bindClickOnce=function(i,n){var s=this,a=p.isTouchDevice?"touchstart":"mousedown";m.addInternalEventListener(A,[a],function t(e){w.find(i,function(t){return y.containsElement(t,e.target)})?(v.preventDefault(e),m.removeInternalEventListener(A,[a],t),n(e)):y.containsElement(s.statusBar,e.target)&&v.preventDefault(e)})},a.prototype._initChildListening=function(){var i=this;h.on(h.SERVICE_MSG_RECEIVED_EVENT,function(t){var e=t.message;e.cmd===l.default.startWaitingElement?i.showWaitingElementStatus(e.timeout):e.cmd===l.default.endWaitingElementRequest?i.hideWaitingElementStatus(e.waitingSuccess).then(function(){return h.sendServiceMsg({cmd:l.default.endWaitingElementResponse},t.source)}):e.cmd===l.default.startWaitingAssertionRetries?i.showWaitingAssertionRetriesStatus(e.timeout):e.cmd===l.default.endWaitingAssertionRetriesRequest&&i.hideWaitingAssertionRetriesStatus(e.waitingSuccess).then(function(){return h.sendServiceMsg({cmd:l.default.endWaitingAssertionRetriesResponse},t.source)})})},a.prototype._resetState=function(){this.state.debugging=!1,this.buttons.style.display="none",this.unlockPageArea.style.display="none",c.nodeTextContentSetter.call(this.statusDiv,""),this.progressBar.hide()},a.prototype._showWaitingStatus=function(){var t=this.state.assertionRetries?"Waiting for an assertion execution...":"Waiting for an element to appear...";c.nodeTextContentSetter.call(this.statusDiv,t),this._setStatusDivLeftMargin(),this.progressBar.show()},a.prototype._hideWaitingStatus=function(e){var i=this;return new u(function(t){c.setTimeout.call(A,function(){i.state.waiting||i.state.debugging||(d.removeClass(i.statusBar,x),d.removeClass(i.statusBar,C),i.progressBar.determinateIndicator.reset(),i._resetState()),t()},e?0:500)})},a.prototype._showDebuggingStatus=function(t){var n=this;return new u(function(i){n.state.debugging=!0,t?(n.buttons.removeChild(n.stepButton),n.buttons.removeChild(n.resumeButton),n.buttons.appendChild(n.finishButton),c.nodeTextContentSetter.call(n.statusDiv,"Test failed"),d.removeClass(n.statusBar,x),d.addClass(n.statusBar,C)):c.nodeTextContentSetter.call(n.statusDiv,"Debugging test..."),n.buttons.style.display="",n.unlockPageArea.style.display="",n._recalculateSizes(),n._bindClickOnce([n.resumeButton,n.stepButton,n.finishButton],function(t){var e=y.containsElement(n.stepButton,t.target);n._resetState(),i(e)})})},a.prototype._setWaitingStatus=function(t,e){var i=this;this.state.waiting=!0,this.progressBar.determinateIndicator.start(t,e),this.showingTimeout=c.setTimeout.call(A,function(){i.showingTimeout=null,i._showWaitingStatus()},300)},a.prototype._resetWaitingStatus=function(t){this.state.waiting=!1,this.progressBar.determinateIndicator.stop(),t?d.addClass(this.statusBar,x):d.addClass(this.statusBar,C);var e=this.showingTimeout&&t;return this.showingTimeout&&(c.clearTimeout.call(A,this.showingTimeout),this.showingTimeout=null,t||this._showWaitingStatus()),this._hideWaitingStatus(e)},a.prototype.hidePageLoadingStatus=function(){this.state.created||this._create(),this.progressBar.indeterminateIndicator.stop(),this._resetState()},a.prototype.showDebuggingStatus=function(t){return this._stopAnimation(),g.set(this.statusBar,"opacity",1),g.set(this.statusBar,"visibility",""),this.state.hiden=!1,this._showDebuggingStatus(t)},a.prototype.showWaitingElementStatus=function(t){this.state.assertionRetries||this._setWaitingStatus(t)},a.prototype.hideWaitingElementStatus=function(t){return this.state.assertionRetries?u.resolve():this._resetWaitingStatus(t)},a.prototype.showWaitingAssertionRetriesStatus=function(t,e){this.state.assertionRetries=!0,this._setWaitingStatus(t,e)},a.prototype.hideWaitingAssertionRetriesStatus=function(t){var e=this;return this._resetWaitingStatus(t).then(function(){e.state.assertionRetries=!1})},a}(_.EventEmitter);t.default=D,e.exports=t.default},"messages.js":function(t,e,i){t.__esModule=!0,t.default={startWaitingElement:"start-waiting-element",endWaitingElementRequest:"end-waiting-element-request",endWaitingElementResponse:"end-waiting-element-response",startWaitingAssertionRetries:"start-waiting-assertion-retries",endWaitingAssertionRetriesRequest:"end-waiting-assertion-retries-request",endWaitingAssertionRetriesResponse:"end-waiting-assertion-retries-response"},e.exports=t.default},"progress-bar":{"determinate-indicator.js":function(t,e,i){t.__esModule=!0;var n=a(i("../../deps/hammerhead")),s=a(i("../../deps/testcafe-core"));function a(t){return t&&t.__esModule?t:{default:t}}var o=n.default.shadowUI,r=n.default.nativeMethods,l=s.default.styleUtils,u="determinate",d=function(){function i(t,e){!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.progressBar=t,this.firstValueElement=e,this.maxTimeout=null,this.startTime=null,this.animationInterval=null}return i.prototype._setCurrentProgress=function(){var t=(Date.now()-this.startTime)/this.maxTimeout,e=Math.min(Math.max(t,0),1),i=l.getWidth(this.progressBar),n=Math.round(i*e);l.set(this.firstValueElement,"width",n+"px")},i.prototype.start=function(t,e){var i=this;o.addClass(this.progressBar,u),this.maxTimeout=t,this.startTime=e||Date.now(),this._setCurrentProgress(),this.animationInterval=r.setInterval.call(A,function(){return i._setCurrentProgress()},10)},i.prototype.stop=function(){this.animationInterval&&(r.clearInterval.call(A,this.animationInterval),this.animationInterval=null)},i.prototype.reset=function(){l.set(this.firstValueElement,"width",0),o.removeClass(this.progressBar,u)},i}();t.default=d,e.exports=t.default},"indeterminate-indicator.js":function(t,e,i){t.__esModule=!0;var n=a(i("../../deps/hammerhead")),s=a(i("../../deps/testcafe-core"));function a(t){return t&&t.__esModule?t:{default:t}}var o=n.default.shadowUI,r=n.default.nativeMethods,C=s.default.styleUtils,x=s.default.positionUtils,l={time:2800,points:[.815,.395],positionByCompletePercent:{0:{left:-35,right:100},.6:{left:100,right:-90},1:{left:100,right:-90}}},u={time:3e3,points:[.84,1],positionByCompletePercent:{0:{left:-200,right:100},.6:{left:107,right:-8},1:{left:107,right:-8}}},d="indeterminate",c=function(){function n(t,e,i){!function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.progressBar=t,this.firstValue=e,this.secondValue=i,this.animationInterval=null,this.secondValueAnimationInterval=null,this.secondValueAnimationTimeout=null,this.restartAnimationTimeout=null}return n._updateValueAnimation=function(t,e,i){var n,s,a,o,r,l,u,d,c,h,f,p,m,g=i.time,v=i.points,y=i.positionByCompletePercent,_=(n=(Date.now()-t)/g,s=v[0],a=v[1],d=(l=(o=3*Math.pow(1-n,2)*n*s+3*(1-n)*n*n*a+n*n*n)<.6)?.6:1,c=(r=y)[u=l?0:.6],h=r[d],f={x:u,y:c.left},p={x:d,y:h.left},m=x.getLineYByXCoord(f,p,o),f={x:u,y:c.right},p={x:d,y:h.right},{left:m,right:x.getLineYByXCoord(f,p,o)}),w=_.left,E=_.right;C.set(e,"left",Math.round(w)+"%"),C.set(e,"right",Math.round(E)+"%")},n.prototype._clearFirstValueAnimation=function(){this.animationInterval&&(r.clearInterval.call(A,this.animationInterval),this.animationInterval=null),C.set(this.firstValue,"left","-35%"),C.set(this.firstValue,"right","100%")},n.prototype._clearSecondValueAnimation=function(){this.secondValueAnimationInterval&&(r.clearInterval.call(A,this.secondValueAnimationInterval),this.secondValueAnimationInterval=null),C.set(this.secondValue,"left","-200%"),C.set(this.secondValue,"right","100%")},n.prototype._startFirstValueAnimation=function(){var t=this;this._clearFirstValueAnimation();var e=Date.now();this.animationInterval=r.setInterval.call(A,function(){n._updateValueAnimation(e,t.firstValue,l)},10)},n.prototype._startSecondValueAnimation=function(){var t=this;this._clearSecondValueAnimation();var e=Date.now();this.secondValueAnimationInterval=r.setInterval.call(A,function(){n._updateValueAnimation(e,t.secondValue,u)},10)},n.prototype._startAnimation=function(){var t=this;this._startFirstValueAnimation(),this.secondValueAnimationTimeout=r.setTimeout.call(A,function(){return t._startSecondValueAnimation()},1e3),this.restartAnimationTimeout=r.setTimeout.call(A,function(){return t._startAnimation()},1950)},n.prototype._stopAnimation=function(){this._clearFirstValueAnimation(),this._clearSecondValueAnimation(),this.secondValueAnimationTimeout&&(r.clearInterval.call(A,this.secondValueAnimationTimeout),this.secondValueAnimationTimeout=null),this.restartAnimationTimeout&&(r.clearInterval.call(A,this.restartAnimationTimeout),this.restartAnimationTimeout=null)},n.prototype.start=function(){o.addClass(this.progressBar,d),this._startAnimation()},n.prototype.stop=function(){o.removeClass(this.progressBar,d),this._stopAnimation()},n}();t.default=c,e.exports=t.default},"index.js":function(t,e,i){t.__esModule=!0;var n=r(i("../../deps/hammerhead")),s=r(i("../../deps/testcafe-core")),a=r(i("./determinate-indicator")),o=r(i("./indeterminate-indicator"));function r(t){return t&&t.__esModule?t:{default:t}}var l=n.default.shadowUI,u=s.default.styleUtils,d=function(){function i(t){!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.progressBar=null,this.firstValueElement=null,this.secondValueElement=null,this._create(t),this.determinateIndicator=new a.default(this.progressBar,this.firstValueElement),this.indeterminateIndicator=new o.default(this.progressBar,this.firstValueElement,this.secondValueElement)}return i.prototype._create=function(t){this.progressBar=U.createElement("div"),l.addClass(this.progressBar,"progress-bar"),t.appendChild(this.progressBar);var e=U.createElement("div");l.addClass(e,"value-container"),this.progressBar.appendChild(e),this.firstValueElement=U.createElement("div"),l.addClass(this.firstValueElement,"value"),e.appendChild(this.firstValueElement),this.secondValueElement=U.createElement("div"),l.addClass(this.secondValueElement,"value"),e.appendChild(this.secondValueElement)},i.prototype.show=function(){u.set(this.progressBar,"visibility","visible")},i.prototype.hide=function(){u.set(this.progressBar,"visibility","hidden")},i}();t.default=d,e.exports=t.default}}},"ui-root.js":function(t,e,i){t.__esModule=!0;var n=i("./deps/hammerhead");t.default={uiRoot:null,element:function(){return this.uiRoot||(this.uiRoot=U.createElement("div"),n.shadowUI.getRoot().appendChild(this.uiRoot)),this.uiRoot},hide:function(){this.uiRoot&&(this.uiRoot.style.visibility="hidden")},show:function(){this.uiRoot&&(this.uiRoot.style.visibility="")},remove:function(){var t=n.shadowUI.getRoot();t.parentNode.removeChild(t)}},e.exports=t.default}}},screenshots:{"constants.js":function(t,e,i){t.__esModule=!0,t.MARK_BYTES_PER_PIXEL=4,t.MARK_LENGTH=32,t.MARK_HEIGHT=10,t.MARK_RIGHT_MARGIN=10}}}}})("testcafe/src/client/ui/index")}(window);