!function(){function initTestCafeCore(window,isIFrameWithoutSrc){var document=window.document;!function(a){"use strict";var c,m,i,h,p,r={".js":[],".json":[],".css":[],".html":[]},s="function"==typeof require?require:null;return h=function(e){var t=new Error("Could not find module '"+e+"'");return t.code="MODULE_NOT_FOUND",t},p=function(e,t,n){var o,i;if("function"==typeof e[t+n])return t+n;for(o=0;i=r[n][o];++o)if("function"==typeof e[t+i])return t+i;return null},c=function(e,t,n,o,i,r){var l,u,a,s,d,f;for("."!==(l=(n=n.split("/")).pop())&&".."!==l||(n.push(l),l="");null!=(u=n.shift());)if(u&&"."!==u&&(".."===u?(e=t.pop(),r=r.slice(0,r.lastIndexOf("/"))):(t.push(e),e=e[u],r+="/"+u),!e))throw h(o);if(l&&"function"!=typeof e[l]&&((f=p(e,l,".js"))||(f=p(e,l,".json")),f||(f=p(e,l,".css")),f||(f=p(e,l,".html")),f?l=f:2!==i&&"object"==typeof e[l]&&(t.push(e),e=e[l],r+="/"+l,l="")),!l)return 1!==i&&e[":mainpath:"]?c(e,t,e[":mainpath:"],o,1,r):c(e,t,"index",o,2,r);if(!(d=e[l]))throw h(o);return d.hasOwnProperty("module")?d.module.exports:(a={},d.module=s={exports:a,id:r+"/"+l},d.call(a,a,s,m(e,t,r)),s.exports)},i=function(e,t,n,o){var i,r=n,l=n.charAt(0),u=0;if("/"===l){if(r=r.slice(1),!(e=a["/"])){if(s)return s(n);throw h(n)}o="/",t=[]}else if("."!==l){if(i=r.split("/",1)[0],!(e=a[i])){if(s)return s(n);throw h(n)}o=i,t=[],(r=r.slice(i.length+1))||((r=e[":mainpath:"])?u=1:(r="index",u=2))}return c(e,t,r,n,u,o)},(m=function(t,n,o){return function(e){return i(t,[].concat(n),e,o)}})(a,[],"")}({pinkie:{"index.js":function(e,t,n){var o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="pending",l="settled",u="fulfilled",a="rejected",s=function(){},d="undefined"!=typeof global&&void 0!==global.process&&"function"==typeof global.process.emit,f="undefined"==typeof setImmediate?setTimeout:setImmediate,c=[];function m(){for(var e=0;e<c.length;e++)c[e][0](c[e][1]);o=!(c=[])}function h(e,t){c.push([e,t]),o||(o=!0,f(m,0))}function p(e){var t=e.owner,n=t._state,o=t._data,i=e[n],r=e.then;if("function"==typeof i){n=u;try{o=i(o)}catch(e){y(r,e)}}g(r,o)||(n===u&&v(r,o),n===a&&y(r,o))}function g(t,n){var o;try{if(t===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"===(void 0===n?"undefined":i(n)))){var e=n.then;if("function"==typeof e)return e.call(n,function(e){o||(o=!0,n===e?E(t,e):v(t,e))},function(e){o||(o=!0,y(t,e))}),!0}}catch(e){return o||y(t,e),!0}return!1}function v(e,t){e!==t&&g(e,t)||E(e,t)}function E(e,t){e._state===r&&(e._state=l,e._data=t,h(w,e))}function y(e,t){e._state===r&&(e._state=l,e._data=t,h(S,e))}function b(e){e._then=e._then.forEach(p)}function w(e){e._state=u,b(e)}function S(e){e._state=a,b(e),!e._handled&&d&&global.process.emit("unhandledRejection",e._data,e)}function x(e){global.process.emit("rejectionHandled",e)}function N(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof N==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){y(t,e)}try{e(function(e){v(t,e)},n)}catch(e){n(e)}}(e,this)}N.prototype={constructor:N,_state:r,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(s),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===a&&d&&h(x,this)),this._state===u||this._state===a?h(p,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},N.all=function(u){if(!Array.isArray(u))throw new TypeError("You must pass an array to Promise.all().");return new N(function(n,e){var o=[],i=0;function t(t){return i++,function(e){o[t]=e,--i||n(o)}}for(var r,l=0;l<u.length;l++)(r=u[l])&&"function"==typeof r.then?r.then(t(l),e):o[l]=r;i||n(o)})},N.race=function(i){if(!Array.isArray(i))throw new TypeError("You must pass an array to Promise.race().");return new N(function(e,t){for(var n,o=0;o<i.length;o++)(n=i[o])&&"function"==typeof n.then?n.then(e,t):e(n)})},N.resolve=function(t){return t&&"object"===(void 0===t?"undefined":i(t))&&t.constructor===N?t:new N(function(e){e(t)})},N.reject=function(n){return new N(function(e,t){t(n)})},t.exports=N}},testcafe:{src:{browser:{connection:{"command.js":function(e,t,n){e.__esModule=!0,e.default={run:"run",idle:"idle"},t.exports=e.default},"status.js":function(e,t,n){e.__esModule=!0,e.default={ok:"ok",closing:"closing"},t.exports=e.default}}},client:{browser:{"index.js":function(exports,module,require){exports.__esModule=!0,exports.startHeartbeat=startHeartbeat,exports.startInitScriptExecution=startInitScriptExecution,exports.stopInitScriptExecution=stopInitScriptExecution,exports.redirect=redirect,exports.checkStatus=checkStatus;var _pinkie=require("pinkie"),_pinkie2=_interopRequireDefault(_pinkie),_command=require("../../browser/connection/command"),_command2=_interopRequireDefault(_command),_status=require("../../browser/connection/status"),_status2=_interopRequireDefault(_status);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var HEARTBEAT_INTERVAL=2e3,allowInitScriptExecution=!1;function sendXHR(o,i){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"GET",l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return new _pinkie2.default(function(e,t){var n=i();n.open(r,o,!0),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?e(n.responseText?JSON.parse(n.responseText):""):t("disconnected"))},n.send(l)})}function isCurrentLocation(e){return document.location.href.toLowerCase()===e.toLowerCase()}function startHeartbeat(e,t){function n(){sendXHR(e,t).then(function(e){e.code!==_status2.default.closing||isCurrentLocation(e.url)||(stopInitScriptExecution(),document.location=e.url)})}window.setInterval(n,HEARTBEAT_INTERVAL),n()}function executeInitScript(initScriptUrl,createXHR){allowInitScriptExecution&&sendXHR(initScriptUrl,createXHR).then(function(res){return res.code?sendXHR(initScriptUrl,createXHR,"POST",JSON.stringify(eval(res.code))):null}).then(function(){window.setTimeout(function(){return executeInitScript(initScriptUrl,createXHR)},1e3)})}function startInitScriptExecution(e,t){allowInitScriptExecution=!0,executeInitScript(e,t)}function stopInitScriptExecution(){allowInitScriptExecution=!1}function redirect(e){stopInitScriptExecution(),document.location=e.url}function checkStatus(e,t,n){var o=(n||{}).manualRedirect;return sendXHR(e,t).then(function(e){var t=(e.cmd===_command2.default.run||e.cmd===_command2.default.idle)&&!isCurrentLocation(e.url);return t&&!o&&redirect(e),{command:e,redirecting:t}})}}},core:{deps:{"hammerhead.js":function(e,t,n){e.__esModule=!0,e.default=window["%hammerhead%"],t.exports=e.default}},"index.js":function(e,t,n){var o=R(n("./deps/hammerhead")),i=R(n("./utils/key-maps")),r=R(n("./utils/node-type-descriptions")),l=R(n("./request-barrier")),u=M(n("./page-unload-barrier")),a=n("./prevent-real-events"),s=R(n("./scroll-controller")),d=M(n("./utils/service")),f=M(n("./utils/dom")),c=M(n("./utils/content-editable")),m=M(n("./utils/position")),h=M(n("./utils/style")),p=M(n("./utils/event")),g=M(n("./utils/array")),v=M(n("./utils/promise")),E=M(n("./utils/text-selection")),y=R(n("./utils/wait-for")),b=R(n("./utils/delay")),w=R(n("./utils/noop")),S=R(n("./utils/get-key-array")),x=R(n("./utils/get-sanitized-key")),N=R(n("./utils/parse-key-sequence")),_=R(n("./utils/send-request-to-frame")),T=M(n("../browser")),I=R(n("../../client-functions/selectors/selector-text-filter")),C=R(n("../../client-functions/selectors/selector-attribute-filter"));function M(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function R(e){return e&&e.__esModule?e:{default:e}}e.RequestBarrier=l.default,e.pageUnloadBarrier=u,e.preventRealEvents=a.preventRealEvents,e.disableRealEventsPreventing=a.disableRealEventsPreventing,e.scrollController=s.default,e.serviceUtils=d,e.domUtils=f,e.contentEditable=c,e.positionUtils=m,e.styleUtils=h,e.eventUtils=p,e.arrayUtils=g,e.promiseUtils=v,e.textSelection=E,e.waitFor=y.default,e.delay=b.default,e.noop=w.default,e.getKeyArray=S.default,e.getSanitizedKey=x.default,e.parseKeySequence=N.default,e.sendRequestToFrame=_.default,e.KEY_MAPS=i.default,e.NODE_TYPE_DESCRIPTIONS=r.default,e.browser=T,e.selectorTextFilter=I.default,e.selectorAttributeFilter=C.default,e.get=n,o.default.nativeMethods.objectDefineProperty.call(window,window,"%testCafeCore%",{configurable:!0,value:e}),o.default.on(o.default.EVENTS.evalIframeScript,function(e){return initTestCafeCore(e.iframe.contentWindow,!0)})},"page-unload-barrier.js":function(e,t,n){e.__esModule=!0,e.init=function(){o.default.on(o.default.EVENTS.beforeUnload,x),i.bind(window,"unload",function(){b=!0})},e.watchForPageNavigationTriggers=function(){w=function(){S=!0},o.default.on(o.default.EVENTS.pageNavigationTriggered,w)},e.wait=function(t){var e=new s(function(e){void 0===t&&(t=!w||S?m:0),w&&(o.default.off(o.default.EVENTS.pageNavigationTriggered,w),w=null),(0,r.default)(t).then(function(){b?new s(function(t){f.setTimeout.call(window,function(){c.queuedAsyncServiceMsg({cmd:l.default.waitForFileDownload}).then(function(e){e&&t()})},p)}).then(function(){b=!1,e()}):v?y.push(e):e()})}),n=(0,r.default)(g).then(function(){b=!1});return s.race([e,n])};var o=a(n("./deps/hammerhead")),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./utils/event")),r=a(n("./utils/delay")),l=a(n("../../test-run/client-messages")),u=n("./utils/dom");function a(e){return e&&e.__esModule?e:{default:e}}var s=o.default.Promise,d=o.default.utils.browser,f=o.default.nativeMethods,c=o.default.transport,m=400,h=30,p=500,g=15e3,v=!1,E=null,y=[],b=!1,w=null,S=!1;function x(){var e;d.isIE?(e=h,E&&f.clearTimeout.call(window,E),v=!0,E=f.setTimeout.call(window,function(){E=null,v=!1,y.forEach(function(e){return e()}),y=[]},e),(0,r.default)(0).then(function(){if("loading"===document.readyState){var e=f.documentActiveElementGetter.call(document);e&&(0,u.isAnchorElement)(e)&&e.hasAttribute("download")||(b=!0)}})):b=!0}},"prevent-real-events.js":function(e,t,n){e.__esModule=!0,e.preventRealEvents=function(){r.initElementListening(window,l),r.addFirstInternalHandler(window,l,u),i.default.init()},e.disableRealEventsPreventing=function(){r.removeInternalEventListener(window,l,u)};var o,d=n("./deps/hammerhead"),i=(o=n("./scroll-controller"))&&o.__esModule?o:{default:o},f=n("./utils/style"),c=n("./utils/array"),m=n("./utils/dom"),h=d.utils.browser,r=d.eventSandbox.listeners,p=d.eventSandbox.eventSimulator,l=["click","mousedown","mouseup","dblclick","contextmenu","mousemove","mouseover","mouseout","touchstart","touchmove","touchend","keydown","keypress","input","keyup","change","focus","blur","MSPointerDown","MSPointerMove","MSPointerOver","MSPointerOut","MSPointerUp","pointerdown","pointermove","pointerover","pointerout","pointerup"],g=123;function u(e,t,n,o,i){var r,l=e.target||e.srcElement;if(!t&&!(0,m.isShadowUIElement)(l)){if(/^key/.test(e.type)&&((r=e).shiftKey&&r.ctrlKey||(r.altKey||r.metaKey)&&h.isMacPlatform||r.keyCode===g))return void i();if("blur"===e.type)if(h.isIE&&h.version<12){var u=!(0,m.isWindow)(l)&&"none"===(0,f.get)(l,"display"),a=null,s=!1;u||(a=(0,m.getParents)(l),s=(0,c.filter)(a,function(e){return"none"===(0,f.get)(e,"display")})),(u||s.length)&&d.eventSandbox.timers.deferFunction(function(){p.blur(l)})}else if(l!==window&&l!==window.document&&!(0,f.hasDimensions)(l))return;n()}}},"request-barrier.js":function(e,t,n){e.__esModule=!0;var r=u(n("./deps/hammerhead")),i=u(n("./utils/delay")),l=n("./utils/array"),o=n("./utils/service");function u(e){return e&&e.__esModule?e:{default:e}}var a=r.default.Promise,s=r.default.nativeMethods,d="requests-finished",f=function(n){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this));return t.BARRIER_TIMEOUT=3e3,t.delays={requestsCollection:void 0===e.requestsCollection?50:e.requestsCollection,additionalRequestsCollection:void 0===e.additionalRequestsCollection?50:e.additionalRequestsCollection,pageInitialRequestsCollection:void 0===e.pageInitialRequestsCollection?50:e.pageInitialRequestsCollection},t.collectingReqs=!0,t.requests=[],t.watchdog=null,t._unbindHandlers=null,t._init(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),o.prototype._init=function(){var t=this,e=function(e){return t._onXhrSend(e.xhr)},n=function(e){return t._onRequestCompleted(e.xhr)},o=function(e){return t._onRequestError(e.xhr,e.err)},i=function(e){return t._onFetchSend(e)};r.default.on(r.default.EVENTS.beforeXhrSend,e),r.default.on(r.default.EVENTS.xhrCompleted,n),r.default.on(r.default.EVENTS.xhrError,o),r.default.on(r.default.EVENTS.fetchSent,i),this._unbindHandlers=function(){r.default.off(r.default.EVENTS.beforeXhrSend,e),r.default.off(r.default.EVENTS.xhrCompleted,n),r.default.off(r.default.EVENTS.xhrError,o),r.default.off(r.default.EVENTS.fetchSent,i)}},o.prototype._onXhrSend=function(e){this.collectingReqs&&this.requests.push(e)},o.prototype._onRequestCompleted=function(e){var t=this;(0,i.default)(this.delays.additionalRequestsCollection).then(function(){return t._onRequestFinished(e)})},o.prototype._onRequestError=function(e){this._onRequestFinished(e)},o.prototype._onRequestFinished=function(e){-1<(0,l.indexOf)(this.requests,e)&&((0,l.remove)(this.requests,e),this.collectingReqs||this.requests.length||this.emit(d))},o.prototype._onFetchSend=function(e){var t=this;this.collectingReqs&&(this.requests.push(e),e.then(function(){return t._onRequestCompleted(e)}).catch(function(){return t._onRequestError(e)}))},o.prototype.wait=function(e){var n=this;return new a(function(t){(0,i.default)(e?n.delays.pageInitialRequestsCollection:n.delays.requestsCollection).then(function(){n.collectingReqs=!1;var e=function(){n.watchdog&&s.clearTimeout.call(window,n.watchdog),n._unbindHandlers(),t()};n.requests.length?(n.watchdog=s.setTimeout.call(window,e,n.BARRIER_TIMEOUT),n.on(d,e)):e()})})},o}(o.EventEmitter);(e.default=f).GLOBAL_REQUEST_BARRIER_FIELD="testcafe|request-barrier",window[f.GLOBAL_REQUEST_BARRIER_FIELD]=f,t.exports=e.default},"scroll-controller.js":function(e,t,n){e.__esModule=!0;var o=n("./deps/hammerhead"),i=n("./utils/service"),r=o.eventSandbox.listeners,l=function(){function n(){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.initialized=!1,this.stopPropagationFlag=!1,this.events=new i.EventEmitter}return n.prototype._internalListener=function(e,t,n,o,i){this.events.emit("scroll",e),this.stopPropagationFlag&&(o(),i())},n.prototype.init=function(){var e=this;this.initialized||(this.initialized=!0,r.initElementListening(window,["scroll"]),r.addFirstInternalHandler(window,["scroll"],function(){return e._internalListener.apply(e,arguments)}))},n.prototype.waitForScroll=function(){var e=this,t=null,n=new o.Promise(function(e){t=e});return n.cancel=function(){return e.events.off("scroll",t)},this.initialized?this.events.once("scroll",t):t(),n},n.prototype.stopPropagation=function(){this.stopPropagationFlag=!0},n.prototype.enablePropagation=function(){this.stopPropagationFlag=!1},n}();e.default=new l,t.exports=e.default},utils:{"array.js":function(e,t,n){e.__esModule=!0,e.toArray=function(e){for(var t=[],n=e.length,o=0;o<n;o++)t.push(e[o]);return t},e.reverse=function(e){return d.call(e)},e.isArray=function(e){return"[object Array]"===i.default.nativeMethods.objectToString.call(e)},e.find=function(e,t){for(var n=e.length,o=0;o<n;o++)if(t(e[o],o,e))return e[o];return null},e.indexOf=m,e.forEach=function(e,t){l.call(e,t)},e.some=function(e,t){return u.call(e,t)},e.map=function(e,t){return a.call(e,t)},e.filter=function(e,t){return s.call(e,t)},e.reduce=function(e,t,n){return f.call(e,t,n)},e.remove=function(e,t){var n=m(e,t);-1<n&&c.call(e,n,1)},e.equals=function(e,t){if(e.length!==t.length)return!1;for(var n=0,o=e.length;n<o;n++)if(e[n]!==t[n])return!1;return!0},e.getCommonElement=function(e,t){for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++)if(e[n]===t[o])return e[n];return null};var o,i=(o=n("../deps/hammerhead"))&&o.__esModule?o:{default:o},r=Array.prototype.indexOf,l=Array.prototype.forEach,u=Array.prototype.some,a=Array.prototype.map,s=Array.prototype.filter,d=Array.prototype.reverse,f=Array.prototype.reduce,c=Array.prototype.splice;function m(e,t){return r.call(e,t)}},"content-editable.js":function(e,t,n){e.__esModule=!0,e.getFirstVisibleTextNode=E,e.getLastTextNode=y,e.getFirstNonWhitespaceSymbolIndex=i,e.getLastNonWhitespaceSymbolIndex=r,e.isInvisibleTextNode=b,e.findContentEditableParent=N,e.getNearestCommonAncestor=_,e.getSelection=function(e,t,n){return{startPos:I(e,t,n),endPos:C(e,t,n)}},e.getSelectionStartPosition=function(e,t,n){return R(e,I(e,t,n))},e.getSelectionEndPosition=function(e,t,n){return R(e,C(e,t,n))},e.calculateNodeAndOffsetByPosition=function(l,e){var u={node:null,offset:e};return function t(e){var n,o,i=e.childNodes,r=s.getChildNodesLength(i);if(u.node)return u;if(S(e))return u;if(s.isTextNode(e)){if(u.offset<=e.nodeValue.length)return u.node=e,u;e.nodeValue.length&&(!u.node&&g(l,e)&&u.offset--,u.offset-=e.nodeValue.length)}else if(s.isElementNode(e)){if(!f(e))return u;if(0===u.offset&&M(e,!1))return u.node=e,u.offset=(n=e,o=0,d.find(n.childNodes,function(e,t){return o=t,"br"===s.getTagName(e)})?o:0),u;(u.node||!p(l,e)&&!g(l,e))&&(r||"br"!==s.getTagName(e))||u.offset--}return d.forEach(i,function(e){u=t(e)}),u}(l)},e.calculatePositionByNodeAndOffset=R,e.getElementBySelection=function(e){var t=_(e.anchorNode,e.focusNode);return s.isTextNode(t)?t.parentElement:t},e.getFirstVisiblePosition=function(e){var t=s.isTextNode(e)?e:E(e),n=s.findDocument(e).createRange();return t?(n.selectNodeContents(t),R(e,{node:t,offset:n.startOffset})):0},e.getLastVisiblePosition=function(e){var t,n,o,i,r=s.isTextNode(e)?e:y(e,!0);if(!r||(n=e,o=(t=r)===(s.isTextNode(n)?n:v(n,!1)),i=t.nodeValue===String.fromCharCode(10),o&&i&&function(e,t){for(var n=["pre","pre-wrap","pre-line"];e!==t;)if(e=e.parentNode,-1<d.indexOf(n,u.get(e,"white-space")))return!0;return!1}(t,n)))return 0;var l=s.findDocument(e).createRange();return l.selectNodeContents(r),R(e,{node:r,offset:l.endOffset})},e.getContentEditableValue=function(e){return d.map(function t(e){var n=[],o=e.childNodes,i=s.getChildNodesLength(o);return S(e)||i||!s.isTextNode(e)||n.push(e),d.forEach(o,function(e){n=n.concat(t(e))}),n}(e),function(e){return e.nodeValue}).join("")};var s=o(n("./dom")),d=o(n("./array")),u=o(n("./style"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e){var t=e.childNodes;return!s.getChildNodesLength(t)&&w(e)?e:d.find(t,function(e){return w(e)})}function a(e){return d.find(e.childNodes,function(e){return w(e)||!S(e)&&a(e)})}function f(e){return s.isTextNode(e)||s.isElementNode(e)&&u.isElementVisible(e)}function c(e){return d.filter(e.childNodes,f)}function m(e){return d.some(e.childNodes,f)}function h(e){return d.some(e.childNodes,function(e){return M(e,!0)})}function p(e,t){var n=null,o=null;return!s.isShadowUIElement(e)&&!s.isShadowUIElement(t)&&!(s.isTheSameNode(t,e)||!s.getChildNodesLength(t.childNodes)||!/div|p/.test(s.getTagName(t)))&&!(!(n=a(e))||s.isTheSameNode(t,n))&&!(!(o=E(n))||s.isTheSameNode(t,o))&&l(t)}function g(e,o){var t=s.isRenderedNode(o),n=null,i=null,r=null;if(s.isShadowUIElement(e)||s.isShadowUIElement(o))return!1;if(!s.isTheSameNode(o,e)&&(t&&s.isElementNode(o)&&s.getChildNodesLength(o.childNodes)&&!/div|p/.test(s.getTagName(o))||w(o)&&!s.isTheSameNode(o,e)&&o.nodeValue.length)){if(t&&s.isElementNode(o)){if(!(n=a(e))||s.isTheSameNode(o,n))return!1;if(!(i=E(n))||s.isTheSameNode(o,i))return!1}return(r=function(e){for(var t=null,n=o;!t&&(n=n.previousSibling);)if(!S(n)&&!b(n)){t=n;break}return t}())&&s.isElementNode(r)&&/div|p/.test(s.getTagName(r))&&l(r)}return!1}function v(e,t){var n=e.childNodes,o=s.getChildNodesLength(n),i=null,r=null,l=null,u=t?w:s.isTextNode;if(!o&&u(e))return e;for(var a=0;a<o;a++){if(i=n[a],l=s.isElementNode(i)&&!s.isContentEditableElement(i),u(i))return i;if(s.isRenderedNode(i)&&m(i)&&!l&&(r=v(i,t)))return r}return r}function E(e){return v(e,!0)}function y(e,t){var n=e.childNodes,o=s.getChildNodesLength(n),i=null,r=null,l=null;if(!o&&w(e))return e;for(var u=o-1;0<=u;u--){if(i=n[u],l=s.isElementNode(i)&&!s.isContentEditableElement(i),s.isTextNode(i)&&(!t||!b(i)))return i;if(s.isRenderedNode(i)&&m(i)&&!l&&(r=y(i,!1)))return r}return r}function i(e,t){if(!e||!e.length)return 0;for(var n=e.length,o=t||0,i=o;i<n&&(10===e.charCodeAt(i)||32===e.charCodeAt(i));i++)o++;return o}function r(e){if(!e||!e.length)return 0;for(var t=e.length,n=t,o=t-1;0<=o&&(10===e.charCodeAt(o)||32===e.charCodeAt(o));o--)n--;return n}function b(e){if(!s.isTextNode(e))return!1;var t=e.nodeValue,n=i(t),o=r(t);return n===t.length&&0===o}function w(e){return s.isTextNode(e)&&!b(e)}function S(e){return!s.isRenderedNode(e)||s.isShadowUIElement(e)}function x(e){var t=e.getAttribute?e.getAttribute("contenteditable"):null;return""===t||"true"===t}function N(e){var t=s.getParents(e);if(x(e)&&s.isContentEditableElement(e))return e;var n=s.findDocument(e);return"on"===n.designMode?n.body:d.find(t,function(e){return x(e)&&s.isContentEditableElement(e)})}function _(e,t){if(s.isTheSameNode(e,t))return s.isTheSameNode(t,N(e))?e:e.parentNode;var n=[],o=N(e),i=null;if(!s.isElementContainsNode(o,t))return null;for(i=e;i!==o;i=i.parentNode)n.push(i);for(i=t;i!==o;i=i.parentNode)if(-1!==d.indexOf(n,i))return i;return o}function T(e,t){var n=null,o=null,i=s.getChildNodesLength(e.childNodes),r=i<=t;if(s.isShadowUIElement(e))return{node:e,offset:t};if(r?n=e.childNodes[i-1]:(n=e.childNodes[t],o=0),s.isShadowUIElement(n)){if(i<=1)return{node:e,offset:0};(r=i<=t-1)?n=e.childNodes[i-2]:(n=e.childNodes[t-1],o=0)}for(;!S(n)&&s.isElementNode(n);){var l=c(n);if(!l.length){o=0;break}n=l[r?l.length-1:0]}return 0===o||S(n)||(o=n.nodeValue?n.nodeValue.length:0),{node:n,offset:o}}function I(e,t,n){var o=n?t.focusNode:t.anchorNode,i=n?t.focusOffset:t.anchorOffset,r={node:o,offset:i};return(s.isTheSameNode(e,o)||s.isElementNode(o))&&h(o)&&(r=T(o,i)),{node:r.node,offset:r.offset}}function C(e,t,n){var o=n?t.anchorNode:t.focusNode,i=n?t.anchorOffset:t.focusOffset,r={node:o,offset:i};return(s.isTheSameNode(e,o)||s.isElementNode(o))&&h(o)&&(r=T(o,i)),{node:r.node,offset:r.offset}}function M(e,t){if(u.isNotVisibleNode(e))return!1;if(s.isTextNode(e))return!0;if(!s.isElementNode(e))return!1;if(h(e))return t;var n=!s.isContentEditableElement(e.parentNode),o=c(e),i=d.some(o,function(e){return"br"===s.getTagName(e)});return n||i}function R(i,e){var r=e.node,l=e.offset,u=0,a=!1;return function t(e){var n=e.childNodes,o=s.getChildNodesLength(n);return a?u:s.isTheSameNode(r,e)?((p(i,e)||g(i,e))&&u++,a=!0,u+l):(S(e)||(!o&&e.nodeValue&&e.nodeValue.length?(!a&&g(i,e)&&u++,u+=e.nodeValue.length):!o&&s.isElementNode(e)&&"br"===s.getTagName(e)?u++:a||!p(i,e)&&!g(i,e)||u++,d.forEach(n,function(e){u=t(e)})),u)}(i)}},"delay.js":function(e,t,n){e.__esModule=!0,e.default=function(t){return new r(function(e){return l.setTimeout.call(window,e,t)})};var o,i=(o=n("../deps/hammerhead"))&&o.__esModule?o:{default:o},r=i.default.Promise,l=i.default.nativeMethods;t.exports=e.default},"dom.js":function(e,t,n){e.__esModule=!0,e.getTopSameDomainWindow=e.getParents=e.closest=e.getTagName=e.getMapContainer=e.getScrollbarSize=e.isElementReadOnly=e.isHammerheadAttr=e.isElementFocusable=e.isShadowUIElement=e.isDomElement=e.isContentEditableElement=e.isTextEditableElementAndEditingAllowed=e.isTextEditableElement=e.isTextEditableInput=e.isWindow=e.isDocument=e.isHtmlElement=e.isBodyElement=e.isMapElement=e.isSVGElement=e.isOptionElement=e.isSelectElement=e.isFormElement=e.isImgElement=e.isAnchorElement=e.isTextAreaElement=e.isFileInput=e.isButtonElement=e.isInputElement=e.isIframeElement=e.isRenderedNode=e.isTextNode=e.isElementNode=e.getSelectVisibleChildren=e.getChildVisibleIndex=e.getSelectParent=e.isCrossDomainWindows=e.getIframeByElement=e.isElementInIframe=e.isElementInDocument=e.findDocument=e.getActiveElement=void 0,e.containsElement=M,e.getTextareaIndentInLine=function(e,t){var n=A(e);if(!n)return 0;var o=n.substring(0,t);return t-(-1===o.lastIndexOf("\n")?0:o.lastIndexOf("\n")+1)},e.getTextareaLineNumberByPosition=function(e,t){for(var n=A(e).split("\n"),o=0,i=0,r=0;o<=t;r++){if(t<=o+n[r].length){i=r;break}o+=n[r].length+1}return i},e.getTextareaPositionByLineAndOffset=function(e,t,n){for(var o=A(e).split("\n"),i=0,r=0;r<t;r++)i+=o[r].length+1;return i+n},e.blocksImplicitSubmission=function(e){return(h.isSafari?/^(text|password|color|date|time|datetime|datetime-local|email|month|number|search|tel|url|week|image)$/i:h.isFirefox?/^(text|password|date|time|datetime|datetime-local|email|month|number|search|tel|url|week|image)$/i:h.isIE?/^(text|password|color|date|time|datetime|datetime-local|email|file|month|number|search|tel|url|week|image)$/i:/^(text|password|datetime|email|number|search|tel|url|image)$/i).test(e.type)},e.isEditableElement=function(e,t){return t?E(e)||y(e):f(e)||y(e)},e.isElementContainsNode=function(e,t){var i=!1;return function e(t,n){(i||R(n,t))&&(i=!0);for(var o=0;o<t.childNodes.length;o++)if(i=e(t.childNodes[o],n))return i;return i}(e,t)},e.isOptionGroupElement=function(e){return"[object HTMLOptGroupElement]"===i.default.utils.dom.instanceToString(e)},e.getElementIndexInParent=function(e,t){var n=e.querySelectorAll(w(t));return m.indexOf(n,t)},e.isTheSameNode=R,e.getElementDescription=function(e){var t={id:"id",name:"name",class:"className"},n=[];for(var o in n.push("<"),n.push(w(e)),t)if(t.hasOwnProperty(o)){var i=e[t[o]];i&&n.push(" "+o+'="'+i+'"')}return n.push(">"),n.join("")},e.getNextFocusableElement=function(t,e){var n=e?-1:1,o=_(C(u(t)));a(t)&&"radio"===t.type&&""!==t.name&&!h.isFirefox&&(o=m.filter(o,function(e){return!e.name||e===t||e.name!==t.name}));var i=m.indexOf(o,t);return(e?0===i:i===o.length-1)?document.body:e&&-1===i?o[o.length-1]:o[i+n]},e.getFocusableParent=function(e){for(var t=S(e),n=0;n<t.length;n++)if(b(t[n]))return t[n];return null},e.remove=function(e){e&&e.parentElement&&e.parentElement.removeChild(e)},e.isIFrameWindowInDOM=function(e){if(!e.setTimeout)return!1;var t=null;try{t=e.frameElement}catch(t){return!!e.top}return!(!h.isFirefox&&!h.isWebKit||e.top===e||t)||!(!t||!t.contentDocument)},e.isTopWindow=function(e){try{return e.top===e}catch(e){return!1}},e.findIframeByWindow=function(e,t){for(var n=(t||window).document.getElementsByTagName("iframe"),o=0;o<n.length;o++)if(n[o].contentWindow===e)return n[o];return null},e.isEditableFormElement=function(e){return f(e)||d(e)},e.getCommonAncestor=function(e,t){if(R(e,t))return e;for(var n=[e].concat(S(e)),o=t;o;){if(-1<m.indexOf(n,o))return o;o=o.parentNode}return o},e.getChildrenLength=function(e){return l.htmlCollectionLengthGetter.call(e)},e.getChildNodesLength=function(e){return l.nodeListLengthGetter.call(e)},e.getInputValue=P,e.getTextAreaValue=A,e.setInputValue=O,e.setTextAreaValue=V,e.getElementValue=function(e){return a(e)?P(e):s(e)?A(e):e.value},e.setElementValue=function(e,t){return a(e)?O(e,t):s(e)?V(e,t):e.value=t};var o,i=(o=n("../deps/hammerhead"))&&o.__esModule?o:{default:o},c=r(n("./style")),m=r(n("./array"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var h=i.default.utils.browser,l=i.default.nativeMethods,u=(e.getActiveElement=i.default.utils.dom.getActiveElement,e.findDocument=i.default.utils.dom.findDocument),p=(e.isElementInDocument=i.default.utils.dom.isElementInDocument,e.isElementInIframe=i.default.utils.dom.isElementInIframe,e.getIframeByElement=i.default.utils.dom.getIframeByElement,e.isCrossDomainWindows=i.default.utils.dom.isCrossDomainWindows,e.getSelectParent=i.default.utils.dom.getSelectParent,e.getChildVisibleIndex=i.default.utils.dom.getChildVisibleIndex,e.getSelectVisibleChildren=i.default.utils.dom.getSelectVisibleChildren,e.isElementNode=i.default.utils.dom.isElementNode,e.isTextNode=i.default.utils.dom.isTextNode,e.isRenderedNode=i.default.utils.dom.isRenderedNode,e.isIframeElement=i.default.utils.dom.isIframeElement),a=e.isInputElement=i.default.utils.dom.isInputElement,s=(e.isButtonElement=i.default.utils.dom.isButtonElement,e.isFileInput=i.default.utils.dom.isFileInput,e.isTextAreaElement=i.default.utils.dom.isTextAreaElement),g=e.isAnchorElement=i.default.utils.dom.isAnchorElement,d=(e.isImgElement=i.default.utils.dom.isImgElement,e.isFormElement=i.default.utils.dom.isFormElement,e.isSelectElement=i.default.utils.dom.isSelectElement),v=e.isOptionElement=i.default.utils.dom.isOptionElement,f=(e.isSVGElement=i.default.utils.dom.isSVGElement,e.isMapElement=i.default.utils.dom.isMapElement,e.isBodyElement=i.default.utils.dom.isBodyElement,e.isHtmlElement=i.default.utils.dom.isHtmlElement,e.isDocument=i.default.utils.dom.isDocument,e.isWindow=i.default.utils.dom.isWindow,e.isTextEditableInput=i.default.utils.dom.isTextEditableInput,e.isTextEditableElement=i.default.utils.dom.isTextEditableElement),E=e.isTextEditableElementAndEditingAllowed=i.default.utils.dom.isTextEditableElementAndEditingAllowed,y=e.isContentEditableElement=i.default.utils.dom.isContentEditableElement,b=(e.isDomElement=i.default.utils.dom.isDomElement,e.isShadowUIElement=i.default.utils.dom.isShadowUIElement,e.isElementFocusable=i.default.utils.dom.isElementFocusable),w=(e.isHammerheadAttr=i.default.utils.dom.isHammerheadAttr,e.isElementReadOnly=i.default.utils.dom.isElementReadOnly,e.getScrollbarSize=i.default.utils.dom.getScrollbarSize,e.getMapContainer=i.default.utils.dom.getMapContainer,e.getTagName=i.default.utils.dom.getTagName),S=(e.closest=i.default.utils.dom.closest,e.getParents=i.default.utils.dom.getParents);function x(e){return m.filter(e,function(e){return 0<e.tabIndex})}function N(e){return m.filter(e,function(e){return e.tabIndex<=0})}function _(e){if(!e||!e.length)return[];var t=x(e),n=m.filter(e,function(e){return p(e)});if(!t.length)return n.length&&(e=T(e,n)),e;t=t.sort(I("tabIndex"));var o=N(e);return n.length?T(t,n).concat(T(o,n)):t.concat(o)}function T(e,t){var n,o,i=(o=x(n=t)).length?o.sort(I("tabIndex")).concat(N(n)):n,r=[],l=[],u=[],a=0;for(a=0;a<i.length;a++){try{u=C(i[a].contentDocument)}catch(e){u=[]}l.push(_(u))}for(a=0;a<e.length;a++)if(r.push(e[a]),p(e[a]))if(h.isIE){r.pop();var s=l[m.indexOf(t,e[a])],d=x(s),f=N(s);d=d.sort(I("tabIndex")),(r=r.concat(d)).push(e[a]),r=r.concat(f)}else h.isWebKit&&l[m.indexOf(t,e[a])].length&&r.pop(),r=r.concat(l[m.indexOf(t,e[a])]);return r}function I(n){return function(e,t){return e[n]<t[n]?-1:e[n]>t[n]?1:0}}function C(e){for(var t=e.querySelectorAll("*"),n=function(e){for(var t=[],n=0;n<e.length;n++)"none"===c.get(e[n],"display")&&t.push(e[n]);return t}(t),o=/^(input|button|select|textarea)$/,i=[],r=null,l=null,u=null,a=!1,s=0;s<t.length;s++)if(r=t[s],l=w(r),f=void 0,null!==(f=r.getAttribute("tabIndex"))&&(f=parseInt(f,10),f=isNaN(f)?null:f),u=f,a=!1,!r.disabled&&"none"!==c.get(r,"display")&&"hidden"!==c.get(r,"visibility")&&!((h.isIE||h.isAndroid)&&v(r)||null!==u&&u<0)){o.test(l)?a=!0:h.isIE&&p(r)?i.push(r):g(r)&&r.hasAttribute("href")&&(a=""!==r.getAttribute("href")||!h.isIE||null!==u);var d=r.getAttribute("contenteditable");""!==d&&"true"!==d||(a=!0),null!==u&&(a=!0),a&&i.push(r)}var f;return m.filter(i,function(e){return!M(n,e)})}function M(e,t){return e.contains?e.contains(t):m.some(e,function(e){return e.contains(t)})}function R(e,t){return e&&t&&e.isSameNode?e.isSameNode(t):e===t}function P(e){return l.inputValueGetter.call(e)}function A(e){return l.textAreaValueGetter.call(e)}function O(e,t){return l.inputValueSetter.call(e,t)}function V(e,t){return l.textAreaValueSetter.call(e,t)}e.getTopSameDomainWindow=i.default.utils.dom.getTopSameDomainWindow},"event.js":function(e,t,n){e.__esModule=!0,e.preventDefault=e.WHICH_PARAMETER=e.DOM_EVENTS=e.BUTTONS_PARAMETER=e.BUTTON=e.RECORDING_LISTENED_EVENTS=void 0,e.bind=d,e.unbind=f,e.documentReady=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return c().then(function(){return s.getEventListeners(window,"load").length?u.race([m(),(0,i.default)(e)]):null})};var o=l(n("../deps/hammerhead")),i=l(n("./delay")),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./dom"));function l(e){return e&&e.__esModule?e:{default:e}}var u=o.default.Promise,a=o.default.nativeMethods,s=o.default.eventSandbox.listeners;function d(e,t,n,o){r.isWindow(e)?a.windowAddEventListener.call(e,t,n,o):a.addEventListener.call(e,t,n,o)}function f(e,t,n,o){r.isWindow(e)?a.windowRemoveEventListener.call(e,t,n,o):a.removeEventListener.call(e,t,n,o)}e.RECORDING_LISTENED_EVENTS=["click","mousedown","mouseup","dblclick","contextmenu","mousemove","mouseover","mouseout","touchstart","touchmove","touchend","keydown","keypress","input","keyup","change","focus","blur","MSPointerDown","MSPointerMove","MSPointerOver","MSPointerOut","MSPointerUp","pointerdown","pointermove","pointerover","pointerout","pointerup"],e.BUTTON=o.default.utils.event.BUTTON,e.BUTTONS_PARAMETER=o.default.utils.event.BUTTONS_PARAMETER,e.DOM_EVENTS=o.default.utils.event.DOM_EVENTS,e.WHICH_PARAMETER=o.default.utils.event.WHICH_PARAMETER,e.preventDefault=o.default.utils.event.preventDefault;var c=function(){return new u(function(e){var t=!1;function n(){t||(document.body?(t=!0,e()):a.setTimeout.call(window,n,1))}function o(){(r.isIFrameWindowInDOM(window)||r.isTopWindow(window))&&(f(document,"DOMContentLoaded",o),n())}"complete"===document.readyState?a.setTimeout.call(window,o,1):d(document,"DOMContentLoaded",o)})},m=function(){return new u(function(e){return d(window,"load",e)})}},"get-key-array.js":function(e,t,n){e.__esModule=!0,e.default=function(e){var t=e.replace(/^\+/g,"plus").replace(/\+\+/g,"+plus").split("+");return(0,o.map)(t,function(e){return e.replace("plus","+")})};var o=n("./array");t.exports=e.default},"get-sanitized-key.js":function(e,t,n){e.__esModule=!0,e.default=function(e){var t=1===e.length||"space"===e?e:e.toLowerCase();return i.default.modifiersMap[t]&&(t=i.default.modifiersMap[t]),t};var o,i=(o=n("./key-maps"))&&o.__esModule?o:{default:o};t.exports=e.default},"key-maps.js":function(e,t,n){e.__esModule=!0;var o,i=((o=n("../deps/hammerhead"))&&o.__esModule?o:{default:o}).default.utils.browser,r={alt:18,ctrl:17,meta:91,shift:16},l={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=","{":"[","}":"]",":":";",'"':"'","|":"\\","<":",",">":".","?":"/","±":"§"},u={backspace:8,capslock:20,delete:46,down:40,end:35,enter:13,esc:27,home:36,ins:45,left:37,pagedown:34,pageup:33,right:39,space:32,tab:9,up:38};function a(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}e.default={modifiers:r,shiftMap:l,specialKeys:u,reversedModifiers:a(r),reversedShiftMap:a(l),reversedSpecialKeys:a(u),modifiersMap:{option:"alt"},keyProperty:{left:i.isIE?"Left":"ArrowLeft",down:i.isIE?"Down":"ArrowDown",right:i.isIE?"Right":"ArrowRight",up:i.isIE?"Up":"ArrowUp",backspace:"Backspace",capslock:"CapsLock",delete:"Delete",end:"End",enter:"Enter",esc:"Escape",home:"Home",ins:"Insert",pagedown:"PageDown",pageup:"PageUp",space:" ",tab:"Tab",alt:"Alt",ctrl:"Control",meta:"Meta",shift:"Shift"},symbolCharCodeToKeyCode:{96:192,91:219,93:221,92:220,59:186,39:222,44:188,45:i.isFirefox?173:189,46:190,47:191},symbolKeysCharCodes:{109:45,173:45,186:59,187:61,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,110:46,96:48,97:49,98:50,99:51,100:52,101:53,102:54,103:55,104:56,105:57,107:43,106:42,111:47}},t.exports=e.default},"node-type-descriptions.js":function(e,t,n){e.__esModule=!0,e.default={1:"element",2:"attribute",3:"text",4:"cdata section",5:"entity reference",6:"entity node",7:"processing instruction",8:"comment",9:"document",10:"document type",11:"document fragment",12:"notation"},t.exports=e.default},"noop.js":function(e,t,n){e.__esModule=!0,e.default=function(){},t.exports=e.default},"parse-key-sequence.js":function(e,t,n){e.__esModule=!0,e.default=function(e){if("string"!=typeof e)return{error:!0};var t=(e=s(e).replace(/\s+/g," ")).length,n=e.charAt(t-1),o=e.charAt(t-2);1<t&&"+"===n&&!/[+ ]/.test(o)&&(e=e.substring(0,e.length-1));var i=e.split(" ");return{combinations:i,error:(0,l.some)(i,function(e){var t=(0,u.default)(e);return(0,l.some)(t,function(e){var t=1===e.length||"space"===e,n=(0,a.default)(e),o=r.default.modifiers[n],i=r.default.specialKeys[n];return!(t||o||i)})}),keys:e}};var o=i(n("../deps/hammerhead")),r=i(n("./key-maps")),l=n("./array"),u=i(n("./get-key-array")),a=i(n("./get-sanitized-key"));function i(e){return e&&e.__esModule?e:{default:e}}var s=o.default.utils.trim;t.exports=e.default},"position.js":function(e,t,n){e.__esModule=!0,e.offsetToClientCoords=e.getOffsetPosition=e.getElementRectangle=void 0,e.getIframeClientCoordinates=function(e){var t=w(e),n=t.left,o=t.top,i=S({x:n,y:o}),r=y.getBordersWidth(e),l=y.getElementPadding(e),u=i.x+r.left+l.left,a=i.y+r.top+l.top;return{left:u,top:a,right:u+y.getWidth(e),bottom:a+y.getHeight(e)}},e.isElementVisible=function e(t){if(b.isTextNode(t))return!y.isNotVisibleNode(t);var n=d(t);if(!b.isContentEditableElement(t)&&(0===n.width||0===n.height))return!1;if(b.isMapElement(t)){var o=b.getMapContainer(b.closest(t,"map"));return!!o&&e(o)}if(y.isSelectVisibleChild(t)){var i=b.getSelectParent(t),r=b.getChildVisibleIndex(i,t),l=y.getSelectElementSize(i),u=Math.max(y.getScrollTop(i)/y.getOptionHeight(i),0),a=u+l-1,s=Math.max(r-u,0);return u<=s&&s<=a}return b.isSVGElement(t)?"hidden"!==y.get(t,"visibility")&&"none"!==y.get(t,"display"):y.hasDimensions(t)&&"hidden"!==y.get(t,"visibility")},e.getClientDimensions=a,e.containsOffset=function(e,t,n){var o=a(e),i=Math.max(e.scrollWidth,o.width),r=Math.max(e.scrollHeight,o.height),l=o.scrollbar.right+o.border.left+o.border.right+i,u=o.scrollbar.bottom+o.border.top+o.border.bottom+r;return(void 0===t||0<=t&&t<=l)&&(void 0===n||0<=n&&n<=u)},e.getEventAbsoluteCoordinates=function(e){var t=e.target||e.srcElement,n=s(e),o=b.findDocument(t),i=0,r=0;if(b.isElementInIframe(o.documentElement)){var l=b.getIframeByElement(o);if(l){var u=w(l),a=y.getBordersWidth(l);i=u.left+a.left,r=u.top+a.top}}return{x:n.x+i,y:n.y+r}},e.getEventPageCoordinates=s,e.getElementFromPoint=function(e,t){var n=null,o=document.getElementFromPoint||document.elementFromPoint;try{n=o.call(document,e,t)}catch(e){return null}for(null===n&&(n=o.call(document,e-1,t-1));n&&n.shadowRoot&&n.shadowRoot.elementFromPoint;){var i=n.shadowRoot.elementFromPoint(e,t);if(!i)break;n=i}return n},e.getIframePointRelativeToParentFrame=function(e,t){var n=b.findIframeByWindow(t),o=w(n),i=y.getBordersWidth(n),r=y.getElementPadding(n);return S({x:e.x+o.left+i.left+r.left,y:e.y+o.top+i.top+r.top})},e.clientToOffsetCoord=function(e,t){var n=t||document;return{x:e.x+y.getScrollLeft(n),y:e.y+y.getScrollTop(n)}},e.findCenter=function(e){var t=d(e);return{x:Math.round(t.left+t.width/2),y:Math.round(t.top+t.height/2)}},e.getClientPosition=function(e){var t=w(e),n=t.left,o=t.top,i=S({x:n,y:o});return i.x=Math.round(i.x),i.y=Math.round(i.y),i},e.getElementClientRectangle=function(e){var t=d(e),n=S({x:t.left,y:t.top});return{height:t.height,left:n.x,top:n.y,width:t.width}},e.calcRelativePosition=function(e,t){return{left:Math.ceil(e.left-(t.left+t.border.left)),right:Math.floor(t.right-t.border.right-t.scrollbar.right-e.right),top:Math.ceil(e.top-(t.top+t.border.top)),bottom:Math.floor(t.bottom-t.border.bottom-t.scrollbar.bottom-e.bottom)}},e.isInRectangle=function(e,t){var n=e.x,o=e.y;return n>=t.left&&n<=t.right&&o>=t.top&&o<=t.bottom},e.getLineYByXCoord=function(e,t,n){if(t.x-e.x==0)return null;var o=(t.y-e.y)/(t.x-e.x),i=e.x*(e.y-t.y)/(t.x-e.x)+e.y;return Math.round(o*n+i)},e.getLineXByYCoord=function(e,t,n){if(t.y-e.y==0)return null;var o=(t.x-e.x)/(t.y-e.y),i=e.y*(e.x-t.x)/(t.y-e.y)+e.x;return Math.round(o*n+i)};var o,i=(o=n("../deps/hammerhead"))&&o.__esModule?o:{default:o},y=r(n("./style")),b=r(n("./dom"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var d=e.getElementRectangle=i.default.utils.position.getElementRectangle,w=e.getOffsetPosition=i.default.utils.position.getOffsetPosition,S=e.offsetToClientCoords=i.default.utils.position.offsetToClientCoords;function a(e){if(!b.isDomElement(e)){var t=S(e);return{width:0,height:0,border:{bottom:0,left:0,right:0,top:0},scroll:{left:0,top:0},left:t.x,right:t.x,top:t.y,bottom:t.y}}var n=/html/i.test(e.tagName),o=n?e.getElementsByTagName("body")[0]:null,i=y.getBordersWidth(e),r=e.getBoundingClientRect(),l=y.getElementScroll(e),u=b.isElementInIframe(e),a=n?0:r.left,s=n?0:r.top,d=n?e.clientHeight:r.height,f=n?e.clientWidth:r.width,c="BackCompat"===e.ownerDocument.compatMode;if(n&&o&&("boolean"==typeof isIFrameWithoutSrc&&isIFrameWithoutSrc||c)&&(d=o.clientHeight,f=o.clientWidth),u){var m=b.getIframeByElement(e);if(m){var h=w(m),p=S({x:h.left,y:h.top}),g=y.getBordersWidth(m);a+=p.x+g.left,s+=p.y+g.top,n&&(i.bottom+=g.bottom,i.left+=g.left,i.right+=g.right,i.top+=g.top)}}var v=n||y.getInnerWidth(e)===e.clientWidth?0:b.getScrollbarSize(),E=n||y.getInnerHeight(e)===e.clientHeight?0:b.getScrollbarSize();return{width:f,height:d,left:a,top:s,border:i,bottom:s+d,right:a+f,scroll:{left:l.left,top:l.top},scrollbar:{right:v,bottom:E}}}function s(e){var t=/^touch/.test(e.type)&&e.targetTouches?e.targetTouches[0]||e.changedTouches[0]:e,n=0===t.pageX&&0===t.pageY,o=0!==t.clientX||0!==t.clientY;if((null===t.pageX||n&&o)&&null!==t.clientX){var i=b.findDocument(e.target||e.srcElement),r=i.documentElement,l=i.body;return{x:Math.round(t.clientX+(r&&r.scrollLeft||l&&l.scrollLeft||0)-(r.clientLeft||0)),y:Math.round(t.clientY+(r&&r.scrollTop||l&&l.scrollTop||0)-(r.clientTop||0))}}return{x:Math.round(t.pageX),y:Math.round(t.pageY)}}},"promise.js":function(e,t,n){e.__esModule=!0,e.whilst=function(o,i){return new l(function(t,n){return function e(){return o()?i().then(e).catch(function(e){return n(e)}):t()}()})},e.times=function(e,t){for(var n=l.resolve(),o=function(e){n=n.then(function(){return t(e)})},i=0;i<e;i++)o(i);return n},e.each=function(e,n){return(0,r.reduce)(e,function(e,t){return e.then(function(){return n(t)})},l.resolve())};var o,i=(o=n("../deps/hammerhead"))&&o.__esModule?o:{default:o},r=n("./array"),l=i.default.Promise},"send-request-to-frame.js":function(e,t,n){e.__esModule=!0,e.default=function(e,o,t){return new r(function(n){l.on(l.SERVICE_MSG_RECEIVED_EVENT,function e(t){t.message.cmd===o&&(l.off(l.SERVICE_MSG_RECEIVED_EVENT,e),n(t.message))}),l.sendServiceMsg(e,t)})};var o,i=(o=n("../deps/hammerhead"))&&o.__esModule?o:{default:o},r=i.default.Promise,l=i.default.eventSandbox.message;t.exports=e.default},"service.js":function(e,t,n){e.__esModule=!0,e.EventEmitter=void 0,e.inherit=function(e,t){var n=function(){};n.prototype=t.prototype,i.default.utils.extend(e.prototype,new n),(e.prototype.constructor=e).base=t.prototype};var o,i=(o=n("../deps/hammerhead"))&&o.__esModule?o:{default:o},r=n("./array"),l=e.EventEmitter=function(){this.eventsListeners=[]};l.prototype.emit=function(e){var t=this.eventsListeners[e];if(t)for(var n=0;n<t.length;n++)try{t[n]&&t[n].apply(this,Array.prototype.slice.apply(arguments,[1]))}catch(e){if(!(e.message&&-1<e.message.indexOf("freed script")))throw e;t[n]=null}},l.prototype.off=function(e,t){var n=this.eventsListeners[e];n&&(this.eventsListeners[e]=(0,r.filter)(n,function(e){return e!==t}))},l.prototype.on=function(e,t){this.eventsListeners[e]||(this.eventsListeners[e]=[]),this.eventsListeners[e].push(t)},l.prototype.once=function(e,t){var n=this;this.on(e,function(){return n.off(e,t),t.apply(void 0,arguments)})}},"style.js":function(e,t,n){e.__esModule=!0,e.get=e.setScrollTop=e.setScrollLeft=e.getScrollTop=e.getScrollLeft=e.getInnerHeight=e.getInnerWidth=e.getHeight=e.getWidth=e.isSelectVisibleChild=e.isElementVisible=e.getSelectElementSize=e.getOptionHeight=e.getElementScroll=e.getElementPadding=e.getElementMargin=e.getComputedStyle=e.getBordersWidth=void 0,e.isFixedElement=function(e){return u.isElementNode(e)&&"fixed"===a(e,"position")},e.isNotVisibleNode=function(e){return!u.isRenderedNode(e)||c(e)||f(e)},e.getScrollableParents=function(e){var t=u.getParents(e);if(u.isElementInIframe(e)){var n=u.getParents(u.getIframeByElement(e));t.concat(n)}return(0,r.filter)(t,h)},e.hasScroll=h,e.hasDimensions=function(e){return e&&!(e.offsetHeight<=0&&e.offsetWidth<=0)},e.set=function(e,t,n){for(var o in"string"==typeof t&&l.set(e,t,n),t)t.hasOwnProperty(o)&&l.set(e,o,t[o])},e.getViewportDimensions=function(){return{width:p(window.innerWidth,document.documentElement.clientWidth,document.body.clientWidth),height:p(window.innerHeight,document.documentElement.clientHeight,document.body.clientHeight)}};var o,i=(o=n("../deps/hammerhead"))&&o.__esModule?o:{default:o},u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./dom")),r=n("./array"),l=i.default.utils.style,a=(e.getBordersWidth=i.default.utils.style.getBordersWidth,e.getComputedStyle=i.default.utils.style.getComputedStyle,e.getElementMargin=i.default.utils.style.getElementMargin,e.getElementPadding=i.default.utils.style.getElementPadding,e.getElementScroll=i.default.utils.style.getElementScroll,e.getOptionHeight=i.default.utils.style.getOptionHeight,e.getSelectElementSize=i.default.utils.style.getSelectElementSize,e.isElementVisible=i.default.utils.style.isElementVisible,e.isSelectVisibleChild=i.default.utils.style.isVisibleChild,e.getWidth=i.default.utils.style.getWidth,e.getHeight=i.default.utils.style.getHeight,e.getInnerWidth=i.default.utils.style.getInnerWidth,e.getInnerHeight=i.default.utils.style.getInnerHeight,e.getScrollLeft=i.default.utils.style.getScrollLeft,e.getScrollTop=i.default.utils.style.getScrollTop,e.setScrollLeft=i.default.utils.style.setScrollLeft,e.setScrollTop=i.default.utils.style.setScrollTop,e.get=i.default.utils.style.get),s=/auto|scroll/i,d=function(e){return function(e){for(var t=[];e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t}(e).concat([e])},f=function(e){var t=d(e);return(0,r.some)(t,function(e){return u.isElementNode(e)&&"hidden"===a(e,"visibility")})},c=function(e){var t=d(e);return(0,r.some)(t,function(e){return u.isElementNode(e)&&"none"===a(e,"display")})};function m(e){var t=a(e,"overflowX"),n=a(e,"overflowY"),o=s.test(t),i=s.test(n),r=u.findDocument(e).documentElement;return(o||i)&&e.scrollHeight>r.scrollHeight}function h(e){var t=a(e,"overflowX"),n=a(e,"overflowY"),o=s.test(t),i=s.test(n);if(u.isBodyElement(e))return m(e);if(u.isHtmlElement(e))return function(e){var t=a(e,"overflowX"),n=a(e,"overflowY"),o=e.getElementsByTagName("body")[0];if("hidden"===t&&"hidden"===n)return!1;var i=e.scrollHeight>e.clientHeight,r=e.scrollWidth>e.clientWidth;if(i||r)return!0;if(o){if(m(o))return!1;var l=Math.min(e.clientWidth,o.clientWidth),u=Math.min(e.clientHeight,o.clientHeight);return o.scrollHeight>u||o.scrollWidth>l}return!1}(e);if(!o&&!i)return!1;var r=i&&e.scrollHeight>e.clientHeight,l=o&&e.scrollWidth>e.clientWidth;return r||l}function p(e,t,n){return e<t?n:e<n?t:Math.max(n,t)}},"text-selection.js":function(e,t,n){e.__esModule=!0,e.hasInverseSelectionContentEditable=l,e.isInverseSelectionContentEditable=C,e.getSelectionStart=M,e.getSelectionEnd=R,e.hasInverseSelection=function(e){return g.isContentEditableElement(e)?l(e):(m.getSelection(e).direction||b)===h},e.getSelectionByElement=P,e.select=function(e,t,n){if(g.isContentEditableElement(e))I(e,t,n,!0);else{var o=t||0,i=void 0===n?g.getElementValue(e).length:n,r=!1,l=null;i<o&&(l=o,o=i,i=l,r=!0),m.setSelection(e,o,i,r?h:p),b=t===n?y:r?h:p}},e.selectByNodesAndOffsets=A,e.deleteSelectionContents=function(i,e){var t=M(i),n=R(i);if(e&&I(i),t!==n){var o,r,l,u,a,s,d,f,c,m,h;o=P(i),r=o.anchorNode,l=o.focusNode,u=o.anchorOffset,a=o.focusOffset,s=v.getFirstNonWhitespaceSymbolIndex(r.nodeValue),d=v.getLastNonWhitespaceSymbolIndex(r.nodeValue),f=v.getFirstNonWhitespaceSymbolIndex(l.nodeValue),c=v.getLastNonWhitespaceSymbolIndex(l.nodeValue),h=m=null,g.isTextNode(r)&&(u<s&&0!==u?m=0:u!==r.nodeValue.length&&(v.isInvisibleTextNode(r)&&0!==u||d<u)&&(m=r.nodeValue.length)),g.isTextNode(l)&&(a<f&&0!==a?h=0:a!==l.nodeValue.length&&(v.isInvisibleTextNode(l)&&0!==a||c<a)&&(h=l.nodeValue.length)),(E.isWebKit||E.isIE&&11<E.version)&&(null!==m&&(r.nodeValue=0===m?r.nodeValue.substring(s):r.nodeValue.substring(0,d)),null!==h&&(l.nodeValue=0===h?l.nodeValue.substring(f):l.nodeValue.substring(0,c))),(null!==m||null!==h)&&A({node:r,offset:m=null!==m?0===m?m:r.nodeValue.length:u},{node:l,offset:h=null!==h?0===h?h:l.nodeValue.length:a}),function(e){var t=P(i),n=t.rangeCount;if(n)for(var o=0;o<n;o++)t.getRangeAt(o).deleteContents()}();var p=P(i);p.rangeCount&&!p.getRangeAt(0).collapsed&&p.getRangeAt(0).collapse(!0)}},e.setCursorToLastVisiblePosition=function(e){var t=v.getLastVisiblePosition(e);I(e,t,t)},e.hasElementContainsSelection=u;var o,f=(o=n("../deps/hammerhead"))&&o.__esModule?o:{default:o},g=r(n("./dom")),v=r(n("./content-editable")),i=r(n("./event"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var E=f.default.utils.browser,c=f.default.nativeMethods,m=f.default.eventSandbox.selection,h="backward",p="forward",y="none",b=y,w=0,S=0,x=0,N=0,_=0,T=0;function I(e,t,n,o){var i=null,r=null,l=null,u=null,a=null,s=!1;void 0!==t&&void 0!==n&&n<t&&(a=t,t=n,n=a,s=!0),void 0===t&&(u={node:(r=v.getFirstVisibleTextNode(e))||e,offset:r&&r.nodeValue?v.getFirstNonWhitespaceSymbolIndex(r.nodeValue):0}),void 0===n&&(i={node:(l=v.getLastTextNode(e,!0))||e,offset:l&&l.nodeValue?v.getLastNonWhitespaceSymbolIndex(l.nodeValue):0}),u=u||v.calculateNodeAndOffsetByPosition(e,t),i=i||v.calculateNodeAndOffsetByPosition(e,n),u.node&&i.node&&(s?A(i,u,o):A(u,i,o))}function l(e){var t=e?g.findDocument(e):document,n=t.getSelection(),o=null,i=!1;return n&&(n.isCollapsed||((o=t.createRange()).setStart(n.anchorNode,n.anchorOffset),o.setEnd(n.focusNode,n.focusOffset),i=o.collapsed,o.detach())),i}function C(e,t,n){var o=v.calculatePositionByNodeAndOffset(e,t);return v.calculatePositionByNodeAndOffset(e,n)<o}function M(e){var t=null;return g.isContentEditableElement(e)?u(e)?(t=P(e),v.getSelectionStartPosition(e,t,l(e))):0:m.getSelection(e).start}function R(e){var t=null;return g.isContentEditableElement(e)?u(e)?(t=P(e),v.getSelectionEndPosition(e,t,l(e))):0:m.getSelection(e).end}function P(e){var t=g.findDocument(e);return t?t.getSelection():window.getSelection()}function A(e,t,n){var o=e.node,i=t.node,r=o.nodeValue?o.length:0,l=i.nodeValue?i.length:0,u=e.offset,a=t.offset;g.isElementNode(o)&&u||(u=Math.min(r,e.offset)),g.isElementNode(i)&&a||(a=Math.min(l,t.offset));var s=v.findContentEditableParent(o),d=C(s,e,t),f=P(s),c=g.findDocument(s).createRange();m.wrapSetterSelection(s,function(){if(f.removeAllRanges(),d)if(E.isIE)c.setStart(i,a),c.setEnd(o,u),f.addRange(c);else{c.setStart(o,u),c.setEnd(o,u),f.addRange(c);var e=function(e,t){try{f.extend(e,t)}catch(e){return!1}return!0};(E.isSafari||E.isChrome&&E.version<58)&&v.isInvisibleTextNode(i)?e(i,Math.min(a,1))||e(i,0):e(i,a)}else c.setStart(o,u),c.setEnd(i,a),f.addRange(c)},n,!0)}function u(e){var t=P(e);return!(!t.anchorNode||!t.focusNode)&&g.isElementContainsNode(e,t.anchorNode)&&g.isElementContainsNode(e,t.focusNode)}E.isIE&&i.bind(document,"selectionchange",function(){var e=null,t=null,n=null,o=null,i=null;try{if(this.selection)n=this.selection.createRange();else{if(!(e=c.documentActiveElementGetter.call(this))||!g.isTextEditableElement(e))return void(b=y);if(i=M(e),t=R(e),e.createTextRange)(n=e.createTextRange()).collapse(!0),n.moveStart("character",i),n.moveEnd("character",t-i);else if(document.createRange){n=document.createRange();var r=f.default.nativeMethods.nodeFirstChildGetter.call(e);n.setStart(r,i),n.setEnd(r,t),o=n.getBoundingClientRect()}}}catch(e){return void(b=y)}var l=o?Math.ceil(o.left):n.offsetLeft,u=o?Math.ceil(o.top):n.offsetTop,a=o?Math.ceil(o.height):n.boundingHeight,s=o?Math.ceil(o.width):n.boundingWidth,d=n.htmlText?n.htmlText.length:0;!function(e,t,n,o,i){if(i)switch(b){case y:t===T&&(e===N||x<n)?b=p:(e<N||t<T)&&(b=h);break;case p:if(e===N&&t===T||e<N&&x<n||t===T&&n===x&&_<i&&e+o!==w)break;(e<N||t<T)&&(b=h);break;case h:if((e<N||t<T)&&_<i)break;t===S&&(w<=e||x<n)&&(b=p)}else w=e,S=t,b=y;x=n,N=e,_=i,T=t}(l,u,a,s,o?n.toString().length:d)},!0)},"wait-for.js":function(e,t,n){e.__esModule=!0,e.default=function(r,l,u){return new a(function(e,t){var n=r();if(n)e(n);else var o=s.setInterval.call(window,function(){(n=r())&&(s.clearInterval.call(window,o),s.clearTimeout.call(window,i),e(n))},l),i=s.setTimeout.call(window,function(){s.clearInterval.call(window,o),t()},u)})};var o,i=(o=n("../deps/hammerhead"))&&o.__esModule?o:{default:o},a=i.default.Promise,s=i.default.nativeMethods;t.exports=e.default}}}},"client-functions":{selectors:{"selector-attribute-filter.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n,o,i){if(1!==e.nodeType)return!1;for(var r=e.attributes,l=null,u=function(e,t){return"string"==typeof t?t===e:t.test(e)},a=0;a<r.length;a++)if(u((l=r[a]).nodeName,o)&&(!i||u(l.nodeValue,i)))return!0;return!1},t.exports=e.default},"selector-text-filter.js":function(e,t,n){e.__esModule=!0,e.default=function o(e,i,r,l){function t(e){for(var t=e.childNodes.length,n=0;n<t;n++)if(o(e.childNodes[n],i,r,l))return!0;return!1}function n(e){return l instanceof RegExp?l.test(e):l===e.trim()}if(1===e.nodeType){var u=e.innerText;if("option"===e.tagName.toLowerCase()){var a=e.textContent;!u&&a&&(u=a)}return n(u)}if(9===e.nodeType){var s=e.querySelector("head"),d=e.querySelector("body");return t(s)||t(d)}return 11===e.nodeType?t(e):n(e.textContent)},t.exports=e.default}}},"test-run":{"client-messages.js":function(e,t,n){e.__esModule=!0,e.default={ready:"ready",readyForBrowserManipulation:"ready-for-browser-manipulation",waitForFileDownload:"wait-for-file-download"},t.exports=e.default}}}}})("testcafe/src/client/core/index")}initTestCafeCore(window)}();