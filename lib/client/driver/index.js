!function(){function initTestCafeClientDrivers(window,isIFrameWithoutSrc){var document=window.document;!function(u){"use strict";var f,m,o,h,p,i={".js":[],".json":[],".css":[],".html":[]},l="function"==typeof require?require:null;return h=function(e){var t=new Error("Could not find module '"+e+"'");return t.code="MODULE_NOT_FOUND",t},p=function(e,t,n){var r,o;if("function"==typeof e[t+n])return t+n;for(r=0;o=i[n][r];++r)if("function"==typeof e[t+o])return t+o;return null},f=function(e,t,n,r,o,i){var a,s,u,l,c,d;for("."!==(a=(n=n.split("/")).pop())&&".."!==a||(n.push(a),a="");null!=(s=n.shift());)if(s&&"."!==s&&(".."===s?(e=t.pop(),i=i.slice(0,i.lastIndexOf("/"))):(t.push(e),e=e[s],i+="/"+s),!e))throw h(r);if(a&&"function"!=typeof e[a]&&((d=p(e,a,".js"))||(d=p(e,a,".json")),d||(d=p(e,a,".css")),d||(d=p(e,a,".html")),d?a=d:2!==o&&"object"==typeof e[a]&&(t.push(e),e=e[a],i+="/"+a,a="")),!a)return 1!==o&&e[":mainpath:"]?f(e,t,e[":mainpath:"],r,1,i):f(e,t,"index",r,2,i);if(!(c=e[a]))throw h(r);return c.hasOwnProperty("module")?c.module.exports:(u={},c.module=l={exports:u,id:i+"/"+a},c.call(u,u,l,m(e,t,i)),l.exports)},o=function(e,t,n,r){var o,i=n,a=n.charAt(0),s=0;if("/"===a){if(i=i.slice(1),!(e=u["/"])){if(l)return l(n);throw h(n)}r="/",t=[]}else if("."!==a){if(o=i.split("/",1)[0],!(e=u[o])){if(l)return l(n);throw h(n)}r=o,t=[],(i=i.slice(o.length+1))||((i=e[":mainpath:"])?s=1:(i="index",s=2))}return f(e,t,i,n,s,r)},(m=function(t,n,r){return function(e){return o(t,[].concat(n),e,r)}})(u,[],"")}({replicator:{":mainpath:":"index.js","index.js":function(O,P,Q){var R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S="@t",U=/^#*@(t|r)$/,V=eval("this"),W="function"==typeof ArrayBuffer,X="function"==typeof Map,Y="function"==typeof Set,Z=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],$=Array.prototype.slice,_={serialize:function(e){return JSON.stringify(e)},deserialize:function(e){return JSON.parse(e)}},aa=function(e,t){this.references=e,this.transforms=t,this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0};aa._createRefMark=function(e){var t=Object.create(null);return t["@r"]=e,t},aa.prototype._createCircularCandidate=function(e,t,n){this.circularCandidates.push(e),this.circularCandidatesDescrs.push({parent:t,key:n,refIdx:-1})},aa.prototype._applyTransform=function(e,t,n,r){var o=Object.create(null),i=r.toSerializable(e);return"object"===(void 0===i?"undefined":R(i))&&this._createCircularCandidate(e,t,n),o[S]=r.type,o.data=this._handleValue(i,t,n),o},aa.prototype._handleArray=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=this._handleValue(e[n],t,n);return t},aa.prototype._handlePlainObject=function(e){var t=Object.create(null);for(var n in e)if(e.hasOwnProperty(n)){var r=U.test(n)?"#"+n:n;t[r]=this._handleValue(e[n],t,r)}return t},aa.prototype._handleObject=function(e,t,n){return this._createCircularCandidate(e,t,n),Array.isArray(e)?this._handleArray(e):this._handlePlainObject(e)},aa.prototype._ensureCircularReference=function(e){var t=this.circularCandidates.indexOf(e);if(-1<t){var n=this.circularCandidatesDescrs[t];return-1===n.refIdx&&(n.refIdx=n.parent?++this.circularRefCount:0),aa._createRefMark(n.refIdx)}return null},aa.prototype._handleValue=function(e,t,n){var r=void 0===e?"undefined":R(e),o="object"===r&&null!==e;if(o){var i=this._ensureCircularReference(e);if(i)return i}for(var a=0;a<this.transforms.length;a++){var s=this.transforms[a];if(s.shouldTransform(r,e))return this._applyTransform(e,t,n,s)}return o?this._handleObject(e,t,n):e},aa.prototype.transform=function(){for(var e=[this._handleValue(this.references,null,null)],t=0;t<this.circularCandidatesDescrs.length;t++){var n=this.circularCandidatesDescrs[t];0<n.refIdx&&(e[n.refIdx]=n.parent[n.key],n.parent[n.key]=aa._createRefMark(n.refIdx))}return e};var ba=function(e,t){this.references=e,this.transformMap=t,this.activeTransformsStack=[],this.visitedRefs=Object.create(null)};ba.prototype._handlePlainObject=function(e){var t=Object.create(null);for(var n in e)e.hasOwnProperty(n)&&(this._handleValue(e[n],e,n),U.test(n)&&(t[n.substring(1)]=e[n],delete e[n]));for(var r in t)e[r]=t[r]},ba.prototype._handleTransformedObject=function(e,t,n){var r=e[S],o=this.transformMap[r];if(!o)throw new Error("Can't find transform for \""+r+'" type.');this.activeTransformsStack.push(e),this._handleValue(e.data,e,"data"),this.activeTransformsStack.pop(),t[n]=o.fromSerializable(e.data)},ba.prototype._handleCircularSelfRefDuringTransform=function(e,t,n){var r=this.references,o=void 0;Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:function(){return void 0===o&&(o=r[e]),o},set:function(e){return o=e}})},ba.prototype._handleCircularRef=function(e,t,n){-1<this.activeTransformsStack.indexOf(this.references[e])?this._handleCircularSelfRefDuringTransform(e,t,n):(this.visitedRefs[e]||(this.visitedRefs[e]=!0,this._handleValue(this.references[e],this.references,e)),t[n]=this.references[e])},ba.prototype._handleValue=function(e,t,n){if("object"===(void 0===e?"undefined":R(e))&&null!==e){var r=e["@r"];if(void 0!==r)this._handleCircularRef(r,t,n);else if(e[S])this._handleTransformedObject(e,t,n);else if(Array.isArray(e))for(var o=0;o<e.length;o++)this._handleValue(e[o],e,o);else this._handlePlainObject(e)}},ba.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]};var ca=[{type:"[[NaN]]",shouldTransform:function(e,t){return"number"===e&&isNaN(t)},toSerializable:function(){return""},fromSerializable:function(){return NaN}},{type:"[[undefined]]",shouldTransform:function(e){return"undefined"===e},toSerializable:function(){return""},fromSerializable:function(){}},{type:"[[Date]]",shouldTransform:function(e,t){return t instanceof Date},toSerializable:function(e){return e.getTime()},fromSerializable:function(e){var t=new Date;return t.setTime(e),t}},{type:"[[RegExp]]",shouldTransform:function(e,t){return t instanceof RegExp},toSerializable:function(e){var t={src:e.source,flags:""};return e.global&&(t.flags+="g"),e.ignoreCase&&(t.flags+="i"),e.multiline&&(t.flags+="m"),t},fromSerializable:function(e){return new RegExp(e.src,e.flags)}},{type:"[[Error]]",shouldTransform:function(e,t){return t instanceof Error},toSerializable:function(e){return{name:e.name,message:e.message,stack:e.stack}},fromSerializable:function(e){var t=new(V[e.name]||Error)(e.message);return t.stack=e.stack,t}},{type:"[[ArrayBuffer]]",shouldTransform:function(e,t){return W&&t instanceof ArrayBuffer},toSerializable:function(e){var t=new Int8Array(e);return $.call(t)},fromSerializable:function(e){if(W){var t=new ArrayBuffer(e.length);return new Int8Array(t).set(e),t}return e}},{type:"[[TypedArray]]",shouldTransform:function(e,t){for(var n=0;n<Z.length;n++){var r=Z[n];if("function"==typeof V[r]&&t instanceof V[r])return!0}return!1},toSerializable:function(e){return{ctorName:e.constructor.name,arr:$.call(e)}},fromSerializable:function(e){return"function"==typeof V[e.ctorName]?new V[e.ctorName](e.arr):e.arr}},{type:"[[Map]]",shouldTransform:function(e,t){return X&&t instanceof Map},toSerializable:function(e){var n=[];return e.forEach(function(e,t){n.push(t),n.push(e)}),n},fromSerializable:function(e){if(X){for(var t=new Map,n=0;n<e.length;n+=2)t.set(e[n],e[n+1]);return t}for(var r=[],o=0;o<e.length;o+=2)r.push([e[n],e[n+1]]);return r}},{type:"[[Set]]",shouldTransform:function(e,t){return Y&&t instanceof Set},toSerializable:function(e){var t=[];return e.forEach(function(e){t.push(e)}),t},fromSerializable:function(e){if(Y){for(var t=new Set,n=0;n<e.length;n++)t.add(e[n]);return t}return e}}],da=P.exports=function(e){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=e||_,this.addTransforms(ca)};da.prototype.addTransforms=function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var n=e[t];if(this.transformsMap[n.type])throw new Error('Transform with type "'+n.type+'" was already added.');this.transforms.push(n),this.transformsMap[n.type]=n}return this},da.prototype.removeTransforms=function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var n=e[t],r=this.transforms.indexOf(n);-1<r&&this.transforms.splice(r,1),delete this.transformsMap[n.type]}return this},da.prototype.encode=function(e){var t=new aa(e,this.transforms).transform();return this.serializer.serialize(t)},da.prototype.decode=function(e){var t=this.serializer.deserialize(e);return new ba(t,this.transformsMap).transform()}}},testcafe:{src:{client:{driver:{"command-executors":{"browser-manipulation":{"ensure-crop-options.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t){var n=e.getBoundingClientRect(),r={left:n.left,right:n.right,top:n.top,bottom:n.bottom},o=v.styleUtils.getElementMargin(e),i=v.styleUtils.getElementPadding(e),a=v.styleUtils.getBordersWidth(e);t.originOffset={x:0,y:0};var s=r.left+e.scrollWidth+a.left+a.right,u=r.top+e.scrollHeight+a.top+a.bottom;r.right=Math.max(r.right,s),r.bottom=Math.max(r.bottom,u),t.includeBorders&&t.includePaddings?t.includeMargins&&(t.originOffset.x-=o.left,t.originOffset.y-=o.top,r.left-=o.left,r.top-=o.top,r.right+=o.right,r.bottom+=o.bottom):(t.originOffset.x+=a.left,t.originOffset.y+=a.top,r.left+=a.left,r.top+=a.top,r.right-=a.right,r.bottom-=a.bottom,t.includePaddings||(t.originOffset.x+=i.left,t.originOffset.y+=i.top,r.left+=i.left,r.top+=i.top,r.right-=i.right,r.bottom-=i.bottom)),r.width=r.right-r.left,r.height=r.bottom-r.top;var l=S({min:t.crop.left,max:t.crop.right,length:t.crop.width},r.width),c=S({min:t.crop.top,max:t.crop.bottom,length:t.crop.height},r.height);if(t.crop.left=l.min,t.crop.right=l.max,t.crop.width=l.length,t.crop.top=c.min,t.crop.bottom=c.max,t.crop.height=c.length,t.crop.width<=0||t.crop.height<=0)throw new _.InvalidElementScreenshotDimensionsError(t.crop.width,t.crop.height);var d=v.styleUtils.getViewportDimensions();(r.width>d.width||r.height>d.height)&&(t.scrollToCenter=!0);var f="number"==typeof t.scrollTargetX,m="number"==typeof t.scrollTargetY;f||(t.scrollTargetX=b(t.crop.left,t.crop.right,d.width)),m||(t.scrollTargetY=b(t.crop.top,t.crop.bottom,d.height));var h=(0,w.getOffsetOptions)(e,t.scrollTargetX,t.scrollTargetY),p=h.offsetX,g=h.offsetY;t.scrollTargetX=p,t.scrollTargetY=g;var E=!f||t.scrollTargetX>=t.crop.left&&t.scrollTargetX<=t.crop.right,y=!m||t.scrollTargetY>=t.crop.top&&t.scrollTargetY<=t.crop.bottom;if(!E||!y)throw new _.ActionInvalidScrollTargetError(E,y)};var r,v=n("../../deps/testcafe-core"),w=n("../../deps/testcafe-automation"),i=(r=n("../../../../utils/limit-number"))&&r.__esModule?r:{default:r},_=n("../../../../errors/test-run");function S(e,t){var n="number"==typeof e.min,r="number"==typeof e.max,o="number"==typeof e.length;return o&&(e.length=(0,i.default)(e.length,0,t)),n&&e.min<0&&(e.min+=t),r&&e.max<0&&(e.max+=t),n||(e.min=r&&o?e.max-e.length:0),r||(e.max=o?e.min+e.length:t),e.min=(0,i.default)(e.min,0,t),e.max=(0,i.default)(e.max,0,t),e.length=e.max-e.min,e}function b(e,t,n){return Math.round(e+(0,i.default)(t-e,0,n)/2)}t.exports=e.default},"index.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n){return new y(e,t,n).execute()};var i=n("../../deps/hammerhead"),a=n("../../deps/testcafe-core"),s=n("../../deps/testcafe-automation"),o=n("../../deps/testcafe-ui"),u=r(n("../../status")),l=r(n("./ensure-crop-options")),c=n("../../utils/ensure-elements"),d=r(n("../../utils/run-with-barriers")),f=r(n("../../../../test-run/client-messages")),m=r(n("../../../../test-run/commands/type")),h=n("../../../../test-run/commands/options");function r(e){return e&&e.__esModule?e:{default:e}}var p=i.eventSandbox.message,g="driver|browser-manipulation|request",E="driver|browser-manipulation|response";p.on(p.SERVICE_MSG_RECEIVED_EVENT,function(t){if(t.message.cmd===g){var e=a.domUtils.findIframeByWindow(t.source),n=t.message,r=n.command,o=n.cropDimensions;o&&(r.options=new h.ElementScreenshotOptions({crop:o,includePaddings:!1}));var i=new y(r);i.element=e,i.execute().then(function(e){return p.sendServiceMsg({cmd:E,result:e},t.source)})}});var y=function(){function r(e,t,n){!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.command=e,this.globalSelectorTimeout=t,this.statusBar=n,this.element=null}return r.prototype._getAbsoluteCropValues=function(){var e=this.element.getBoundingClientRect(),t=e.top,n=e.left;n+=this.command.options.originOffset.x,t+=this.command.options.originOffset.y;var r=n+this.command.options.crop.right,o=t+this.command.options.crop.bottom;return{top:t+=this.command.options.crop.top,left:n+=this.command.options.crop.left,bottom:o,right:r}},r.prototype._createManipulationReadyMessage=function(){var e=window.devicePixelRatio||1,t={cmd:f.default.readyForBrowserManipulation,pageDimensions:{dpr:e,innerWidth:window.innerWidth,innerHeight:window.innerHeight,documentWidth:document.documentElement.clientWidth,documentHeight:document.documentElement.clientHeight,bodyWidth:document.body.clientWidth,bodyHeight:document.body.clientHeight},disableResending:!0};return this.command.type===m.default.takeElementScreenshot&&(t.cropDimensions=this._getAbsoluteCropValues()),t},r.prototype._runScrollBeforeScreenshot=function(){var o=this;return i.Promise.resolve().then(function(){if(o.element||!o.command.selector)return i.Promise.resolve();var e=o.command.selector.timeout,t="number"==typeof e?e:o.globalSelectorTimeout;return o.statusBar.showWaitingElementStatus(t),(0,c.ensureElements)([(0,c.createElementDescriptor)(o.command.selector)],o.globalSelectorTimeout).then(function(e){o.statusBar.hideWaitingElementStatus(),o.element=e[0]}).catch(function(e){throw o.statusBar.hideWaitingElementStatus(),e})}).then(function(){(0,l.default)(o.element,o.command.options);var e=o.command.options,t=e.scrollTargetX,n=e.scrollTargetY,r=e.scrollToCenter;return new s.Scroll(o.element,new h.ScrollOptions({offsetX:t,offsetY:n,scrollToCenter:r,skipParentFrames:!0})).run()})},r.prototype._hideUI=function(){return(0,o.hide)(),this.command.markData&&(0,o.showScreenshotMark)(this.command.markData),(0,a.delay)(500)},r.prototype._showUI=function(){this.command.markData&&(0,o.hideScreenshotMark)(),(0,o.show)()},r.prototype._requestManipulation=function(){if(window.top===window)return i.transport.queuedAsyncServiceMsg(this._createManipulationReadyMessage());var e=this._getAbsoluteCropValues();return(0,a.sendRequestToFrame)({cmd:g,command:this.command,cropDimensions:e},E,window.parent).then(function(e){if(!e.result)return{result:null};var t=e.result,n=t.result,r=t.executionError;if(r)throw r;return{result:n}})},r.prototype._runManipulation=function(){var r=this,o=null;return i.Promise.resolve().then(function(){return r.command.type!==m.default.takeElementScreenshot?i.Promise.resolve():(a.scrollController.stopPropagation(),r._runScrollBeforeScreenshot())}).then(function(){return window.top===window?r._hideUI():i.Promise.resolve()}).then(function(){return r._requestManipulation()}).then(function(e){var t=e.result,n=e.error;if(n)throw n;return a.scrollController.enablePropagation(),o=t,window.top===window&&r._showUI(),(0,a.delay)(200)}).then(function(){return new u.default({isCommandResult:!0,result:o})}).catch(function(e){return a.scrollController.enablePropagation(),new u.default({isCommandResult:!0,executionError:e})})},r.prototype.execute=function(){var e=this;return(0,d.default)(function(){return e._runManipulation()}).barriersPromise},r}();t.exports=e.default}},"client-functions":{"client-function-executor.js":function(e,t,n){e.__esModule=!0;var r=n("../../deps/hammerhead"),o=u(n("../../status")),i=n("./replicator"),a=u(n("./eval-function")),s=n("../../../../errors/test-run");function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function n(e){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.command=e,this.replicator=this._createReplicator(),this.dependencies=this.replicator.decode(this.command.dependencies),this.fn=(0,a.default)(this.command.fnCode,this.dependencies)}return n.prototype.getResult=function(){var t=this;return r.Promise.resolve().then(function(){var e=t.replicator.decode(t.command.args);return t._executeFn(e)}).catch(function(e){throw e.isTestCafeError||(e=new s.UncaughtErrorInClientFunctionCode(t.command.instantiationCallsiteName,e)),e})},n.prototype.getResultDriverStatus=function(){var t=this;return this.getResult().then(function(e){return new o.default({isCommandResult:!0,result:t.replicator.encode(e)})}).catch(function(e){return new o.default({isCommandResult:!0,executionError:e})})},n.prototype._createReplicator=function(){return(0,i.createReplicator)([new i.ClientFunctionNodeTransform(this.command.instantiationCallsiteName),new i.FunctionTransform])},n.prototype._executeFn=function(e){return this.fn.apply(window,e)},n}();e.default=l,t.exports=e.default},"element-utils.js":function(e,t,n){e.__esModule=!0,e.exists=function(e){return!!e},e.visible=function(e){return!(!r.domUtils.isDomElement(e)&&!r.domUtils.isTextNode(e))&&(r.domUtils.isOptionElement(e)||"optgroup"===r.domUtils.getTagName(e)?o.selectElement.isOptionElementVisible(e):r.positionUtils.isElementVisible(e))};var r=n("../../deps/testcafe-core"),o=n("../../deps/testcafe-ui")},"eval-function.js":function(exports,module,require){exports.__esModule=!0,exports.default=evalFunction;var _hammerhead=require("../../deps/hammerhead"),_hammerhead2=_interopRequireDefault(_hammerhead);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Promise=_hammerhead2.default.Promise;function evalFunction(fnCode,__dependencies$){"use strict";return eval(fnCode)}module.exports=exports.default},"replicator.js":function(e,t,n){e.__esModule=!0,e.ClientFunctionNodeTransform=e.SelectorNodeTransform=e.FunctionTransform=void 0,e.createReplicator=function(e){return new r.default({serialize:d,deserialize:d}).addTransforms(e)};var r=u(n("replicator")),o=u(n("./eval-function")),i=n("./selector-executor/node-snapshots"),a=n("../../../../errors/test-run"),s=u(n("../../deps/hammerhead"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=window.Node,d=function(e){return e};e.FunctionTransform=function(){function e(){l(this,e),this.type="Function"}return e.prototype.shouldTransform=function(e){return"function"===e},e.prototype.toSerializable=function(){return""},e.prototype.fromSerializable=function(e){var t=e.fnCode,n=e.dependencies;return(0,o.default)(t,n)},e}(),e.SelectorNodeTransform=function(){function t(e){l(this,t),this.type="Node",this.customDOMProperties=e||{}}return t.prototype._extend=function(e,n){var r=this;s.default.nativeMethods.objectKeys.call(window.Object,this.customDOMProperties).forEach(function(t){try{e[t]=r.customDOMProperties[t](n)}catch(e){throw new a.UncaughtErrorInCustomDOMPropertyCode(r.instantiationCallsiteName,e,t)}})},t.prototype.shouldTransform=function(e,t){return t instanceof c},t.prototype.toSerializable=function(e){var t=1===e.nodeType?new i.ElementSnapshot(e):new i.NodeSnapshot(e);return this._extend(t,e),t},t}(),e.ClientFunctionNodeTransform=function(){function t(e){l(this,t),this.type="Node",this.instantiationCallsiteName=e}return t.prototype.shouldTransform=function(e,t){if(t instanceof c)throw new a.DomNodeClientFunctionResultError(this.instantiationCallsiteName)},t}()},"selector-executor":{"filter.js":function(e,t,n){var o=n("../../../../../errors/test-run"),i=n("../element-utils"),r=s(n("../../../deps/testcafe-core")),a=s(n("../../../deps/hammerhead"));function s(e){return e&&e.__esModule?e:{default:e}}var u=Array.isArray,l=window.Node,c=window.HTMLCollection,d=window.NodeList,f=r.default.arrayUtils;function m(e,t){return t<0?e[e.length+t]:e[t]}a.default.nativeMethods.objectDefineProperty.call(window,window,"%testCafeSelectorFilter%",{value:function(e,t){var n=[];if(null==e)n=[];else if(e instanceof l)n=[e];else{if(!(e instanceof c||e instanceof d||function(e){if(!u(e))return!1;for(var t=0;t<e.length;t++)if(!(e[t]instanceof l))return!1;return!0}(e)))throw new o.InvalidSelectorResultError;n=e}if(n=f.filter(n,function(e){return(0,i.exists)(e)}),t.filterVisible&&(n=n.filter(function(e){return(0,i.visible)(e)})),t.filterHidden&&(n=n.filter(function(e){return!(0,i.visible)(e)})),t.counterMode)return null!==t.index?m(n,t.index)?1:0:n.length;if(t.collectionMode){if(null!==t.index){var r=m(n,t.index);return r?[r]:[]}return n}return m(n,t.index||0)},configurable:!0})},"index.js":function(e,t,n){e.__esModule=!0;var r,o=n("../../../deps/hammerhead"),c=n("../../../deps/testcafe-core"),i=(r=n("../client-function-executor"))&&r.__esModule?r:{default:r},d=n("../element-utils"),f=n("../replicator");n("./filter");var a=function(u){function l(e,t,n,r,o){!function(e,t){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,u.call(this,e));if(i.createNotFoundError=r,i.createIsInvisibleError=o,i.timeout="number"==typeof e.timeout?e.timeout:t,i.counterMode=i.dependencies.filterOptions.counterMode,n){var a=new Date-n;i.timeout=Math.max(i.timeout-a,0)}var s=i.dependencies&&i.dependencies.customDOMProperties;return i.replicator.addTransforms([new f.SelectorNodeTransform(s)]),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,u),l.prototype._createReplicator=function(){return(0,f.createReplicator)([new f.FunctionTransform])},l.prototype._validateElement=function(i,a){var s=this;return o.Promise.resolve().then(function(){return s.fn.apply(window,i)}).then(function(e){var t=(0,d.exists)(e),n=!s.command.visibilityCheck||(0,d.visible)(e),r=t?s.createIsInvisibleError:s.createNotFoundError,o=new Date-a>=s.timeout;if(t&&n)return e;if(!o)return(0,c.delay)(200).then(function(){return s._validateElement(i,a)});if(r)throw r();return null})},l.prototype._executeFn=function(e){if(this.counterMode)return u.prototype._executeFn.call(this,e);var t=new Date,n=null,r=null;return this._validateElement(e,t).catch(function(e){n=e}).then(function(e){if(n)throw n;r=e}).then(function(){return r})},l}(i.default);e.default=a,t.exports=e.default},"node-snapshots.js":function(e,t,n){e.__esModule=!0,e.ElementSnapshot=e.NodeSnapshot=void 0;var r=n("../../../deps/testcafe-core"),o=n("../../../../../client-functions/selectors/snapshot-properties");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a={textContent:function(e){return e.textContent},childNodeCount:function(e){return e.childNodes.length},hasChildNodes:function(e){return!!a.childNodeCount(e)},childElementCount:function(e){var t=e.children;if(t)return t.length;for(var n=0,r=e.childNodes.length,o=0;o<r;o++)1===e.childNodes[o].nodeType&&n++;return n},hasChildElements:function(e){return!!a.childElementCount(e)}},s=e.NodeSnapshot=function(){function t(e){i(this,t),this._initializeProperties(e,o.NODE_SNAPSHOT_PROPERTIES,a)}return t.prototype._initializeProperties=function(e,t,n){for(var r=0;r<t.length;r++){var o=t[r],i=n[o];this[o]=i?i(e):e[o]}},t}(),u={tagName:function(e){return e.tagName.toLowerCase()},visible:r.positionUtils.isElementVisible,focused:function(e){return r.domUtils.getActiveElement()===e},attributes:function(e){for(var t=e.attributes,n={},r=t.length-1;0<=r;r--)n[t[r].name]=t[r].value;return n},boundingClientRect:function(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width,height:t.height}},classNames:function(e){var t=e.className;return(t="string"==typeof t.animVal?t.animVal:t).replace(/^\s+|\s+$/g,"").split(/\s+/g)},style:function(e){for(var t={},n=window.getComputedStyle(e),r=0;r<n.length;r++){var o=n[r];t[o]=n[o]}return t},innerText:function(e){return e.innerText}};e.ElementSnapshot=function(n){function r(e){i(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e));return t._initializeProperties(e,o.ELEMENT_SNAPSHOT_PROPERTIES,u),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(s)}}},"execute-action.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n,r){return new m(e,t,n,r).execute()};var i=n("../deps/hammerhead"),r=n("../deps/testcafe-core"),a=n("../deps/testcafe-automation"),s=o(n("../status")),u=o(n("../utils/run-with-barriers")),l=n("../utils/ensure-elements"),c=n("../../../errors/test-run"),d=o(n("../../../test-run/commands/type"));function o(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!r.domUtils.isContentEditableElement(e))throw new c.ActionElementNonContentEditableError(t)}var m=function(){function o(e,t,n,r){!function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.command=e,this.globalSelectorTimeout=t,this.statusBar=n,this.testSpeed=r,this.elements=[],this.ensureElementsPromise=null,this.ensureElementsStartTime=null,this.executionStartTime=null,this.executionStartedHandler=null,this.commandSelectorTimeout=null}return o.prototype._getSpecificTimeout=function(){return this.command.selector&&"number"==typeof this.command.selector.timeout?this.command.selector.timeout:this.globalSelectorTimeout},o.prototype._delayAfterExecution=function(){return this.command.options&&1!==this.command.options.speed?(0,r.delay)(2e3*(1-this.command.options.speed)):i.Promise.resolve()},o.prototype._isExecutionTimeoutExpired=function(){return Date.now()-this.executionStartTime>=this.commandSelectorTimeout},o.prototype._ensureCommandArguments=function(){if(this.command.type===d.default.pressKey&&(0,r.parseKeySequence)(this.command.keys).error)throw new c.ActionIncorrectKeysError("keys")},o.prototype._ensureCommandElements=function(){var t=this,e=[];return this.command.selector&&e.push((0,l.createElementDescriptor)(this.command.selector)),this.command.type===d.default.dragToElement?e.push((0,l.createAdditionalElementDescriptor)(this.command.destinationSelector,"destinationSelector")):this.command.type===d.default.selectEditableContent&&(e.push((0,l.createAdditionalElementDescriptor)(this.command.startSelector,"startSelector")),e.push((0,l.createAdditionalElementDescriptor)(this.command.endSelector||this.command.startSelector,"endSelector"))),(0,l.ensureElements)(e,this.globalSelectorTimeout).then(function(e){t.elements=e})},o.prototype._ensureCommandElementsProperties=function(){this.command.type===d.default.selectText?function(e){if(!r.domUtils.isEditableElement(e))throw new c.ActionElementNonEditableError}(this.elements[0]):this.command.type===d.default.selectTextAreaContent?function(e){if(!r.domUtils.isTextAreaElement(e))throw new c.ActionElementNotTextAreaError}(this.elements[0]):this.command.type===d.default.selectEditableContent?(f(this.elements[0],"startSelector"),f(this.elements[1],"endSelector"),function(e){if(!r.contentEditable.getNearestCommonAncestor(e[0],e[1]))throw new c.ActionRootContainerNotFoundError}(this.elements)):this.command.type!==d.default.setFilesToUpload&&this.command.type!==d.default.clearUpload||function(e){if(!r.domUtils.isFileInput(e))throw new c.ActionElementIsNotFileInputError}(this.elements[0])},o.prototype._ensureCommandOptions=function(){var e,t,n,r,o;this.elements.length&&this.command.options&&"offsetX"in this.command.options&&"offsetY"in this.command.options&&(e=this.elements[0],t=this.command.options,r=(n=(0,a.getOffsetOptions)(e,t.offsetX,t.offsetY)).offsetX,o=n.offsetY,t.offsetX=r,t.offsetY=o)},o.prototype._createAutomation=function(){var e=null;switch(this.command.type){case d.default.click:return/option|optgroup/.test(r.domUtils.getTagName(this.elements[0]))?new a.SelectChildClick(this.elements[0],this.command.options):new a.Click(this.elements[0],this.command.options);case d.default.rightClick:return new a.RClick(this.elements[0],this.command.options);case d.default.doubleClick:return new a.DblClick(this.elements[0],this.command.options);case d.default.hover:return new a.Hover(this.elements[0],this.command.options);case d.default.drag:return new a.DragToOffset(this.elements[0],this.command.dragOffsetX,this.command.dragOffsetY,this.command.options);case d.default.dragToElement:return new a.DragToElement(this.elements[0],this.elements[1],this.command.options);case d.default.typeText:return new a.Type(this.elements[0],this.command.text,this.command.options);case d.default.selectText:case d.default.selectTextAreaContent:return e=(0,a.calculateSelectTextArguments)(this.elements[0],this.command),new a.SelectText(this.elements[0],e.startPos,e.endPos,this.command.options);case d.default.selectEditableContent:return new a.SelectEditableContent(this.elements[0],this.elements[1],this.command.options);case d.default.pressKey:return new a.Press((0,r.parseKeySequence)(this.command.keys).combinations,this.command.options);case d.default.setFilesToUpload:return new a.Upload(this.elements[0],this.command.filePath,function(e){return new c.ActionCanNotFindFileToUploadError(e)});case d.default.clearUpload:return new a.Upload(this.elements[0])}return null},o.prototype._runAction=function(t){var n=this;return this._ensureCommandElements().then(function(){return n._ensureCommandElementsProperties()}).then(function(){n._ensureCommandOptions();var e=n._createAutomation();return e.TARGET_ELEMENT_FOUND_EVENT?e.on(e.TARGET_ELEMENT_FOUND_EVENT,function(){n.statusBar.hideWaitingElementStatus(!0),n.executionStartedHandler()}):(n.statusBar.hideWaitingElementStatus(!0),n.executionStartedHandler()),e.run(t)})},o.prototype._runRecursively=function(){var t=this,e=!1,n=!0;return r.promiseUtils.whilst(function(){return!e},function(){return t._runAction(n).then(function(){e=!0}).catch(function(e){if(t._isExecutionTimeoutExpired()){if(e.message===a.ERROR_TYPES.foundElementIsNotTarget)return n=!1,i.Promise.resolve();throw e.message===a.ERROR_TYPES.elementIsInvisibleError?new c.ActionElementIsInvisibleError:e}return(0,r.delay)(250)})})},o.prototype.execute=function(){var o=this;return this.command.options&&!this.command.options.speed&&(this.command.options.speed=this.testSpeed),{startPromise:new i.Promise(function(e){o.executionStartedHandler=e}),completionPromise:new i.Promise(function(t){o.executionStartTime=new Date;try{o._ensureCommandArguments()}catch(e){return void t(new s.default({isCommandResult:!0,executionError:e}))}o.commandSelectorTimeout=o._getSpecificTimeout(),o.statusBar.showWaitingElementStatus(o.commandSelectorTimeout);var e=(0,u.default)(function(){return o._runRecursively()}),n=e.actionPromise,r=e.barriersPromise;n.then(function(){return i.Promise.all([o._delayAfterExecution(),r])}).then(function(){return t(new s.default({isCommandResult:!0}))}).catch(function(e){return o.statusBar.hideWaitingElementStatus(!1).then(function(){return t(new s.default({isCommandResult:!0,executionError:e}))})})})}},o}();t.exports=e.default},"execute-navigate-to.js":function(e,t,n){e.__esModule=!0,e.default=function(e){var t=new u;return r.default.navigateTo(e.url),s.all([t.wait(),l.wait()]).then(function(){return new i.default({isCommandResult:!0})}).catch(function(e){return new i.default({isCommandResult:!0,executionError:e})})};var r=a(n("../deps/hammerhead")),o=a(n("../deps/testcafe-core")),i=a(n("../status"));function a(e){return e&&e.__esModule?e:{default:e}}var s=r.default.Promise,u=o.default.RequestBarrier,l=o.default.pageUnloadBarrier;t.exports=e.default},"execute-selector.js":function(e,t,n){e.__esModule=!0,e.getResult=function(e,t,n,r,o,i){var a=new s.default(e,t,n,r,o);return i.showWaitingElementStatus(a.timeout),a.getResult().then(function(e){return i.hideWaitingElementStatus(!!e).then(function(){return e})}).catch(function(e){return i.hideWaitingElementStatus(!1).then(function(){throw e})})},e.getResultDriverStatus=function(e,t,n,r,o,i){var a=new s.default(e,t,n,r,o);return i.showWaitingElementStatus(a.timeout),a.getResultDriverStatus().then(function(e){return i.hideWaitingElementStatus(!!e.result).then(function(){return e})})};var r,s=(r=n("./client-functions/selector-executor"))&&r.__esModule?r:{default:r}}},deps:{"hammerhead.js":function(e,t,n){e.__esModule=!0,e.default=window["%hammerhead%"],t.exports=e.default},"testcafe-automation.js":function(e,t,n){e.__esModule=!0,e.default=window["%testCafeAutomation%"],t.exports=e.default},"testcafe-core.js":function(e,t,n){e.__esModule=!0,e.default=window["%testCafeCore%"],t.exports=e.default},"testcafe-ui.js":function(e,t,n){e.__esModule=!0,e.default=window["%testCafeUI%"],t.exports=e.default}},"driver-link":{"child.js":function(e,t,n){e.__esModule=!0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n("../deps/hammerhead"),i=n("../deps/testcafe-core"),a=n("../../../errors/test-run"),s=c(n("./send-message-to-driver")),u=n("./messages"),l=c(n("../status"));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(){function n(e,t){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.driverWindow=e,this.driverIframe=i.domUtils.findIframeByWindow(e),this.driverId=t,this.iframeAvailabilityTimeout=0}return n.prototype._ensureIframe=function(){var e=this;return i.domUtils.isElementInDocument(this.driverIframe)?(0,i.waitFor)(function(){return i.positionUtils.isElementVisible(e.driverIframe)?e.driverIframe:null},200,this.iframeAvailabilityTimeout).catch(function(){throw new a.CurrentIframeIsInvisibleError}):o.Promise.reject(new a.CurrentIframeNotFoundError)},n.prototype._waitForIframeRemovedOrHidden=function(){var t=this;return new o.Promise(function(e){t.checkIframeInterval=o.nativeMethods.setInterval.call(window,function(){t._ensureIframe().catch(function(){return(0,i.delay)(500).then(function(){return e(new l.default({isCommandResult:!0}))})})},1e3)})},n.prototype._waitForCommandResult=function(){var t=this,n=null;return o.Promise.race([this._waitForIframeRemovedOrHidden(),new o.Promise(function(t){n=function(e){e.message.type===u.TYPE.commandExecuted&&t(e.message.driverStatus)},o.eventSandbox.message.on(o.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,n)})]).then(function(e){return o.eventSandbox.message.off(o.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,n),o.nativeMethods.clearInterval.call(window,t.checkIframeInterval),e})},n.prototype.confirmConnectionEstablished=function(e){var t=new u.ConfirmationMessage(e,{id:this.driverId});o.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},n.prototype.executeCommand=function(t,n){var r=this;return this._ensureIframe().then(function(){var e=new u.ExecuteCommandMessage(t,n);return o.Promise.all([(0,s.default)(e,r.driverWindow,r.iframeAvailabilityTimeout,a.CurrentIframeIsNotLoadedError),r._waitForCommandResult()])}).then(function(e){return e[1]})},r(n,[{key:"availabilityTimeout",set:function(e){this.iframeAvailabilityTimeout=e}}]),n}();e.default=d,t.exports=e.default},"messages.js":function(e,t,n){e.__esModule=!0,e.SetNativeDialogHandlerMessage=e.ConfirmationMessage=e.ExecuteCommandMessage=e.CommandExecutedMessage=e.EstablishConnectionMessage=e.TYPE=void 0;var r,o=(r=n("../generate-id"))&&r.__esModule?r:{default:r};function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=e.TYPE={establishConnection:"driver|establish-connection",commandExecuted:"driver|command-executed",executeCommand:"driver|execute-command",confirmation:"driver|confirmation",setNativeDialogHandler:"driver|set-native-dialog-handler"},l=function e(t){s(this,e),this.type=t,this.id=(0,o.default)()};e.EstablishConnectionMessage=function(e){function t(){return s(this,t),i(this,e.call(this,u.establishConnection))}return a(t,e),t}(l),e.CommandExecutedMessage=function(n){function r(e){s(this,r);var t=i(this,n.call(this,u.commandExecuted));return t.driverStatus=e,t}return a(r,n),r}(l),e.ExecuteCommandMessage=function(r){function o(e,t){s(this,o);var n=i(this,r.call(this,u.executeCommand));return n.command=e,n.testSpeed=t,n}return a(o,r),o}(l),e.ConfirmationMessage=function(r){function o(e,t){s(this,o);var n=i(this,r.call(this,u.confirmation));return n.requestMessageId=e,n.result=t,n}return a(o,r),o}(l),e.SetNativeDialogHandlerMessage=function(n){function r(e){s(this,r);var t=i(this,n.call(this,u.setNativeDialogHandler));return t.dialogHandler=e,t}return a(r,n),r}(l)},"parent.js":function(e,t,n){e.__esModule=!0;var r,o=n("../deps/hammerhead"),i=n("./messages"),a=n("../../../errors/test-run"),s=(r=n("./send-message-to-driver"))&&r.__esModule?r:{default:r},u=function(){function n(e){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.driverWindow=e}return n.prototype.establishConnection=function(){var e=new i.EstablishConnectionMessage;return(0,s.default)(e,this.driverWindow,5e3,a.CurrentIframeIsNotLoadedError).then(function(e){return e.result.id})},n.prototype.confirmMessageReceived=function(e){var t=new i.ConfirmationMessage(e);o.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},n.prototype.onCommandExecuted=function(e){var t=new i.CommandExecutedMessage(e);o.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},n}();e.default=u,t.exports=e.default},"send-message-to-driver.js":function(e,t,n){e.__esModule=!0,e.default=function(n,e,t,r){var o=null,i=null;return t=Math.max(t||0,l),a.Promise.race([(0,s.delay)(t),new a.Promise(function(t){i=function(e){e.message.type===u.TYPE.confirmation&&e.message.requestMessageId===n.id&&t(e.message)},a.eventSandbox.message.on(a.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,i),o=a.nativeMethods.setInterval.call(window,function(){return a.eventSandbox.message.sendServiceMsg(n,e)},c),a.eventSandbox.message.sendServiceMsg(n,e)})]).then(function(e){if(a.nativeMethods.clearInterval.call(window,o),a.nativeMethods.clearTimeout.call(window,null),a.eventSandbox.message.off(a.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,i),!e)throw new r;return e})};var a=n("../deps/hammerhead"),s=n("../deps/testcafe-core"),u=n("./messages"),l=2500,c=1e3;t.exports=e.default}},"driver.js":function(e,t,n){e.__esModule=!0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=i(n("./deps/hammerhead")),s=n("./deps/testcafe-core"),o=n("./deps/testcafe-ui"),u=i(n("../../test-run/client-messages")),l=i(n("../../test-run/commands/type")),c=n("../../test-run/commands/utils"),d=n("../../errors/test-run"),f=i(n("../../test-run/browser-console-messages")),m=i(n("./native-dialog-tracker")),h=n("./driver-link/messages"),p=i(n("./storage")),g=i(n("./status")),E=i(n("./generate-id")),y=i(n("./driver-link/child")),v=i(n("./command-executors/execute-action")),w=i(n("./command-executors/browser-manipulation")),_=i(n("./command-executors/execute-navigate-to")),S=n("./command-executors/execute-selector"),b=i(n("./command-executors/client-functions/client-function-executor"));function i(e){return e&&e.__esModule?e:{default:e}}var I=a.default.transport,C=a.default.Promise,T=a.default.eventSandbox.message,x=a.default.storages,A="testcafe|driver|test-done-sent-flag",N="testcafe|driver|pending-status",M="testcafe|driver|executing-client-function-descriptor",O="testcafe|driver|selector-execution-start-time",D="testcafe|driver|pending-page-error",R="testcafe|driver|active-iframe-selector",P="testcafe|driver|test-speed",F="testcafe|driver|assertion-retries-timeout",k="testcafe|driver|assertion-retries-start-time",U="testcafe|driver|console-messages",j={NotLoadedError:d.ActionIframeIsNotLoadedError,NotFoundError:d.ActionElementNotFoundError,IsInvisibleError:d.ActionElementIsInvisibleError},H={NotLoadedError:d.CurrentIframeIsNotLoadedError,NotFoundError:d.CurrentIframeNotFoundError,IsInvisibleError:d.CurrentIframeIsInvisibleError},L=function(){function i(e,t,n,r){var o=this;!function(e,t){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.COMMAND_EXECUTING_FLAG="testcafe|driver|command-executing-flag",this.EXECUTING_IN_IFRAME_FLAG="testcafe|driver|executing-in-iframe-flag",this.testRunId=e,this.heartbeatUrl=t.heartbeat,this.browserStatusUrl=t.status,this.browserStatusDoneUrl=t.statusDone,this.userAgent=n.userAgent,this.fixtureName=n.fixtureName,this.testName=n.testName,this.selectorTimeout=r.selectorTimeout,this.pageLoadTimeout=r.pageLoadTimeout,this.initialSpeed=r.speed,this.skipJsErrors=r.skipJsErrors,this.dialogHandler=r.dialogHandler,this.customCommandHandlers={},this.contextStorage=null,this.nativeDialogsTracker=null,this.childDriverLinks=[],this.activeChildDriverLink=null,this.statusBar=null,this.pageInitialRequestBarrier=new s.RequestBarrier,this.readyPromise=s.eventUtils.documentReady(this.pageLoadTimeout).then(function(){return o.pageInitialRequestBarrier.wait(!0)}),this._initChildDriverListening(),s.pageUnloadBarrier.init(),(0,s.preventRealEvents)(),a.default.on(a.default.EVENTS.uncaughtJsError,function(e){return o._onJsError(e)}),a.default.on(a.default.EVENTS.unhandledRejection,function(e){return o._onJsError(e)}),a.default.on(a.default.EVENTS.consoleMethCalled,function(e){return o._onConsoleMessage(e)})}return i.prototype._onJsError=function(e){if(this.skipJsErrors||this.contextStorage.getItem(A))return C.resolve();var t=new d.UncaughtErrorOnPage(e.msg||e.message,e.pageUrl);return this.contextStorage.getItem(D)||this.contextStorage.setItem(D,t),null},i.prototype._failIfClientCodeExecutionIsInterrupted=function(){var e=this.contextStorage.getItem(M);return!!e&&(this._onReady(new g.default({isCommandResult:!0,executionError:new d.ClientFunctionExecutionInterruptionError(e.instantiationCallsiteName)})),!0)},i.prototype._onConsoleMessage=function(e){var t=e.meth,n=e.line,r=this.consoleMessages;r.addMessage(t,n),this.consoleMessages=r},i.prototype._addPendingErrorToStatus=function(e){var t=this.contextStorage.getItem(D);t&&(this.contextStorage.setItem(D,null),e.pageError=t)},i.prototype._addUnexpectedDialogErrorToStatus=function(e){var t=this.nativeDialogsTracker.getUnexpectedDialogError();e.pageError=e.pageError||t},i.prototype._addConsoleMessagesToStatus=function(e){e.consoleMessages=this.consoleMessages,this.consoleMessages=null},i.prototype._sendStatus=function(e){var t=this;e.resent||(this._addPendingErrorToStatus(e),this._addUnexpectedDialogErrorToStatus(e),this._addConsoleMessagesToStatus(e)),this.contextStorage.setItem(N,e);var n=null;return s.pageUnloadBarrier.wait(0).then(function(){return I.queuedAsyncServiceMsg({cmd:u.default.ready,status:e,disableResending:!0})}).then(function(e){return n=e,s.pageUnloadBarrier.wait(0)}).then(function(){return t.contextStorage.setItem(N,null),n})},i.prototype._initChildDriverListening=function(){var i=this;T.on(T.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message,n=e.source;if(t.type===h.TYPE.establishConnection){var r=i._getChildDriverLinkByWindow(n);if(!r){var o=i.testRunId+"-"+(0,E.default)();r=new y.default(n,o),i.childDriverLinks.push(r)}r.confirmConnectionEstablished(t.id)}})},i.prototype._getChildDriverLinkByWindow=function(t){return this.childDriverLinks.filter(function(e){return e.driverWindow===t})[0]},i.prototype._runInActiveIframe=function(e){var t=this,n=C.resolve(),r=this.contextStorage.getItem(R);!this.activeChildDriverLink&&r&&(n=this._switchToIframe(r,H)),n.then(function(){return t.contextStorage.setItem(t.EXECUTING_IN_IFRAME_FLAG,!0),t.activeChildDriverLink.executeCommand(e,t.speed)}).then(function(e){return t._onCommandExecutedInIframe(e)}).catch(function(e){return t._onCommandExecutedInIframe(new g.default({isCommandResult:!0,executionError:e}))})},i.prototype._onCommandExecutedInIframe=function(e){this.contextStorage.setItem(this.EXECUTING_IN_IFRAME_FLAG,!1),this._onReady(e)},i.prototype._ensureChildDriverLink=function(e,t,n){var r=this;return(0,s.waitFor)(function(){return r._getChildDriverLinkByWindow(e)},500,n).catch(function(){throw new t})},i.prototype._switchToIframe=function(t,n){var r=this,o="number"==typeof t.timeout?t.timeout:this.selectorTimeout;return(0,S.getResult)(t,o,null,function(){return new n.NotFoundError},function(){return n.IsInvisibleError()},this.statusBar).then(function(e){if(!s.domUtils.isIframeElement(e))throw new d.ActionElementNotIframeError;return r._ensureChildDriverLink(e.contentWindow,n.NotLoadedError,o)}).then(function(e){e.availabilityTimeout=o,r.activeChildDriverLink=e,r.contextStorage.setItem(R,t)})},i.prototype._switchToMainWindow=function(e){this.activeChildDriverLink&&this.activeChildDriverLink.executeCommand(e),this.contextStorage.setItem(R,null),this.activeChildDriverLink=null},i.prototype._setNativeDialogHandlerInIframes=function(e){for(var t=new h.SetNativeDialogHandlerMessage(e),n=0;n<this.childDriverLinks.length;n++)T.sendServiceMsg(t,this.childDriverLinks[n].driverWindow)},i.prototype._onActionCommand=function(e){var t=this,n=(0,v.default)(e,this.selectorTimeout,this.statusBar,this.speed),r=n.startPromise,o=n.completionPromise;r.then(function(){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!0)}),o.then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},i.prototype._onSetNativeDialogHandlerCommand=function(e){this.nativeDialogsTracker.setHandler(e.dialogHandler),this._setNativeDialogHandlerInIframes(e.dialogHandler),this._onReady(new g.default({isCommandResult:!0}))},i.prototype._onGetNativeDialogHistoryCommand=function(){this._onReady(new g.default({isCommandResult:!0,result:this.nativeDialogsTracker.appearedDialogs}))},i.prototype._onGetBrowserConsoleMessagesCommand=function(){this._onReady(new g.default({isCommandResult:!0}))},i.prototype._onNavigateToCommand=function(e){var t=this;this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!0),(0,_.default)(e).then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},i.prototype._onExecuteClientFunctionCommand=function(e){var t=this;this.contextStorage.setItem(M,{instantiationCallsiteName:e.instantiationCallsiteName}),new b.default(e).getResultDriverStatus().then(function(e){t.contextStorage.setItem(M,null),t._onReady(e)})},i.prototype._onExecuteSelectorCommand=function(e){var t=this,n=this.contextStorage.getItem(O)||new Date;(0,S.getResultDriverStatus)(e,this.selectorTimeout,n,null,null,this.statusBar).then(function(e){t.contextStorage.setItem(O,null),t._onReady(e)})},i.prototype._onSwitchToMainWindowCommand=function(e){this._switchToMainWindow(e),this._onReady(new g.default({isCommandResult:!0}))},i.prototype._onSwitchToIframeCommand=function(e){var t=this;this._switchToIframe(e.selector,j).then(function(){return t._onReady(new g.default({isCommandResult:!0}))}).catch(function(e){return t._onReady(new g.default({isCommandResult:!0,executionError:e}))})},i.prototype._onBrowserManipulationCommand=function(e){var t=this;this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!0),(0,w.default)(e,this.selectorTimeout,this.statusBar).then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},i.prototype._onSetBreakpointCommand=function(e){var t=this;this.statusBar.showDebuggingStatus(e).then(function(e){return t._onReady(new g.default({isCommandResult:!0,result:e}))})},i.prototype._onSetTestSpeedCommand=function(e){this.speed=e.speed,this._onReady(new g.default({isCommandResult:!0}))},i.prototype._onShowAssertionRetriesStatusCommand=function(e){this.contextStorage.setItem(F,e.timeout),this.contextStorage.setItem(k,Date.now()),this.statusBar.showWaitingAssertionRetriesStatus(e.timeout),this._onReady(new g.default({isCommandResult:!0}))},i.prototype._onHideAssertionRetriesStatusCommand=function(e){var t=this;this.contextStorage.setItem(F,null),this.contextStorage.setItem(k,null),this.statusBar.hideWaitingAssertionRetriesStatus(e.success).then(function(){return t._onReady(new g.default({isCommandResult:!0}))})},i.prototype._checkStatus=function(){var r=this;return s.browser.checkStatus(this.browserStatusDoneUrl,a.default.createNativeXHR,{manualRedirect:!0}).then(function(e){var t=e.command,n=e.redirecting;n&&t.url.indexOf(r.testRunId)<0?(x.clear(),x.lock()):r.contextStorage.setItem(A,!1),n?s.browser.redirect(t):r._onReady({isCommandResult:!1})})},i.prototype._onCustomCommand=function(e){var t=this;(0,this.customCommandHandlers[e.type].handler)(e).then(function(e){t._onReady(new g.default({isCommandResult:!0,result:e}))})},i.prototype._onTestDone=function(e){var t=this;this.contextStorage.setItem(A,!0),this._sendStatus(e).then(function(){return t._checkStatus()})},i.prototype._onBackupStoragesCommand=function(){this._onReady(new g.default({isCommandResult:!0,result:x.backup()}))},i.prototype._onReady=function(e){var t=this;this._sendStatus(e).then(function(e){e?t._onCommand(e):t._onReady(new g.default)})},i.prototype._executeCommand=function(e){this.customCommandHandlers[e.type]?this._onCustomCommand(e):e.type===l.default.testDone?this._onTestDone(new g.default({isCommandResult:!0})):e.type===l.default.setBreakpoint?this._onSetBreakpointCommand(e.isTestError):e.type===l.default.switchToMainWindow?this._onSwitchToMainWindowCommand(e):e.type===l.default.switchToIframe?this._onSwitchToIframeCommand(e):(0,c.isBrowserManipulationCommand)(e)?this._onBrowserManipulationCommand(e):e.type===l.default.executeClientFunction?this._onExecuteClientFunctionCommand(e):e.type===l.default.executeSelector?this._onExecuteSelectorCommand(e):e.type===l.default.navigateTo?this._onNavigateToCommand(e):e.type===l.default.setNativeDialogHandler?this._onSetNativeDialogHandlerCommand(e):e.type===l.default.getNativeDialogHistory?this._onGetNativeDialogHistoryCommand(e):e.type===l.default.getBrowserConsoleMessages?this._onGetBrowserConsoleMessagesCommand(e):e.type===l.default.setTestSpeed?this._onSetTestSpeedCommand(e):e.type===l.default.showAssertionRetriesStatus?this._onShowAssertionRetriesStatusCommand(e):e.type===l.default.hideAssertionRetriesStatus?this._onHideAssertionRetriesStatusCommand(e):e.type===l.default.backupStorages?this._onBackupStoragesCommand():this._onActionCommand(e)},i.prototype._isExecutableInTopWindowOnly=function(e){if((0,c.isExecutableInTopWindowOnly)(e))return!0;var t=this.customCommandHandlers[e.type];return t&&t.isExecutableInTopWindowOnly},i.prototype._onCommand=function(n){var r=this;this.readyPromise.then(function(){var e=(0,c.isCommandRejectableByPageError)(n);if(r.contextStorage.getItem(D)&&e)r._onReady(new g.default({isCommandResult:!0}));else{var t=r.activeChildDriverLink||r.contextStorage.getItem(R);r._isExecutableInTopWindowOnly(n)||!t?r._executeCommand(n):r._runInActiveIframe(n)}})},i.prototype.setCustomCommandHandlers=function(e,t,n){this.customCommandHandlers[e]={isExecutableInTopWindowOnly:n,handler:t}},i.prototype.start=function(){var n=this;this.contextStorage=new p.default(window,this.testRunId),this.nativeDialogsTracker=new m.default(this.contextStorage,this.dialogHandler),this.speed||(this.speed=this.initialSpeed),s.browser.startHeartbeat(this.heartbeatUrl,a.default.createNativeXHR),this.statusBar=new o.StatusBar(this.userAgent,this.fixtureName,this.testName),this.statusBar.on(this.statusBar.UNLOCK_PAGE_BTN_CLICK,s.disableRealEventsPreventing),this.readyPromise.then(function(){n.statusBar.hidePageLoadingStatus();var e=n.contextStorage.getItem(F);if(e){var t=n.contextStorage.getItem(k);0<e-(new Date-t)&&n.statusBar.showWaitingAssertionRetriesStatus(e,t)}});var e=this.contextStorage.getItem(N);if(e&&(e.resent=!0),this.contextStorage.getItem(A))e?this._onTestDone(e):this._checkStatus();else if(!this._failIfClientCodeExecutionIsInterrupted()){var t=this.contextStorage.getItem(this.COMMAND_EXECUTING_FLAG)||this.contextStorage.getItem(this.EXECUTING_IN_IFRAME_FLAG),r=e||new g.default({isCommandResult:t});this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!1),this.contextStorage.setItem(this.EXECUTING_IN_IFRAME_FLAG,!1),this._onReady(r)}},r(i,[{key:"speed",set:function(e){this.contextStorage.setItem(P,e)},get:function(){return this.contextStorage.getItem(P)}},{key:"consoleMessages",get:function(){return new f.default(this.contextStorage.getItem(U))},set:function(e){return this.contextStorage.setItem(U,e?e.getCopy():null)}}]),i}();e.default=L,t.exports=e.default},"embedding-utils.js":function(e,t,n){e.__esModule=!0;var r=n("./command-executors/client-functions/selector-executor/node-snapshots");e.default={NodeSnapshot:r.NodeSnapshot,ElementSnapshot:r.ElementSnapshot},t.exports=e.default},"generate-id.js":function(e,t,n){e.__esModule=!0,e.default=function(){return"function"==typeof r.nativeMethods.performanceNow?r.nativeMethods.performanceNow().toString():(r.nativeMethods.dateNow()+Math.random()).toString()};var r=n("./deps/hammerhead");t.exports=e.default},"iframe-driver.js":function(e,t,n){e.__esModule=!0;var i=n("./deps/hammerhead"),a=n("./deps/testcafe-core"),s=n("./deps/testcafe-ui"),r=o(n("./driver")),u=o(n("./storage")),l=o(n("./status")),c=o(n("./driver-link/parent")),d=n("./driver-link/messages"),f=o(n("./native-dialog-tracker/iframe"));function o(e){return e&&e.__esModule?e:{default:e}}var m=function(r){function o(e,t){!function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,{},{},t));return n.lastParentDriverMessageId=null,n.parentDriverLink=new c.default(window.parent),n._initParentDriverListening(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,r),o.prototype._onJsError=function(){},o.prototype._onConsoleMessage=function(){},o.prototype._initParentDriverListening=function(){var n=this;i.eventSandbox.message.on(i.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message;a.pageUnloadBarrier.wait(0).then(function(){if(t.type===d.TYPE.executeCommand){if(n.lastParentDriverMessageId===t.id)return;n.lastParentDriverMessageId=t.id,n.readyPromise.then(function(){n.speed=t.testSpeed,n.parentDriverLink.confirmMessageReceived(t.id),n._onCommand(t.command)})}t.type===d.TYPE.setNativeDialogHandler&&(n.nativeDialogsTracker.setHandler(t.dialogHandler),n._setNativeDialogHandlerInIframes(t.dialogHandler))})})},o.prototype._onSwitchToMainWindowCommand=function(e){this._switchToMainWindow(e)},o.prototype._onReady=function(e){this.parentDriverLink.onCommandExecuted(e)},o.prototype.start=function(){var t=this;this.nativeDialogsTracker=new f.default(this.dialogHandler),this.statusBar=new s.IframeStatusBar;var e=this.parentDriverLink.establishConnection().then(function(e){t.contextStorage=new u.default(window,e),t._failIfClientCodeExecutionIsInterrupted()||(t.contextStorage.getItem(t.COMMAND_EXECUTING_FLAG)||t.contextStorage.getItem(t.EXECUTING_IN_IFRAME_FLAG))&&(t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t.contextStorage.setItem(t.EXECUTING_IN_IFRAME_FLAG,!1),t._onReady(new l.default({isCommandResult:!0})))});this.readyPromise=i.Promise.all([this.readyPromise,e])},o}(r.default);e.default=m,t.exports=e.default},"index.js":function(e,t,n){var r=u(n("./deps/hammerhead")),o=u(n("./driver")),i=u(n("./iframe-driver")),a=u(n("./script-execution-barrier")),s=u(n("./embedding-utils"));function u(e){return e&&e.__esModule?e:{default:e}}r.default.nativeMethods.objectDefineProperty.call(window,window,"%testCafeDriver%",{configurable:!0,value:o.default}),r.default.nativeMethods.objectDefineProperty.call(window,window,"%testCafeIframeDriver%",{configurable:!0,value:i.default}),r.default.nativeMethods.objectDefineProperty.call(window,window,"%ScriptExecutionBarrier%",{configurable:!0,value:a.default}),r.default.nativeMethods.objectDefineProperty.call(window,window,"%testCafeEmbeddingUtils%",{configurable:!0,value:s.default}),r.default.on(r.default.EVENTS.evalIframeScript,function(e){return initTestCafeClientDrivers(e.iframe.contentWindow,!0)})},"native-dialog-tracker":{"iframe.js":function(e,t,n){e.__esModule=!0;var r=a(n("../deps/hammerhead")),o=a(n("./messages")),i=a(n("./index"));function a(e){return e&&e.__esModule?e:{default:e}}var s=r.default.eventSandbox.message,u=function(t){function n(e){return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this,null,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype._defaultDialogHandler=function(e){s.sendServiceMsg({type:o.default.unexpectedDialog,dialogType:e,url:i.default._getPageUrl()},window.top)},n.prototype._addAppearedDialogs=function(e,t){s.sendServiceMsg({type:o.default.appearedDialog,dialogType:e,text:t,url:i.default._getPageUrl()},window.top)},n.prototype._onHandlerError=function(e,t){s.sendServiceMsg({type:o.default.handlerError,dialogType:e,message:t,url:i.default._getPageUrl()},window.top)},n}(i.default);e.default=u,t.exports=e.default},"index.js":function(e,t,n){e.__esModule=!0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=a(n("../deps/hammerhead")),i=n("../../../errors/test-run"),s=a(n("../command-executors/client-functions/client-function-executor")),u=a(n("./messages"));function a(e){return e&&e.__esModule?e:{default:e}}var l=o.default.eventSandbox.message,c=o.default.processScript,d=o.default.nativeMethods,f="testcafe|native-dialog-tracker|appeared-dialogs",m="testcafe|native-dialog-tracker|unexpected-dialog",h="testcafe|native-dialog-tracker|error-in-handler",p=c("window.location.href"),g=function(){function a(e,t){!function(e,t){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.contextStorage=e,this.dialogHandler=t,this._init(),this._initListening(),this.dialogHandler&&this.setHandler(t)}return a._getPageUrl=function(){return d.eval(p)},a.prototype._initListening=function(){var n=this;l.on(l.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message;t.type===u.default.appearedDialog?n._addAppearedDialogs(t.dialogType,t.text,t.url):t.type!==u.default.unexpectedDialog||n.unexpectedDialog?t.type!==u.default.handlerError||n.handlerError||n._onHandlerError(t.dialogType,t.message,t.url):n.unexpectedDialog={type:t.dialogType,url:t.url}})},a.prototype._init=function(){var t=this;o.default.on(o.default.EVENTS.beforeUnload,function(e){e.prevented&&!e.isFakeIEEvent&&(t.dialogHandler?t._createDialogHandler("beforeunload")(e.returnValue||""):t._defaultDialogHandler("beforeunload")),t.contextStorage&&t.contextStorage.save()}),window.alert=function(){return t._defaultDialogHandler("alert")},window.confirm=function(){return t._defaultDialogHandler("confirm")},window.prompt=function(){return t._defaultDialogHandler("prompt")}},a.prototype._createDialogHandler=function(o){var i=this;return function(e){var t=a._getPageUrl();i._addAppearedDialogs(o,e,t);var n=new s.default(i.dialogHandler),r=null;try{r=n.fn.apply(window,[o,e,t])}catch(e){i._onHandlerError(o,e.message||String(e),t)}return r}},a.prototype._defaultDialogHandler=function(e){var t=a._getPageUrl();this.unexpectedDialog=this.unexpectedDialog||{type:e,url:t}},a.prototype._addAppearedDialogs=function(e,t,n){this.appearedDialogs.splice(0,0,{type:e,text:t,url:n})},a.prototype._onHandlerError=function(e,t,n){this.handlerError=this.handlerError||{type:e,message:t,url:n}},a.prototype.setHandler=function(e){var t=this;this.dialogHandler=e,["alert","confirm","prompt"].forEach(function(e){window[e]=t.dialogHandler?t._createDialogHandler(e):function(){return t._defaultDialogHandler(e)}})},a.prototype.getUnexpectedDialogError=function(){var e=this.unexpectedDialog,t=this.handlerError;return this.unexpectedDialog=null,this.handlerError=null,e?new i.NativeDialogNotHandledError(e.type,e.url):t?new i.UncaughtErrorInNativeDialogHandler(t.type,t.message,t.url):null},r(a,[{key:"appearedDialogs",get:function(){var e=this.contextStorage.getItem(f);return e||(e=[],this.appearedDialogs=e),e},set:function(e){this.contextStorage.setItem(f,e)}},{key:"unexpectedDialog",get:function(){return this.contextStorage.getItem(m)},set:function(e){this.contextStorage.setItem(m,e)}},{key:"handlerError",get:function(){return this.contextStorage.getItem(h)},set:function(e){this.contextStorage.setItem(h,e)}}]),a}();e.default=g,t.exports=e.default},"messages.js":function(e,t,n){e.__esModule=!0,e.default={appearedDialog:"appeared-dialog",unexpectedDialog:"unexpected-dialog",handlerError:"handler-error"},t.exports=e.default}},"script-execution-barrier.js":function(e,t,n){e.__esModule=!0;var r,o=(r=n("./deps/hammerhead"))&&r.__esModule?r:{default:r},i=n("./deps/testcafe-core"),a=o.default.Promise,s=o.default.nativeMethods,u=function(){function n(){var t=this;!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.watchdog=null,this.SCRIPT_LOADING_TIMEOUT=2e3,this.BARRIER_TIMEOUT=3e3,this.scriptsCount=0,this.resolveWaitingPromise=null,this.scriptElementAddedHandler=function(e){return t._onScriptElementAdded(e.el)},o.default.on(o.default.EVENTS.scriptElementAdded,this.scriptElementAddedHandler)}return n.prototype._onScriptElementAdded=function(t){var n=this,e=s.scriptSrcGetter.call(t);if(void 0!==e&&""!==e){this.scriptsCount++;var r=null,o=function e(){s.removeEventListener.call(t,"load",e),s.removeEventListener.call(t,"error",e),s.clearTimeout.call(window,r),n._onScriptLoadedOrFailed()};s.addEventListener.call(t,"load",o),s.addEventListener.call(t,"error",o),r=s.setTimeout.call(window,o,this.SCRIPT_LOADING_TIMEOUT)}},n.prototype._onScriptLoadedOrFailed=function(){var e=this;this.scriptsCount--,this.scriptsCount||(0,i.delay)(25).then(function(){e.resolveWaitingPromise&&(e.scriptsCount||e.resolveWaitingPromise())})},n.prototype.wait=function(){var n=this;return new a(function(e){var t=function(){s.clearTimeout.call(window,n.watchdog),o.default.off(o.default.EVENTS.scriptElementAdded,n.scriptElementAddedHandler),n.watchdog=null,n.resolveWaitingPromise=null,e()};n.scriptsCount?(n.watchdog=s.setTimeout.call(window,function(){return t()},n.BARRIER_TIMEOUT),n.resolveWaitingPromise=function(){return t()}):t()})},n}();e.default=u,t.exports=e.default},"status.js":function(e,t,n){e.__esModule=!0;var r=i(n("../../utils/assignable")),o=i(n("./generate-id"));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(n){function r(e){!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e));return t.id=(0,o.default)(),t.isCommandResult=!1,t.executionError=null,t.pageError=null,t.resent=!1,t.result=null,t.consoleMessages=null,t._assignFrom(e,!0),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype._getAssignableProperties=function(){return[{name:"isCommandResult"},{name:"executionError"},{name:"pageError"},{name:"result"},{name:"consoleMessages"}]},r}(r.default);e.default=a,t.exports=e.default},"storage.js":function(e,t,n){e.__esModule=!0;var r,o=(r=n("./deps/hammerhead"))&&r.__esModule?r:{default:r},i=o.default.json,a=o.default.nativeMethods,s=function(){function n(e,t){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.storage=a.winSessionStorageGetter.call(e),this.storageKey="testcafe|driver|"+t,this.data={},this._loadFromStorage()}return n.prototype._loadFromStorage=function(){var e=this.storage.getItem(this.storageKey);e&&(this.data=i.parse(e),this.storage.removeItem(this.storageKey))},n.prototype.save=function(){this.storage.setItem(this.storageKey,i.stringify(this.data))},n.prototype.setItem=function(e,t){this.data[e]=t,this.save()},n.prototype.getItem=function(e){return this.data[e]},n.prototype.dispose=function(){this.storage.removeItem(this.storageKey)},n}();e.default=s,t.exports=e.default},utils:{"ensure-elements.js":function(e,t,n){e.__esModule=!0,e.ensureElements=function(e,t){return new u(e,t).getElements()},e.createElementDescriptor=function(e){return{selector:e,createNotFoundError:function(){return new i.ActionElementNotFoundError},createIsInvisibleError:function(){return new i.ActionElementIsInvisibleError},createHasWrongNodeTypeError:function(e){return new i.ActionSelectorMatchesWrongNodeTypeError(e)}}},e.createAdditionalElementDescriptor=function(e,t){return{selector:e,createNotFoundError:function(){return new i.ActionAdditionalElementNotFoundError(t)},createIsInvisibleError:function(){return new i.ActionAdditionalElementIsInvisibleError(t)},createHasWrongNodeTypeError:function(e){return new i.ActionAdditionalSelectorMatchesWrongNodeTypeError(t,e)}}};var r,o=n("../deps/hammerhead"),a=n("../deps/testcafe-core"),s=(r=n("../command-executors/client-functions/selector-executor"))&&r.__esModule?r:{default:r},i=n("../../../errors/test-run"),u=function(){function r(e,t){var n=this;!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.elements=[],this.globalSelectorTimeout=t,this.ensureElementsPromise=o.Promise.resolve(),this.ensureElementsStartTime=new Date,e.forEach(function(e){return n._ensureElement(e)})}return r.prototype._ensureElement=function(e){var t=this,n=e.selector,r=e.createNotFoundError,o=e.createIsInvisibleError,i=e.createHasWrongNodeTypeError;this.ensureElementsPromise=this.ensureElementsPromise.then(function(){return new s.default(n,t.globalSelectorTimeout,t.ensureElementsStartTime,r,o).getResult()}).then(function(e){if(!a.domUtils.isDomElement(e))throw i(a.NODE_TYPE_DESCRIPTIONS[e.nodeType]);t.elements.push(e)})},r.prototype.getElements=function(){var e=this;return this.ensureElementsPromise.then(function(){return e.elements})},r}()},"run-with-barriers.js":function(e,t,n){e.__esModule=!0,e.default=function(e){var t=new c.RequestBarrier,n=new d.default;c.pageUnloadBarrier.watchForPageNavigationTriggers();for(var r=null,o=arguments.length,i=Array(1<o?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var s=e.apply(void 0,i),u=s.then(function(e){return r=e,l.Promise.all([t.wait().then(function(){return n.wait()}),c.pageUnloadBarrier.wait()])}).then(function(){return r});return{actionPromise:s,barriersPromise:u}};var r,l=n("../deps/hammerhead"),c=n("../deps/testcafe-core"),d=(r=n("../script-execution-barrier"))&&r.__esModule?r:{default:r};t.exports=e.default}}}},"client-functions":{selectors:{"snapshot-properties.js":function(e,t,n){e.__esModule=!0,e.NODE_SNAPSHOT_PROPERTIES=["nodeType","textContent","childNodeCount","hasChildNodes","childElementCount","hasChildElements"],e.ELEMENT_SNAPSHOT_PROPERTIES=["tagName","visible","focused","attributes","boundingClientRect","classNames","style","innerText","namespaceURI","id","value","checked","selected","selectedIndex","scrollWidth","scrollHeight","scrollLeft","scrollTop","offsetWidth","offsetHeight","offsetLeft","offsetTop","clientWidth","clientHeight","clientLeft","clientTop"]}}},errors:{"test-run":{"index.js":function(e,t,n){e.__esModule=!0,e.RequestHookConfigureAPIError=e.SetNativeDialogHandlerCodeWrongTypeError=e.UncaughtErrorInNativeDialogHandler=e.NativeDialogNotHandledError=e.CurrentIframeIsInvisibleError=e.CurrentIframeNotFoundError=e.CurrentIframeIsNotLoadedError=e.ActionIframeIsNotLoadedError=e.ActionElementNotIframeError=e.RoleSwitchInRoleInitializerError=e.InvalidElementScreenshotDimensionsError=e.WindowDimensionsOverflowError=e.ActionInvalidScrollTargetError=e.ActionElementIsNotFileInputError=e.ActionCanNotFindFileToUploadError=e.ActionIncorrectKeysError=e.ActionRootContainerNotFoundError=e.ActionElementNonContentEditableError=e.ActionElementNotTextAreaError=e.ActionElementNonEditableError=e.ActionAdditionalSelectorMatchesWrongNodeTypeError=e.ActionAdditionalElementIsInvisibleError=e.ActionAdditionalElementNotFoundError=e.ActionSelectorMatchesWrongNodeTypeError=e.ActionElementIsInvisibleError=e.ActionElementNotFoundError=e.ActionSelectorError=e.ActionUnsupportedDeviceTypeError=e.SetTestSpeedArgumentError=e.ActionStringArrayElementError=e.ActionStringOrStringArrayArgumentError=e.ActionPositiveIntegerArgumentError=e.ActionRoleArgumentError=e.ActionIntegerArgumentError=e.ActionNullableStringArgumentError=e.ActionStringArgumentError=e.ActionOptionsTypeError=e.ActionSpeedOptionError=e.ActionBooleanOptionError=e.ActionPositiveIntegerOptionError=e.ActionIntegerOptionError=e.AssertionUnawaitedPromiseError=e.AssertionExecutableArgumentError=e.ExternalAssertionLibraryError=e.UncaughtErrorInCustomDOMPropertyCode=e.UncaughtErrorInClientFunctionCode=e.UncaughtNonErrorObjectInTestCode=e.UncaughtErrorInTestCode=e.UncaughtErrorOnPage=e.PageLoadError=e.CantObtainInfoForElementSpecifiedBySelectorError=e.InvalidSelectorResultError=e.DomNodeClientFunctionResultError=e.ClientFunctionExecutionInterruptionError=e.MissingAwaitError=void 0;var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(r=n("./type"))&&r.__esModule?r:{default:r};function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function e(t){l(this,e),this.type=t,this.isTestCafeError=!0,this.callsite=null},c=function(o){function i(e,t,n){l(this,i);var r=s(this,o.call(this,e));return r.optionName=t,r.actualValue=n,r}return u(i,o),i}(i),d=function(o){function i(e,t,n){l(this,i);var r=s(this,o.call(this,e));return r.argumentName=t,r.actualValue=n,r}return u(i,o),i}(i);e.MissingAwaitError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.missingAwaitError));return t.callsite=e,t}return u(r,n),r}(i),e.ClientFunctionExecutionInterruptionError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.clientFunctionExecutionInterruptionError));return t.instantiationCallsiteName=e,t}return u(r,n),r}(i),e.DomNodeClientFunctionResultError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.domNodeClientFunctionResultError));return t.instantiationCallsiteName=e,t}return u(r,n),r}(i),e.InvalidSelectorResultError=function(e){function t(){return l(this,t),s(this,e.call(this,a.default.invalidSelectorResultError))}return u(t,e),t}(i),e.CantObtainInfoForElementSpecifiedBySelectorError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.cantObtainInfoForElementSpecifiedBySelectorError));return t.callsite=e,t}return u(r,n),r}(i),e.PageLoadError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.pageLoadError));return t.errMsg=e,t}return u(r,n),r}(i),e.UncaughtErrorOnPage=function(r){function o(e,t){l(this,o);var n=s(this,r.call(this,a.default.uncaughtErrorOnPage));return n.errMsg=e,n.pageDestUrl=t,n}return u(o,r),o}(i),e.UncaughtErrorInTestCode=function(r){function o(e,t){l(this,o);var n=s(this,r.call(this,a.default.uncaughtErrorInTestCode));return n.errMsg=String(e),n.callsite=t,n}return u(o,r),o}(i),e.UncaughtNonErrorObjectInTestCode=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.uncaughtNonErrorObjectInTestCode));return t.objType=void 0===e?"undefined":o(e),t.objStr=String(e),t}return u(r,n),r}(i),e.UncaughtErrorInClientFunctionCode=function(r){function o(e,t){l(this,o);var n=s(this,r.call(this,a.default.uncaughtErrorInClientFunctionCode));return n.errMsg=String(t),n.instantiationCallsiteName=e,n}return u(o,r),o}(i),e.UncaughtErrorInCustomDOMPropertyCode=function(o){function i(e,t,n){l(this,i);var r=s(this,o.call(this,a.default.uncaughtErrorInCustomDOMPropertyCode,t,n));return r.errMsg=String(t),r.property=n,r.instantiationCallsiteName=e,r}return u(i,o),i}(i),e.ExternalAssertionLibraryError=function(r){function o(e,t){l(this,o);var n=s(this,r.call(this,a.default.externalAssertionLibraryError));return n.errMsg=String(e),n.callsite=t,n}return u(o,r),o}(i),e.AssertionExecutableArgumentError=function(o){function i(e,t,n){l(this,i);var r=s(this,o.call(this,a.default.assertionExecutableArgumentError,e,t));return r.errMsg=n,r}return u(i,o),i}(d),e.AssertionUnawaitedPromiseError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.assertionUnawaitedPromiseError));return t.callsite=e,t}return u(r,n),r}(i),e.ActionIntegerOptionError=function(n){function r(e,t){return l(this,r),s(this,n.call(this,a.default.actionIntegerOptionError,e,t))}return u(r,n),r}(c),e.ActionPositiveIntegerOptionError=function(n){function r(e,t){return l(this,r),s(this,n.call(this,a.default.actionPositiveIntegerOptionError,e,t))}return u(r,n),r}(c),e.ActionBooleanOptionError=function(n){function r(e,t){return l(this,r),s(this,n.call(this,a.default.actionBooleanOptionError,e,t))}return u(r,n),r}(c),e.ActionSpeedOptionError=function(n){function r(e,t){return l(this,r),s(this,n.call(this,a.default.actionSpeedOptionError,e,t))}return u(r,n),r}(c),e.ActionOptionsTypeError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.actionOptionsTypeError));return t.actualType=e,t}return u(r,n),r}(i),e.ActionStringArgumentError=function(n){function r(e,t){return l(this,r),s(this,n.call(this,a.default.actionStringArgumentError,e,t))}return u(r,n),r}(d),e.ActionNullableStringArgumentError=function(n){function r(e,t){return l(this,r),s(this,n.call(this,a.default.actionNullableStringArgumentError,e,t))}return u(r,n),r}(d),e.ActionIntegerArgumentError=function(n){function r(e,t){return l(this,r),s(this,n.call(this,a.default.actionIntegerArgumentError,e,t))}return u(r,n),r}(d),e.ActionRoleArgumentError=function(n){function r(e,t){return l(this,r),s(this,n.call(this,a.default.actionRoleArgumentError,e,t))}return u(r,n),r}(d),e.ActionPositiveIntegerArgumentError=function(n){function r(e,t){return l(this,r),s(this,n.call(this,a.default.actionPositiveIntegerArgumentError,e,t))}return u(r,n),r}(d),e.ActionStringOrStringArrayArgumentError=function(n){function r(e,t){return l(this,r),s(this,n.call(this,a.default.actionStringOrStringArrayArgumentError,e,t))}return u(r,n),r}(d),e.ActionStringArrayElementError=function(o){function i(e,t,n){l(this,i);var r=s(this,o.call(this,a.default.actionStringArrayElementError,e,t));return r.elementIndex=n,r}return u(i,o),i}(d),e.SetTestSpeedArgumentError=function(n){function r(e,t){return l(this,r),s(this,n.call(this,a.default.setTestSpeedArgumentError,e,t))}return u(r,n),r}(d),e.ActionUnsupportedDeviceTypeError=function(n){function r(e,t){return l(this,r),s(this,n.call(this,a.default.actionUnsupportedDeviceTypeError,e,t))}return u(r,n),r}(d),e.ActionSelectorError=function(r){function o(e,t){l(this,o);var n=s(this,r.call(this,a.default.actionSelectorError));return n.selectorName=e,n.errMsg=t,n}return u(o,r),o}(i),e.ActionElementNotFoundError=function(e){function t(){return l(this,t),s(this,e.call(this,a.default.actionElementNotFoundError))}return u(t,e),t}(i),e.ActionElementIsInvisibleError=function(e){function t(){return l(this,t),s(this,e.call(this,a.default.actionElementIsInvisibleError))}return u(t,e),t}(i),e.ActionSelectorMatchesWrongNodeTypeError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.actionSelectorMatchesWrongNodeTypeError));return t.nodeDescription=e,t}return u(r,n),r}(i),e.ActionAdditionalElementNotFoundError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.actionAdditionalElementNotFoundError));return t.argumentName=e,t}return u(r,n),r}(i),e.ActionAdditionalElementIsInvisibleError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.actionAdditionalElementIsInvisibleError));return t.argumentName=e,t}return u(r,n),r}(i),e.ActionAdditionalSelectorMatchesWrongNodeTypeError=function(r){function o(e,t){l(this,o);var n=s(this,r.call(this,a.default.actionAdditionalSelectorMatchesWrongNodeTypeError));return n.argumentName=e,n.nodeDescription=t,n}return u(o,r),o}(i),e.ActionElementNonEditableError=function(e){function t(){return l(this,t),s(this,e.call(this,a.default.actionElementNonEditableError))}return u(t,e),t}(i),e.ActionElementNotTextAreaError=function(e){function t(){return l(this,t),s(this,e.call(this,a.default.actionElementNotTextAreaError))}return u(t,e),t}(i),e.ActionElementNonContentEditableError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.actionElementNonContentEditableError));return t.argumentName=e,t}return u(r,n),r}(i),e.ActionRootContainerNotFoundError=function(e){function t(){return l(this,t),s(this,e.call(this,a.default.actionRootContainerNotFoundError))}return u(t,e),t}(i),e.ActionIncorrectKeysError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.actionIncorrectKeysError));return t.argumentName=e,t}return u(r,n),r}(i),e.ActionCanNotFindFileToUploadError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.actionCanNotFindFileToUploadError));return t.filePaths=e,t}return u(r,n),r}(i),e.ActionElementIsNotFileInputError=function(e){function t(){return l(this,t),s(this,e.call(this,a.default.actionElementIsNotFileInputError))}return u(t,e),t}(i),e.ActionInvalidScrollTargetError=function(r){function o(e,t){l(this,o);var n=s(this,r.call(this,a.default.actionInvalidScrollTargetError));return n.properties=e?"scrollTargetY property":t?"scrollTargetX property":"scrollTargetX and scrollTargetY properties",n}return u(o,r),o}(i),e.WindowDimensionsOverflowError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.windowDimensionsOverflowError));return t.callsite=e,t}return u(r,n),r}(i),e.InvalidElementScreenshotDimensionsError=function(r){function o(e,t){l(this,o);var n=s(this,r.call(this,a.default.invalidElementScreenshotDimensionsError));return e<=0?t<=0?(n.verb="are",n.dimensions="width and height"):(n.verb="is",n.dimensions="width"):(n.verb="is",n.dimensions="height"),n}return u(o,r),o}(i),e.RoleSwitchInRoleInitializerError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.roleSwitchInRoleInitializerError));return t.callsite=e,t}return u(r,n),r}(i),e.ActionElementNotIframeError=function(e){function t(){return l(this,t),s(this,e.call(this,a.default.actionElementNotIframeError))}return u(t,e),t}(i),e.ActionIframeIsNotLoadedError=function(e){function t(){return l(this,t),s(this,e.call(this,a.default.actionIframeIsNotLoadedError))}return u(t,e),t}(i),e.CurrentIframeIsNotLoadedError=function(e){function t(){return l(this,t),s(this,e.call(this,a.default.currentIframeIsNotLoadedError))}return u(t,e),t}(i),e.CurrentIframeNotFoundError=function(e){function t(){return l(this,t),s(this,e.call(this,a.default.currentIframeNotFoundError))}return u(t,e),t}(i),e.CurrentIframeIsInvisibleError=function(e){function t(){return l(this,t),s(this,e.call(this,a.default.currentIframeIsInvisibleError))}return u(t,e),t}(i),e.NativeDialogNotHandledError=function(r){function o(e,t){l(this,o);var n=s(this,r.call(this,a.default.nativeDialogNotHandledError));return n.dialogType=e,n.pageUrl=t,n}return u(o,r),o}(i),e.UncaughtErrorInNativeDialogHandler=function(o){function i(e,t,n){l(this,i);var r=s(this,o.call(this,a.default.uncaughtErrorInNativeDialogHandler));return r.dialogType=e,r.errMsg=t,r.pageUrl=n,r}return u(i,o),i}(i),e.SetNativeDialogHandlerCodeWrongTypeError=function(n){function r(e){l(this,r);var t=s(this,n.call(this,a.default.setNativeDialogHandlerCodeWrongTypeError));return t.actualType=e,t}return u(r,n),r}(i),e.RequestHookConfigureAPIError=function(r){function o(e,t){l(this,o);var n=s(this,r.call(this,a.default.requestHookConfigureAPIError));return n.requestHookName=e,n.errMsg=t,n}return u(o,r),o}(i)},"type.js":function(e,t,n){e.__esModule=!0,e.default={uncaughtErrorOnPage:"uncaughtErrorOnPage",uncaughtErrorInTestCode:"uncaughtErrorInTestCode",uncaughtNonErrorObjectInTestCode:"uncaughtNonErrorObjectInTestCode",uncaughtErrorInClientFunctionCode:"uncaughtErrorInClientFunctionCode",uncaughtErrorInCustomDOMPropertyCode:"uncaughtErrorInCustomDOMPropertyCode",missingAwaitError:"missingAwaitError",actionIntegerOptionError:"actionIntegerOptionError",actionPositiveIntegerOptionError:"actionPositiveIntegerOptionError",actionBooleanOptionError:"actionBooleanOptionError",actionSpeedOptionError:"actionSpeedOptionError",actionOptionsTypeError:"actionOptionsTypeError",actionStringArgumentError:"actionStringArgumentError",actionNullableStringArgumentError:"actionNullableStringArgumentError",actionStringOrStringArrayArgumentError:"actionStringOrStringArrayArgumentError",actionStringArrayElementError:"actionStringArrayElementError",actionIntegerArgumentError:"actionIntegerArgumentError",actionRoleArgumentError:"actionRoleArgumentError",actionPositiveIntegerArgumentError:"actionPositiveIntegerArgumentError",actionSelectorError:"actionSelectorError",actionElementNotFoundError:"actionElementNotFoundError",actionElementIsInvisibleError:"actionElementIsInvisibleError",actionSelectorMatchesWrongNodeTypeError:"actionSelectorMatchesWrongNodeTypeError",actionAdditionalElementNotFoundError:"actionAdditionalElementNotFoundError",actionAdditionalElementIsInvisibleError:"actionAdditionalElementIsInvisibleError",actionAdditionalSelectorMatchesWrongNodeTypeError:"actionAdditionalSelectorMatchesWrongNodeTypeError",actionElementNonEditableError:"actionElementNonEditableError",actionElementNotTextAreaError:"actionElementNotTextAreaError",actionElementNonContentEditableError:"actionElementNonContentEditableError",actionElementIsNotFileInputError:"actionElementIsNotFileInputError",actionRootContainerNotFoundError:"actionRootContainerNotFoundError",actionIncorrectKeysError:"actionIncorrectKeysError",actionCanNotFindFileToUploadError:"actionCanNotFindFileToUploadError",actionUnsupportedDeviceTypeError:"actionUnsupportedDeviceTypeError",actionIframeIsNotLoadedError:"actionIframeIsNotLoadedError",actionElementNotIframeError:"actionElementNotIframeError",actionInvalidScrollTargetError:"actionInvalidScrollTargetError",currentIframeIsNotLoadedError:"currentIframeIsNotLoadedError",currentIframeNotFoundError:"currentIframeNotFoundError",currentIframeIsInvisibleError:"currentIframeIsInvisibleError",nativeDialogNotHandledError:"nativeDialogNotHandledError",uncaughtErrorInNativeDialogHandler:"uncaughtErrorInNativeDialogHandler",setTestSpeedArgumentError:"setTestSpeedArgumentError",setNativeDialogHandlerCodeWrongTypeError:"setNativeDialogHandlerCodeWrongTypeError",clientFunctionExecutionInterruptionError:"clientFunctionExecutionInterruptionError",domNodeClientFunctionResultError:"domNodeClientFunctionResultError",invalidSelectorResultError:"invalidSelectorResultError",cantObtainInfoForElementSpecifiedBySelectorError:"cantObtainInfoForElementSpecifiedBySelectorError",externalAssertionLibraryError:"externalAssertionLibraryError",pageLoadError:"pageLoadError",windowDimensionsOverflowError:"windowDimensionsOverflowError",invalidElementScreenshotDimensionsError:"invalidElementScreenshotDimensionsError",roleSwitchInRoleInitializerError:"roleSwitchInRoleInitializerError",assertionExecutableArgumentError:"assertionExecutableArgumentError",assertionUnawaitedPromiseError:"assertionUnawaitedPromiseError",requestHookConfigureAPIError:"requestHookConfigureAPIError"},t.exports=e.default}}},"test-run":{"browser-console-messages.js":function(e,t,n){e.__esModule=!0;var r,o=function(n){function r(e){!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this));return t.log=[],t.info=[],t.warn=[],t.error=[],t._assignFrom(e),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype._getAssignableProperties=function(){return[{name:"log"},{name:"info"},{name:"warn"},{name:"error"}]},r.prototype.concat=function(e){this.log=this.log.concat(e.log),this.info=this.info.concat(e.info),this.warn=this.warn.concat(e.warn),this.error=this.error.concat(e.error)},r.prototype.addMessage=function(e,t){this[e].push(t)},r.prototype.getCopy=function(){var e={},t=this._getAssignableProperties(),n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var o;if(n){if(r>=t.length)break;o=t[r++]}else{if((r=t.next()).done)break;o=r.value}var i=o;e[i.name]=this[i.name].slice()}return e},r}(((r=n("../utils/assignable"))&&r.__esModule?r:{default:r}).default);e.default=o,t.exports=e.default},"client-messages.js":function(e,t,n){e.__esModule=!0,e.default={ready:"ready",readyForBrowserManipulation:"ready-for-browser-manipulation",waitForFileDownload:"wait-for-file-download"},t.exports=e.default},commands:{"options.js":function(e,t,n){e.__esModule=!0,e.AssertionOptions=e.ResizeToFitDeviceOptions=e.DragToElementOptions=e.TypeOptions=e.MoveOptions=e.ClickOptions=e.MouseOptions=e.ElementScreenshotOptions=e.ScrollOptions=e.OffsetOptions=e.ActionOptions=e.speedOption=e.booleanOption=e.positiveIntegerOption=e.integerOption=void 0;var r,o=(r=n("../../utils/assignable"))&&r.__esModule?r:{default:r},i=n("./validations/factories"),a=n("../../errors/test-run");function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=e.integerOption=(0,i.createIntegerValidator)(a.ActionIntegerOptionError),d=e.positiveIntegerOption=(0,i.createPositiveIntegerValidator)(a.ActionPositiveIntegerOptionError),f=e.booleanOption=(0,i.createBooleanValidator)(a.ActionBooleanOptionError),m=e.speedOption=(0,i.createSpeedValidator)(a.ActionSpeedOptionError),h=e.ActionOptions=function(r){function o(e,t){s(this,o);var n=u(this,r.call(this));return n.speed=null,n._assignFrom(e,t),n}return l(o,r),o.prototype._getAssignableProperties=function(){return[{name:"speed",type:m}]},o}(o.default),p=e.OffsetOptions=function(r){function o(e,t){s(this,o);var n=u(this,r.call(this));return n.offsetX=null,n.offsetY=null,n._assignFrom(e,t),n}return l(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"offsetX",type:c},{name:"offsetY",type:c}])},o}(h),g=(e.ScrollOptions=function(r){function o(e,t){s(this,o);var n=u(this,r.call(this));return n.scrollToCenter=!1,n.skipParentFrames=!1,n._assignFrom(e,t),n}return l(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"scrollToCenter",type:f},{name:"skipParentFrames",type:f}])},o}(p),e.ElementScreenshotOptions=function(r){function o(e,t){s(this,o);var n=u(this,r.call(this));return n.scrollTargetX=null,n.scrollTargetY=null,n.includeMargins=!1,n.includeBorders=!0,n.includePaddings=!0,n.crop={left:null,right:null,top:null,bottom:null},n._assignFrom(e,t),n}return l(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"scrollTargetX",type:c},{name:"scrollTargetY",type:c},{name:"crop.left",type:c},{name:"crop.right",type:c},{name:"crop.top",type:c},{name:"crop.bottom",type:c},{name:"includeMargins",type:f},{name:"includeBorders",type:f},{name:"includePaddings",type:f}])},o}(h),e.MouseOptions=function(r){function o(e,t){s(this,o);var n=u(this,r.call(this));return n.modifiers={ctrl:!1,alt:!1,shift:!1,meta:!1},n._assignFrom(e,t),n}return l(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"modifiers.ctrl",type:f},{name:"modifiers.alt",type:f},{name:"modifiers.shift",type:f},{name:"modifiers.meta",type:f}])},o}(p)),E=e.ClickOptions=function(r){function o(e,t){s(this,o);var n=u(this,r.call(this));return n.caretPos=null,n._assignFrom(e,t),n}return l(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"caretPos",type:d}])},o}(g);e.MoveOptions=function(r){function o(e,t){s(this,o);var n=u(this,r.call(this));return n.speed=null,n.minMovingTime=null,n.holdLeftButton=!1,n.skipScrolling=!1,n._assignFrom(e,t),n}return l(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"speed"},{name:"minMovingTime"},{name:"holdLeftButton"},{name:"skipScrolling",type:f}])},o}(g),e.TypeOptions=function(r){function o(e,t){s(this,o);var n=u(this,r.call(this));return n.replace=!1,n.paste=!1,n._assignFrom(e,t),n}return l(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"replace",type:f},{name:"paste",type:f}])},o}(E),e.DragToElementOptions=function(r){function o(e,t){s(this,o);var n=u(this,r.call(this,e,t));return n.destinationOffsetX=null,n.destinationOffsetY=null,n._assignFrom(e,t),n}return l(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"destinationOffsetX",type:c},{name:"destinationOffsetY",type:c}])},o}(g),e.ResizeToFitDeviceOptions=function(r){function o(e,t){s(this,o);var n=u(this,r.call(this));return n.portraitOrientation=!1,n._assignFrom(e,t),n}return l(o,r),o.prototype._getAssignableProperties=function(){return[{name:"portraitOrientation",type:f}]},o}(o.default),e.AssertionOptions=function(r){function o(e,t){s(this,o);var n=u(this,r.call(this));return n.timeout=void 0,n.allowUnawaitedPromise=!1,n._assignFrom(e,t),n}return l(o,r),o.prototype._getAssignableProperties=function(){return[{name:"timeout",type:d},{name:"allowUnawaitedPromise",type:f}]},o}(o.default)},"type.js":function(e,t,n){e.__esModule=!0,e.default={click:"click",rightClick:"right-click",doubleClick:"double-click",drag:"drag",dragToElement:"drag-to-element",hover:"hover",typeText:"type-text",selectText:"select-text",selectTextAreaContent:"select-text-area-content",selectEditableContent:"select-editable-content",pressKey:"press-key",wait:"wait",navigateTo:"navigate-to",setFilesToUpload:"set-files-to-upload",clearUpload:"clear-upload",executeClientFunction:"execute-client-function",executeSelector:"execute-selector",takeScreenshot:"take-screenshot",takeElementScreenshot:"take-element-screenshot",takeScreenshotOnFail:"take-screenshot-on-fail",prepareBrowserManipulation:"prepare-browser-manipulation",showAssertionRetriesStatus:"show-assertion-retries-status",hideAssertionRetriesStatus:"hide-assertion-retries-status",setBreakpoint:"set-breakpoint",resizeWindow:"resize-window",resizeWindowToFitDevice:"resize-window-to-fit-device",maximizeWindow:"maximize-window",switchToIframe:"switch-to-iframe",switchToMainWindow:"switch-to-main-window",setNativeDialogHandler:"set-native-dialog-handler",getNativeDialogHistory:"get-native-dialog-history",getBrowserConsoleMessages:"get-browser-console-messages",setTestSpeed:"set-test-speed",setPageLoadTimeout:"set-page-load-timeout",debug:"debug",assertion:"assertion",useRole:"useRole",testDone:"test-done",backupStorages:"backup-storages"},t.exports=e.default},"utils.js":function(e,t,n){e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.isCommandRejectableByPageError=function(e){return!((s(r=e)||r.type===i.default.wait||r.type===i.default.assertion||u(e)||l(e))&&((n=e).type!==i.default.resizeWindow&&n.type!==i.default.resizeWindowToFitDevice&&n.type!==i.default.maximizeWindow||((t=e).type===i.default.switchToIframe||t.type===i.default.switchToMainWindow)));var t,n,r},e.canSetDebuggerBreakpointBeforeCommand=function(e){return e.type!==i.default.debug&&!s(e)&&!l(e)},e.isScreenshotCommand=function(e){return e.type===i.default.takeScreenshot||e.type===i.default.takeElementScreenshot||e.type===i.default.takeScreenshotOnFail},e.isBrowserManipulationCommand=u,e.isServiceCommand=l,e.isExecutableInTopWindowOnly=function(e){return e.type===i.default.testDone||e.type===i.default.switchToMainWindow||e.type===i.default.setNativeDialogHandler||e.type===i.default.getNativeDialogHistory||e.type===i.default.setTestSpeed||e.type===i.default.showAssertionRetriesStatus||e.type===i.default.hideAssertionRetriesStatus||e.type===i.default.setBreakpoint||u(e)&&e.type!==i.default.takeElementScreenshot},e.isJSExpression=function(e){return null!==e&&"object"===(void 0===e?"undefined":r(e))&&e.type===a&&"string"==typeof e.value};var o,i=(o=n("./type"))&&o.__esModule?o:{default:o},a="js-expr";function s(e){return e.type===i.default.executeClientFunction||e.type===i.default.executeSelector}function u(e){return e.type===i.default.takeScreenshot||e.type===i.default.takeElementScreenshot||e.type===i.default.takeScreenshotOnFail||e.type===i.default.resizeWindow||e.type===i.default.resizeWindowToFitDevice||e.type===i.default.maximizeWindow}function l(e){return e.type===i.default.testDone||e.type===i.default.takeScreenshotOnFail||e.type===i.default.showAssertionRetriesStatus||e.type===i.default.hideAssertionRetriesStatus||e.type===i.default.setBreakpoint||e.type===i.default.takeScreenshotOnFail}},validations:{"factories.js":function(e,t,n){e.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(r){return function(e,t){var n=void 0===t?"undefined":o(t);if("number"!==n)throw new r(e,n);if(isNaN(t)||!isFinite(t)||t!==Math.floor(t))throw new r(e,t)}}e.createIntegerValidator=i,e.createPositiveIntegerValidator=function(n){var r=i(n);return function(e,t){if(r(e,t),t<0)throw new n(e,t)}},e.createBooleanValidator=function(r){return function(e,t){var n=void 0===t?"undefined":o(t);if("boolean"!==n)throw new r(e,n)}},e.createSpeedValidator=function(r){return function(e,t){var n=void 0===t?"undefined":o(t);if("number"!==n)throw new r(e,n);if(isNaN(t)||t<.01||1<t)throw new r(e,t)}}}}}},utils:{"assignable.js":function(e,t,n){e.__esModule=!0;var r=function(){function n(){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this)}return n.prototype._getAssignableProperties=function(){throw new Error("Not implemented")},n.prototype._assignFrom=function(e,t){if(e)for(var n=this._getAssignableProperties(),r=0;r<n.length;r++){for(var o=n[r],i=o.name,a=o.type,s=o.required,u=o.init,l=i.split("."),c=l.length-1,d=l[c],f=e,m=this,h=0;h<c&&f&&m;h++)f=f[l[h]],m=m[l[h]];if(f&&m){var p=f[d];(void 0!==p||s)&&(t&&a&&a(i,p),m[d]=u?u(i,p):p)}}},n}();e.default=r,t.exports=e.default},"limit-number.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n){return Math.min(Math.max(t,e),n)},t.exports=e.default}}}}})("testcafe/src/client/driver/index")}initTestCafeClientDrivers(window)}();