<!DOCTYPE html>
<html>

  <head>
  
  
  
  
  
  
  

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <title>Introducing Multi-window Tests (Beta) | TestCafe</title>

  <meta name="description" content="Introducing Multi-window Tests (Beta)Modern web apps often launch new browser windows to authenticate users through third-party websites or display additiona...">
  <meta name="viewport" content="width=device-width">

  <meta property="og:image" content="https://raw.githubusercontent.com/DevExpress/testcafe-gh-page-assets/master/src/images/testcafe-ogp-icon.png">
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://devexpress.github.io/testcafe/media/team-blog/introducing-multi-window-tests-beta.html" />
  <meta property="og:title" content="Introducing Multi-window Tests (Beta) | TestCafe" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:image" content="https://raw.githubusercontent.com/DevExpress/testcafe-gh-page-assets/master/src/images/testcafe-twitter-card-icon.png" />
  <meta name="twitter:site" content="@DXTestCafe" />
  
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/styles/docco.min.css">
  
  
  <link rel="shortcut icon" href="/testcafe/favicon.ico">
  <link rel="stylesheet" href="/testcafe/css/main.css">
  <link rel="stylesheet" href="/testcafe/css/banner.css">
  <link rel="canonical" href="https://devexpress.github.io/testcafe/media/team-blog/introducing-multi-window-tests-beta.html">
  <link rel="alternate" type="application/rss+xml" title="TestCafe" href="https://devexpress.github.io/testcafe/feed.xml">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
  <link rel="apple-touch-icon" sizes="180x180" href="/testcafe/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/testcafe/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/testcafe/favicon-16x16.png">
  <link rel="manifest" href="/testcafe/site.webmanifest">
  <meta name="msapplication-TileColor" content="#2d89ef">
  <meta name="msapplication-config" content="/testcafe/browserconfig.xml" />
  <meta name="theme-color" content="#ffffff">
  <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/highlight.min.js"></script>
  <script defer src="https://buttons.github.io/buttons.js"></script>
  <script defer type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.3.min.js"></script>
  <script src="/testcafe/scripts/mobile-detect.min.js" type="text/javascript"></script>
  <script>
     var md             = new MobileDetect(window.navigator.userAgent);
     var isMobileDevice = !!md.mobile();
  </script>
  <script>
      document.addEventListener('DOMContentLoaded', function (e) {
          hljs.initHighlightingOnLoad();
      });
  </script>

  
  <script>
    // Google Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-83678642-1', 'auto');
    ga('set', 'anonymizeIp', true);
    ga('send', 'pageview');
  </script>
  

  

  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.12/css/perfect-scrollbar.min.css">
  <link rel="stylesheet" href="/testcafe/css/docs.css">
    
    <link rel="stylesheet" href="/testcafe/css/community.css">
    
  <style>
      .ps-container > .ps-scrollbar-x-rail,
      .ps-container > .ps-scrollbar-y-rail {
          opacity: 0.6;
      }
  </style>
  

  

  

  

  <script>
    function linkCss (href) {
        var link  = document.createElement('link');
        var html  = document.querySelector('html');
        var head  = document.head;

        link.rel  = 'stylesheet';
        link.type = 'text/css';
        link.href = href;
        link.media = 'all';

        head.appendChild(link);

        window.addEventListener('load', function () {
            html.style.display = 'block';
        });

        html.style.display = 'none';
    }
  </script>
    
    

    <script>
        if (isMobileDevice) {
            linkCss('/testcafe/css/banner.mobile.css');

            document.addEventListener('DOMContentLoaded', function (e) {
                var siteNav         = document.querySelector('.site-nav');
                var hamburgerButton = document.querySelector('.hamburger-button');

                hamburgerButton.addEventListener('click', function (e) {
                    if (hamburgerButton.className.indexOf('active') !== -1) {
                        hamburgerButton.className = hamburgerButton.className.replace(' active', '');
                        siteNav.className = siteNav.className.replace(' active', '');
                        document.documentElement.style.overflowY = 'scroll';
                        document.body.style.overflowY = 'initial';
                    }
                    else {
                        hamburgerButton.className += ' active';
                        siteNav.className += ' active';
                        document.documentElement.style.overflowY = 'hidden';
                        document.body.style.overflowY = 'hidden';
                    }
                });

                var docTopNav          = document.querySelector('.doc-top-nav');
                var docMenuItem        = document.querySelector('.site-nav-tab');
                var mainMenuSecondItem = document.querySelector('.site-nav-tab:nth-child(2)');

                siteNav.insertBefore(docTopNav, mainMenuSecondItem);
                
                var searchPanel = document.getElementById('search-panel');
                
                siteNav.insertBefore(searchPanel, docMenuItem);

                var docMenuItemIcon = document.createElement('div');

                docMenuItemIcon.className = 'doc-menu-item-icon';
                docMenuItem.appendChild(docMenuItemIcon);

                

                docMenuItem.addEventListener('click', function (e) {
                    if (docTopNav.className.indexOf('expanded') !== -1) {
                        docMenuItem.className = docMenuItem.className.replace(' expanded', '');
                        docTopNav.className = docTopNav.className.replace(' expanded', '');
                    }
                    else {
                        docMenuItem.className += ' expanded';
                        docTopNav.className += ' expanded';
                    }
                    e.preventDefault();
                });
            });

            linkCss('/testcafe/css/mobile.css');
        }
    </script>

  

  

    

  
    <script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.12/js/perfect-scrollbar.min.js"></script>
    <script defer type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.3.min.js"></script>

    <script>
        var MIN_BODY_WIDTH = 1230;
        var FOOTER_HEIGHT  = 225;

        var nav     = null;
        var article = null;

        function getHeaderHeight () {
            return 76;
        }

        function setNavTopPosition () {
            var headerHeight = getHeaderHeight();
            var top          = null;

            if (document.body.clientWidth > MIN_BODY_WIDTH) {
                if (nav.style.top !== headerHeight + 'px') {
                    nav.style.top = headerHeight + 'px';
                    Ps.update(nav);
                }
            }
            else {
                top = window.pageYOffset <= headerHeight ? headerHeight - window.pageYOffset + 'px' : '0';

                if (nav.style.top !== top) {
                    nav.style.top = top;
                    Ps.update(nav);
                }
            }
        }

        function setNavBottomPosition () {
            var footerVisibleHeight = FOOTER_HEIGHT - document.body.scrollHeight + window.pageYOffset +
                                      document.body.clientHeight;

            if (footerVisibleHeight > 0) {
                if (nav.style.bottom !== footerVisibleHeight + 'px') {
                    nav.style.bottom = footerVisibleHeight + 'px';
                    Ps.update(nav);
                }
            }
            else if (nav.style.bottom !== '0') {
                nav.style.bottom = '0';
                Ps.update(nav);
            }
        }

        function updateNavMenuPosition () {
            nav.style.marginLeft = '-' + window.pageXOffset + 'px';

            setNavBottomPosition();
            setNavTopPosition();
        }

        function changeBodyHeight () {
            if (document.body.style.height !== window.innerHeight + 'px')
                document.body.style.height = window.innerHeight + 'px';
        }

        function initScrollBar() {
            Ps.initialize(nav);

            window.addEventListener('resize', function () {
                Ps.update(nav);
            });
        }

        function initNav() {
            initScrollBar();
            updateNavMenuPosition();
            window.addEventListener('scroll', updateNavMenuPosition);
            window.addEventListener('resize', updateNavMenuPosition);
        }

        function scrollToActiveItem() {
            var activeItem = document.querySelector('.doc-nav .active');
            var scrollContainer = document.querySelector('.ps-container');

            if (scrollContainer && activeItem) {
                scrollContainer.scrollTop = activeItem.offsetTop;
            }
        }

        document.addEventListener('DOMContentLoaded', function (e) {
            if (isMobileDevice)
                return;

            nav     = document.querySelector('.doc-nav');
            article = document.querySelector('.doc');

            if (nav)
                initNav(nav);

            scrollToActiveItem();
        });
    </script>
    
    
    <script>
        if (isMobileDevice) {
            linkCss('/testcafe/css/banner.mobile.css');
            linkCss('/testcafe/css/docs.mobile.css');           
            
            if (false == false) {
                document.addEventListener('DOMContentLoaded', function (e) {
                    var docNavPanel = document.querySelector('.doc-nav-panel');
                    var docNav      = document.querySelector('.doc-nav');

                    docNavPanel.addEventListener('click', function (e) {
                        if (docNav.className.indexOf('active') !== -1) {
                            docNav.className = docNav.className.replace(' active', '');
                            document.documentElement.style.overflowY = 'scroll';
                            document.body.style.overflowY = 'initial';
                        }
                        else {
                            docNav.className += ' active';
                            document.documentElement.style.overflowY = 'hidden';
                            document.body.style.overflowY = 'hidden';
                        }
                    });
                });
            }
        }
    </script>
  
    <script>
        function initHeader(siteHeader, contentWrapper, docTopMenu, article, gs) {
            var MIN_BODY_WIDTH = 1230;

            function updateHeader() {
                var CONTENT_MARGIN_WITH_DOC_MENU     = '72px';
                var CONTENT_MARGIN_WITHOUT_DOC_MENU  = '21px';
                var CONTENT_MARGIN_COMMUNITY_DESKTOP = '27px';
                var CONTENT_MARGIN_COMMUNITY_MOBILE  = '48px';

                var bodyMinimized          = document.body.clientWidth === MIN_BODY_WIDTH;
                var docContentMargin       = bodyMinimized ? CONTENT_MARGIN_WITHOUT_DOC_MENU : CONTENT_MARGIN_WITH_DOC_MENU;
                var isCommunitySection     = true;
                var contentMarginCommunity = isMobileDevice ? CONTENT_MARGIN_COMMUNITY_MOBILE : CONTENT_MARGIN_COMMUNITY_DESKTOP;
                var contentMargin          = isCommunitySection ? contentMarginCommunity : docContentMargin;

                

                siteHeader.style.position = bodyMinimized ? 'static' : '';

                if(docTopMenu)
                    docTopMenu.style.position = bodyMinimized ? 'static' : '';

                if(contentWrapper)
                    contentWrapper.style.paddingTop = bodyMinimized ? '0' : '';

                if(article && !isMobileDevice)
                    article.style.marginTop = contentMargin;
                if(gs && !isMobileDevice)
                    gs.style.paddingTop = contentMargin;
            }

            updateHeader();
            window.addEventListener('scroll', updateHeader);
            window.addEventListener('resize', updateHeader);
        }
        document.addEventListener('DOMContentLoaded', function (e) {
            var contentWrapper = document.querySelector('.container');
            var siteHeader     = document.querySelector('.site-header');
            var docTopMenu     = document.querySelector('.doc-top-nav');
            var article        = document.querySelector('.doc');
            var gs             = document.querySelector('.gs');

            if(siteHeader)
                initHeader(siteHeader, contentWrapper, docTopMenu, article, gs);
        });
    </script>
</head>


  <body>

    <script defer src="/testcafe/scripts/cookie-notice.js" type="text/javascript"></script>
<div class="cookie-notice">
    <div class="close-icon"></div>
    <div class="cookie-notice-content">
        <div class="cookie-notice-message">
            <div class="cookie-notice-header">Why We Use Cookies</div>
            <div class="cookie-notice-text">This site uses cookies to make your browsing experience more convenient and personal. Cookies store useful information on your computer to help us improve the efficiency and relevance of our site for you. In some cases, they are essential to making the site work properly. By accessing this site, you consent to the use of cookies. For more information, refer to DevExpress' <a href="https://www.devexpress.com/AboutUs/privacy-policy.xml" target="_blank">privacy policy</a> and <a href="https://www.devexpress.com/AboutUs/cookie-policy.xml" target="_blank">cookie policy</a>.</div>
        </div>
        <div class="cookie-notice-button">I understand</div>
    </div>
</div>

    <div class="page-content-wrapper">

      

<script>
    var TEAM_BLOG_LAST_VISITED_FLAG = 'team-blog-last-visited';
    var TEAM_BLOG_LINK_ID           = 'blog-link';
    var TEAM_BLOG_LINK_NEW_CLASS    = 'new-post';
    var NOTIFICATIONS_ACTIVE_SINCE  = new Date(2020, 4, 21)

    var teamBlogLastVisited = window.localStorage.getItem(TEAM_BLOG_LAST_VISITED_FLAG) || NOTIFICATIONS_ACTIVE_SINCE;

    window.addEventListener('DOMContentLoaded', function (e) {
        var lastPostDate = new Date(1607634000 * 1000);
        
        if(lastPostDate > teamBlogLastVisited) {
            var blogLink = document.getElementById(TEAM_BLOG_LINK_ID).parentElement;
            
            if(blogLink)
                blogLink.className += ` ${TEAM_BLOG_LINK_NEW_CLASS}`;
        }
    });
</script>
<header class="site-header fixed">
  <div class="site-header-content">
    <a class="site-logo" href="/testcafe/"></a>
    <div class="hamburger-button">
        <div class="hamburger-icon"></div>
    </div>
    <nav class="site-nav">
      
        
        <div class="site-nav-tab">
          <a class="page-link" href="/testcafe/documentation/getting-started/"><span>Docs</span></a>
        </div>
      
        
        <div class="site-nav-tab active" id="blog-link-tab">
          <a class="page-link" id="blog-link" href="/testcafe/media/team-blog/"><span>Blog</span></a>
        </div>
      
        
        <div class="site-nav-tab">
          <a class="page-link" href="/testcafe/faq/"><span>FAQ</span></a>
        </div>
      
        
        <div class="site-nav-tab">
          <a class="page-link" href="/testcafe/support/"><span>Support</span></a>
        </div>
      
        
        <div class="site-nav-tab">
          <a class="page-link" href="/testcafe/release-notes/"><span>Release Notes</span></a>
        </div>
      
        
        <div class="site-nav-tab" id="studio-link-tab">
          <a class="page-link" id="studio-link" href="https://www.devexpress.com/products/testcafestudio/" target="_blank"><span>TestCafe Studio</span></a>
        </div>
      
    </nav>
    <div class="site-header-buttons">
      <a id="twitter-button" href="https://twitter.com/dxtestcafe" target="_blank"></a>
      <div id="search-icon"></div>
      <div class="star-button">
        <a class="github-button" href="https://github.com/DevExpress/testcafe" data-size="large" data-count-href="/DevExpress/testcafe/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star DevExpress/testcafe on GitHub"><span style="color:#ffffff">Star</span></a>
      </div>
      <div id="search-panel" class="hidden">
          <input type="text" placeholder="Search documentation" id="search"/>
          <div id="close-search"></div>
      </div>
    </div>
  </div>
</header>

<script>
  function has(parentEl, el)  {
    var descendants = parentEl.getElementsByTagName('*');
    
    for(i = 0; i < descendants.length; i++) 
        if(descendants[i] === el) return true;

    return false;
  }

  function clickOutsideBox(e, box) {
      return box !== e.target && !has(box, e.target);
  }  

  function closeSearchBox(e) {
      if(clickOutsideBox(e, searchPanel) && searchPanel.className.indexOf('hidden') === -1) 
          searchPanel.className += ' hidden';
  }

  var searchButton      = document.getElementById('search-icon');
  var searchPanel       = document.getElementById('search-panel');
  var searchInput       = document.getElementById('search');
  var closeSearchButton = document.getElementById('close-search');

  searchButton.addEventListener('click', function () {
      searchPanel.className = searchPanel.className.replace(/hidden/,'');
      searchInput.focus();      
  });
  
  closeSearchButton.addEventListener('click', function () {
      searchPanel.className += ' hidden';
  });

  window.addEventListener('mousedown', closeSearchBox);        
  window.addEventListener('touchstart', closeSearchBox);

  if (window.isMobileDevice) {
      function closeHamburgerMenuBox(e) {
          if(clickOutsideBox(e, hamburgerMenu) && clickOutsideBox(e, hamburgerButton) && hamburgerMenu.className.indexOf('active') !== -1) {
              hamburgerMenu.className = hamburgerMenu.className.replace(' active', '');
              hamburgerButton.className = hamburgerButton.className.replace(' active', '');
              document.documentElement.style.overflowY = 'scroll';
              document.body.style.overflowY = 'initial';
          }
      }

      var hamburgerMenu = document.querySelector('.site-nav');
      var hamburgerButton = document.querySelector('.hamburger-button');

      window.addEventListener('mousedown', closeHamburgerMenuBox);        
      window.addEventListener('touchstart', closeHamburgerMenuBox);

      window.addEventListener('DOMContentLoaded', function (e) {
          var docNav = document.querySelector('.doc-nav');

          if(docNav) {
              function closeDocNav() {
                  docNav.className = docNav.className.replace(' active', '');
                  document.documentElement.style.overflowY = 'scroll';
                  document.body.style.overflowY = 'initial';
              }

              function clickWithDocNavInvoked(e) {
                  if(clickOutsideBox(e, docNav) && clickOutsideBox(e, docNavPanel) && docNav.className.indexOf('active') !== -1) 
                      closeDocNav();
              }

              var docNavPanel = document.querySelector('.doc-nav-panel');

              window.addEventListener('mousedown', clickWithDocNavInvoked);        
              window.addEventListener('touchstart', clickWithDocNavInvoked);

              var docNavLinks = document.querySelectorAll('.doc-nav a');

              docNavLinks.forEach(function (link) {
                  link.addEventListener('click', closeDocNav);
              });
          }
      });
  }
</script>

<script>
  var studioLink = document.getElementById('studio-link');

  studioLink.addEventListener('click', function () {
      ga('send', 'event', 'topMenu', 'studioLinkClicked');
  });
</script>

<div class="doc-top-nav">
  <div class="doc-top-nav-content">
    <div class="doc-top-nav-wrapper">
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/getting-started/">Getting Started</a>
        </div>
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/guides/">Guides</a>
        </div>
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/reference/">Reference</a>
        </div>
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/recipes/">Recipes</a>
        </div>
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/how-it-works/">How It Works</a>
        </div>
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/examples/">Examples</a>
        </div>
      
    </div>
  </div>
</div>


      <div class="container">
    <main>
    <div class="post">
        <div class="post-date">
            AUG 26, 2020
        </div>
        <article class="post-content">
            <h1>Introducing Multi-window Tests (Beta)</h1>
<p>Modern web apps often launch new browser windows to authenticate users through third-party websites or display additional interactive content.</p>

<p>TestCafe v1.9.0 introduces partial support for multi-window tests. You can now use client-side calls to open and close browser windows. The updated API includes additional window management methods. During the &#39;beta&#39; stage, this functionality is only enabled in local instances of Chrome and Firefox. Keep in mind that this feature is not ready for use in production environments. Both the syntax and capabilities are subject to change.</p>

<!--more-->
<h2><a class="anchor" id="client-side-window-events"></a>Client-side window events <a class="permalink" href="#client-side-window-events">#</a></h2>
<p>The TestCafe browser automation driver detects and automatically activates newly launched windows. After the content is loaded, and all asynchronous requests are resolved, the test continues in the new window. When that window is closed, TestCafe switches back to the parent window and resumes the test.</p>

<p>The sample code below demonstrates an OAuth login scenario. Lines <code>8</code> through <code>10</code> run in the external OAuth window.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">fixture</span><span class="p">(</span><span class="dl">'</span><span class="s1">Login via &lt;Service Name&gt;</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">page</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://my-page</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="dl">'</span><span class="s1">Should log in via &lt;Service Name&gt;</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">t</span>
        <span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="dl">'</span><span class="s1">#login-popup</span><span class="dl">'</span><span class="p">)</span>

        <span class="p">.</span><span class="nx">typeText</span><span class="p">(</span><span class="dl">'</span><span class="s1">#username</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">username</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">typeText</span><span class="p">(</span><span class="dl">'</span><span class="s1">#pass</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">mySecret</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="dl">'</span><span class="s1">#submit</span><span class="dl">'</span><span class="p">)</span>

        <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="nx">Selector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#user</span><span class="dl">'</span><span class="p">).</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">eql</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello %Username%!</span><span class="dl">'</span><span class="p">);</span> <span class="c1">//Make sure we are logged in</span>
<span class="p">});</span>
</code></pre></div>
<p><img src="/testcafe/images/blog/2020-8-26-multi-window-scheme-auto-switching.svg" alt="A scheme that illustrates automatic window switching" title=""></p>

<p>You do not need to write extra code to create basic multi-window tests. When you need to arbitrarily open, close and switch between windows, use the <a href="https://devexpress.github.io/testcafe/documentation/guides/advanced-guides/multiple-browser-windows.html">TestCafe API</a>.</p>
<h2><a class="anchor" id="switch-between-windows"></a>Switch between windows <a class="permalink" href="#switch-between-windows">#</a></h2>
<p>The <a href="https://devexpress.github.io/testcafe/documentation/reference/test-api/testcontroller/switchtopreviouswindow.html">t.switchToPreviousWindow</a> method activates the last active window. If you only have two windows open, this method will cycle between them. This is useful in a variety of scenarios.</p>

<p>Imagine, for example, that you&#39;re testing a real estate listings website. You want to make sure that once a new property is added, it appears in the window with all available listings. The following test implements this scenario:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">fixture</span><span class="p">(</span><span class="dl">'</span><span class="s1">Property List</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">page</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://url.com/properties</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Open the listings page</span>

<span class="nx">test</span><span class="p">(</span><span class="dl">'</span><span class="s1">Check the property list</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">t</span>
        <span class="p">.</span><span class="nx">openWindow</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://url.com/addnewproperty</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// Open the 'add new property' page in a new window</span>
        <span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="dl">'</span><span class="s1">#make-public</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// Publish the listing</span>

        <span class="p">.</span><span class="nx">switchToPreviousWindow</span><span class="p">()</span> <span class="c1">// Go back to the listings page</span>
        <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="nx">Selector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.property-list li</span><span class="dl">'</span><span class="p">).</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">eql</span><span class="p">(</span><span class="dl">'</span><span class="s1">New </span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Check if the new listing is displayed</span>
<span class="p">});</span>  
</code></pre></div>
<p><img src="/testcafe/images/blog/2020-8-26-multi-window-scheme-switchtowindow-scenario.svg" alt="A scheme that illustrates switching between windows" title=""></p>
<h2><a class="anchor" id="manage-multiple-windows"></a>Manage multiple windows <a class="permalink" href="#manage-multiple-windows">#</a></h2>
<p>Test scenarios with more than two open windows require more precision. The <a href="https://devexpress.github.io/testcafe/documentation/reference/test-api/testcontroller/switchtowindow.html">t.switchToWindow</a> method can activate any open browser window if you pass a window descriptor object or a predicate function with the window description.</p>

<p>To obtain a window descriptor, call the <a href="https://devexpress.github.io/testcafe/documentation/reference/test-api/testcontroller/getcurrentwindow.html">t.getCurrentWindow</a> method or save the return value when you open a new window.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">const</span> <span class="nx">windowDesc</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">t</span><span class="p">.</span><span class="nx">openWindow</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://devexpress.github.io/testcafe/</span><span class="dl">'</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">t</span><span class="p">.</span><span class="nx">switchToWindow</span><span class="p">(</span><span class="nx">windowDesc</span><span class="p">);</span>
</code></pre></div>
<p>The predicate function must contain a description of the window&#39;s URL or title. The URL object has the same structure as its <a href="https://nodejs.org/api/url.html">Node.JS counterpart</a>.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">await</span> <span class="nx">t</span>
    <span class="p">.</span><span class="nx">openWindow</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://devexpress.github.io/testcafe/</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">switchToWindow</span><span class="p">(({</span><span class="nx">url</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">url</span><span class="p">.</span><span class="nx">pathname</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">/testcafe</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>
<p>Imagine you are debugging a task manager app. To ensure that both the task list and the notification feed are updated in real time, use the <a href="https://devexpress.github.io/testcafe/documentation/reference/test-api/testcontroller/switchtowindow.html">t.switchToWindow</a> method.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">fixture</span><span class="p">(</span><span class="dl">'</span><span class="s1">Tasks View</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">page</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://url.com/add-task</span><span class="dl">'</span><span class="p">);</span>  

<span class="nx">test</span><span class="p">(</span><span class="dl">'</span><span class="s1">Add a new task</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>  
    <span class="k">await</span> <span class="nx">t</span>
        <span class="p">.</span><span class="nx">openWindow</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://url.com/tasks</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// Open a new window with the task list</span>
        <span class="p">.</span><span class="nx">openWindow</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://url.com/feed</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// Open the notification feed</span>

        <span class="p">.</span><span class="nx">switchToWindow</span><span class="p">(({</span><span class="nx">url</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">url</span><span class="p">.</span><span class="nx">pathname</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">/add-task</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// Go back to the new task form</span>
        <span class="p">.</span><span class="nx">typeText</span><span class="p">(</span><span class="dl">'</span><span class="s1">#task-description</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Redesign the landing page by 1 Feb</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// Fill in the new task form</span>
        <span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="dl">'</span><span class="s1">#submit-task</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// Submit the task</span>

        <span class="p">.</span><span class="nx">switchToWindow</span><span class="p">(({</span><span class="nx">url</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">url</span><span class="p">.</span><span class="nx">pathname</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">/tasks</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// Switch back to the task list</span>
        <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="nx">Selector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.task-item</span><span class="dl">'</span><span class="p">).</span><span class="nx">count</span><span class="p">).</span><span class="nx">eql</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">// Check if the new task is displayed</span>

        <span class="p">.</span><span class="nx">switchToWindow</span><span class="p">(({</span><span class="nx">url</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">url</span><span class="p">.</span><span class="nx">pathname</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">feed</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// Switch to the notification feed</span>
        <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="nx">Selector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.message</span><span class="dl">'</span><span class="p">).</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">eql</span><span class="p">(</span><span class="dl">'</span><span class="s1">Redesign the landing page by 1 Feb</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Check for the corresponding notification</span>
<span class="p">});</span>  
</code></pre></div>
<p><img src="/testcafe/images/blog/2020-8-26-multi-window-scheme-task-manager.svg" alt="A scheme that illustrates the task manager example" title=""></p>
<h2><a class="anchor" id="api-overview"></a>API overview <a class="permalink" href="#api-overview">#</a></h2>
<p>The updated API includes a number of useful window management methods.</p>

<ul>
<li><a href="https://devexpress.github.io/testcafe/documentation/reference/test-api/testcontroller/openwindow.html">t.openWindow(url)</a> opens a new window and points it to the specified URL.<br></li>
<li><a href="https://devexpress.github.io/testcafe/documentation/reference/test-api/testcontroller/getcurrentwindow.html">t.getCurrentWindow()</a> obtains the window descriptor that corresponds to the active window.</li>
<li><a href="https://devexpress.github.io/testcafe/documentation/reference/test-api/testcontroller/switchtowindow.html#tswitchtowindowwindow">t.switchToWindow(windowDescriptor)</a> activates the window that corresponds to the window descriptor.</li>
<li><a href="https://devexpress.github.io/testcafe/documentation/reference/test-api/testcontroller/switchtowindow.html#tswitchtowindowpredicate">t.switchToWindow(predicate)</a> uses the predicate function to find a matching window, and activates it. The predicate can include the window&#39;s title and URL.</li>
<li><a href="https://devexpress.github.io/testcafe/documentation/reference/test-api/testcontroller/switchtoparentwindow.html">t.switchToParentWindow()</a> activates the parent of the active window.</li>
<li><a href="https://devexpress.github.io/testcafe/documentation/reference/test-api/testcontroller/switchtopreviouswindow.html">t.switchToPreviousWindow()</a> activates the last active window.</li>
<li><a href="https://devexpress.github.io/testcafe/documentation/reference/test-api/testcontroller/closewindow.html">t.closeWindow()</a> closes the active window.</li>
<li><a href="https://devexpress.github.io/testcafe/documentation/reference/test-api/testcontroller/closewindow.html">t.closeWindow(windowDescriptor)</a> closes the window that corresponds to the window descriptor.</li>
</ul>
<h2><a class="anchor" id="try-the-new-api-and-let-us-know-what-you-think"></a>Try the new API and let us know what you think <a class="permalink" href="#try-the-new-api-and-let-us-know-what-you-think">#</a></h2>
<p>To try the functionality described in this article:</p>

<ul>
<li>Install TestCafe version 1.9.0 or later;</li>
<li>Create a test scenario that incorporates more than one browser window;</li>
<li>Include the window management methods from this article in the test.</li>
</ul>

<p>The TestCafe team is proud to create API that realistically model user behavior. If you find that the new window management capabilities can be modified to better serve your needs, please let us know. Submit your feedback and bug reports to <a href="https://github.com/DevExpress/testcafe/issues/new/choose">our GitHub repository</a>.</p>

<p>Refer to the TestCafe help topics for additional information about these methods.</p>

        </article>
        <div id="back-to-posts-link">
            <p><a href="../../media/team-blog/">Back to Post List</a></p>
        </div>
        <!-- <div id="disqus_thread"></div> -->
    </div>
</main>

<!-- 
<script>
    var disqus_config = function () {
        this.page.url = 'https://devexpress.github.io/testcafe/media/team-blog/introducing-multi-window-tests-beta.html';
        this.page.identifier = '/media/team-blog/introducing-multi-window-tests-beta';
    };
    (function() {
        var d = document, s = d.createElement('script');
        
        s.src = '//testcafe-blog.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
 -->
</div>

    </div>

    <footer class="site-footer">
    <div class="site-footer-content">
        <div class="footer-links">
            <div class="footer-link-content">
                <div class="link"><a href="/testcafe/documentation/">Docs</a></div>
                <div class="link"><a href="/testcafe/media/team-blog/">Blog</a></div>
                <div class="link"><a href="/testcafe/faq/">FAQ</a></div>
                <div class="link"><a href="/testcafe/support/">Support</a></div>
                <div class="link"><a href="/testcafe/roadmap/">Roadmap</a></div>
                <div class="link"><a href="/testcafe/release-notes/">Release Notes</a></div>
                <div class="link"><a href="https://devexpress.com/products/testcafestudio">TestCafe Studio</a></div>
            </div>
        </div>
        <div class="footer-icons">
            <div class="icon"><a href="https://twitter.com/DXTestCafe"><img src="/testcafe/images/twitter-footer.svg"/></a></div>
            <div class="icon"><a href="https://github.com/DevExpress/testcafe"><img src="/testcafe/images/github-footer.svg"/></a></div>
        </div>
        <div class="footer-legal">
            Use of this site constitutes acceptance of our <a href="https://www.devexpress.com/aboutus/privacy-policy.xml"  target="_blank">Privacy Policy</a><br/>
            Copyright © 2012–2020 Developer Express Inc.</p>
        </div>
    </div>
</footer>


    
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript"> var search = docsearch({
     apiKey: '938fb7894c0af8c01af3e2b4c53d4bdd',
     indexName: 'testcafe',
     inputSelector: '#search',
     debug: false // Set debug to true if you want to inspect the dropdown
 });

 search.autocomplete.on('autocomplete:opened', function(e) {
     var searchInput = document.querySelector('#search');
     var dropdown    = document.querySelector('.ds-dropdown-menu');
     
     if(searchInput && dropdown) {
         dropdown.style.maxWidth = "none";
         dropdown.style.width = searchInput.offsetWidth + "px";
     }
 });
</script> 

  </body>

</html>
