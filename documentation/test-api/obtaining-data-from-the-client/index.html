<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <title>Obtaining Data from the Client | TestCafe</title>

  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  
  <meta property="og:image" content="https://raw.githubusercontent.com/DevExpress/testcafe-gh-page-assets/master/src/images/testcafe-ogp-icon.png">
  <meta property="og:type" content="website" />
  <meta property="og:url" content="http://devexpress.github.io/testcafe/documentation/test-api/obtaining-data-from-the-client/" />
  <meta property="og:title" content="Obtaining Data from the Client | TestCafe" />

  <link rel="shortcut icon" href="/testcafe/favicon.ico">
  <link rel="stylesheet" href="/testcafe/css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/docco.min.css">
  <link rel="canonical" href="http://devexpress.github.io/testcafe/documentation/test-api/obtaining-data-from-the-client/">
  <link rel="alternate" type="application/rss+xml" title="TestCafe" href="http://devexpress.github.io/testcafe/feed.xml">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
  <script defer src="https://buttons.github.io/buttons.js"></script>
  <script defer type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.3.min.js"></script>
  <script src="/testcafe/scripts/mobile-detect.min.js" type="text/javascript"></script>
  <script>
      document.addEventListener('DOMContentLoaded', function (e) {
          hljs.initHighlightingOnLoad();
      });
  </script>

  
  <script>
    // Google Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-83678642-1', 'auto');
    ga('send', 'pageview');
  </script>
  

  
  
  

  <script>
    (function () {
        var VISIT_DAY = {
            first: 1,
            second: 2,
            more: 3
        };

        var isLandingPage = false;
        var isGettingStarted = false;
        var isDocumentation = true;

        function updateVisitDay () {
            var FIRST_VISIT_DAY_ITEM_NAME = 'first-visit-day';
            var SECOND_VISIT_DAY_ITEM_NAME = 'second-visit-day';
            var DIFFERENT_VISITS_DELAY = 12 * 60 * 60 * 1000; 
            
            // TODO: ignore old visits
            var now = Date.now();
            var firstVisit = window.localStorage.getItem(FIRST_VISIT_DAY_ITEM_NAME);
            var secondVisit = window.localStorage.getItem(SECOND_VISIT_DAY_ITEM_NAME);

            if(!firstVisit) {
                window.localStorage.setItem(FIRST_VISIT_DAY_ITEM_NAME, now);
                return VISIT_DAY.first;
            }

            firstVisit = parseInt(firstVisit);

            if(!secondVisit) {
                if(!isLandingPage && now - firstVisit >=DIFFERENT_VISITS_DELAY) {
                    window.localStorage.setItem(SECOND_VISIT_DAY_ITEM_NAME, now);
                    return VISIT_DAY.second;
                }

                return VISIT_DAY.first;
            }
            
            secondVisit = parseInt(secondVisit);

            return now - secondVisit >= DIFFERENT_VISITS_DELAY ? VISIT_DAY.more : VISIT_DAY.second;
        }

        window.needShowShareWidget = function () {
            if(!isDocumentation || isGettingStarted)
                return false;

            var visitDay = updateVisitDay();

            return visitDay === VISIT_DAY.more;
        };
    })();
  </script>

  

  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.12/css/perfect-scrollbar.min.css">
    <style>
        .ps-container > .ps-scrollbar-x-rail,
        .ps-container > .ps-scrollbar-y-rail {
            opacity: 0.6;
        }
    </style>
    <script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.12/js/perfect-scrollbar.min.js"></script>
    <script defer type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.3.min.js"></script>
    <script defer src="/testcafe/scripts/widget.js" type="text/javascript"></script>

    <script>
        var MIN_BODY_WIDTH = 1230;
        var FOOTER_HEIGHT  = 113;
        var HEADER_HEIGHT  = 126;

        var nav            = null;
        var article        = null;
        var md             = new MobileDetect(window.navigator.userAgent);
        var isMobileDevice = !!md.mobile();

        function setNavTopPosition () {
            var isMobileZoomed = isMobileDevice && window.innerWidth !== document.body.scrollWidth;
            var top            = null;

            if(isMobileDevice) {
                top = window.pageYOffset >= HEADER_HEIGHT ? window.pageYOffset - HEADER_HEIGHT + 'px' : '0';

                if (nav.style.paddingTop !== top) {
                    nav.style.paddingTop = top;
                    Ps.update(nav);
                }

                return;
            }

            if (document.body.clientWidth > MIN_BODY_WIDTH) {
                if (nav.style.top !== HEADER_HEIGHT + 'px') {
                    nav.style.top = HEADER_HEIGHT + 'px';
                    Ps.update(nav);
                }
            }
            else if(!isMobileZoomed) {
                top = window.pageYOffset <= HEADER_HEIGHT ? HEADER_HEIGHT - window.pageYOffset + 'px' : '0';

                if (nav.style.top !== top) {
                    nav.style.top = top;
                    Ps.update(nav);
                }
            }
        }

        function setNavBottomPosition () {
            var footerVisibleHeight = FOOTER_HEIGHT - document.body.scrollHeight + window.pageYOffset +
                                      document.body.clientHeight;

            if (footerVisibleHeight > 0) {
                if (nav.style.bottom !== footerVisibleHeight + 'px') {
                    nav.style.bottom = footerVisibleHeight + 'px';
                    Ps.update(nav);
                }
            }
            else if (nav.style.bottom !== '0') {
                nav.style.bottom = '0';
                Ps.update(nav);
            }
        }

        function updatePosition () {
            if (isMobileDevice)
                changeBodyHeight();
            else
                nav.style.marginLeft = '-' + window.pageXOffset + 'px';

            setNavBottomPosition();
            setNavTopPosition();
        }

        function changeBodyHeight () {
            if (document.body.style.height !== window.innerHeight + 'px')
                document.body.style.height = window.innerHeight + 'px';
        }

        function initScrollBar() {
            Ps.initialize(nav);

            window.addEventListener('resize', function () {
                Ps.update(nav);
            });
        }

        function initNav() {
            if(isMobileDevice) {
                nav.style.position = 'relative';
                nav.style.float = 'left';
                nav.style.top = '0px';

                article.style.marginTop = '0px';
                article.style.paddingTop = '22px';
            }

            initScrollBar();
            updatePosition();
            window.addEventListener('scroll', updatePosition);
            window.addEventListener('resize', updatePosition);

            if(isMobileDevice) {
                nav.style.height = window.innerHeight + 'px';
            }
        }

        document.addEventListener('DOMContentLoaded', function (e) {
            nav     = document.querySelector('.doc-nav');
            article = document.querySelector('.doc');

            if(nav)
                initNav(nav);
        });
    </script>
  
    <script>
        function initHeader(siteHeader, contentWrapper, docTopMenu, article, gs) {
            var MIN_BODY_WIDTH = 1230;

            function updateHeader() {
                var bodyMinimized = document.body.clientWidth === MIN_BODY_WIDTH;

                

                siteHeader.style.position = bodyMinimized ? 'static' : '';

                if(docTopMenu)
                    docTopMenu.style.position = bodyMinimized ? 'static' : '';

                if(contentWrapper)
                    contentWrapper.style.paddingTop = bodyMinimized ? '0' : '';

                if(article)
                    article.style.marginTop = bodyMinimized ? '21px' : '72px';
 
                if(gs)
                    gs.style.paddingTop = bodyMinimized ? '21px' : '72px';
            }

            updateHeader();
            window.addEventListener('scroll', updateHeader);
            window.addEventListener('resize', updateHeader);
        }
        document.addEventListener('DOMContentLoaded', function (e) {
            var contentWrapper = document.querySelector('.container');
            var siteHeader     = document.querySelector('.site-header');
            var docTopMenu     = document.querySelector('.doc-top-nav');
            var article        = document.querySelector('.doc');
            var gs             = document.querySelector('.gs');

            if(siteHeader) 
                initHeader(siteHeader, contentWrapper, docTopMenu, article, gs);
        });
    </script>
</head>


  <body>
    <div class="page-content-wrapper">

      <header class="site-header fixed">
  <div class="site-header-content">
    <a class="site-logo" href="/testcafe/"></a>
    <nav class="site-nav">
        
          
          <div class="site-nav-tab active">
            <a class="page-link" href="/testcafe/documentation/getting-started/">Documentation</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="https://github.com/DevExpress/testcafe" target="_blank">GitHub</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="/testcafe/faq/">FAQ</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="/testcafe/publications/">Publications</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="/testcafe/blog/">Release Notes</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="https://github.com/DevExpress/testcafe/issues" target="_blank">Issues</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="https://stackoverflow.com/questions/tagged/testcafe" target="_blank">Q&amp;A</a>
          </div>
        
      <a id="twitter-button" href="https://twitter.com/dxtestcafe" target="_blank"></a>
      <div id="search-icon"></div>
      <div class="star-button">
        <a class="github-button" href="https://github.com/DevExpress/testcafe" data-size="large" data-count-href="/DevExpress/testcafe/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star DevExpress/testcafe on GitHub"><span style="color:#ffffff">Star</span></a>
      </div>
      <div id="search-panel" class="hidden">
          <input type="text" placeholder="Search query" id="search"/>
          <div id="close-search"></div>
      </div>
      </nav>
  </div>
</header>

<script>
  function has(parentEl, el)  {
    var descendants = parentEl.getElementsByTagName('*');
    
    for(i = 0; i < descendants.length; i++) 
        if(descendants[i] === el) return true;

    return false;
  }

  function closeSearchBox(e) {
      var clickOutsideSearchBox = searchPanel !== e.target && !has(searchPanel, e.target);

      if(clickOutsideSearchBox && searchPanel.className.indexOf('hidden') === -1) 
          searchPanel.className += ' hidden';
  }

  var searchButton      = document.querySelector('#search-icon');
  var searchPanel       = document.querySelector('#search-panel');
  var searchInput       = document.querySelector('#search');
  var closeSearchButton = document.querySelector('#close-search');

  searchButton.addEventListener('click', function () {
      searchPanel.className = searchPanel.className.replace(/hidden/,'');
      searchInput.focus();      
  });
  
  closeSearchButton.addEventListener('click', function () {
      searchPanel.className += ' hidden';
  });

  window.addEventListener('mousedown', closeSearchBox);        
  window.addEventListener('touchstart', closeSearchBox);
</script>


  <div class="doc-top-nav">
    <div class="doc-top-nav-content">
      <div class="doc-top-nav-wrapper">
        
          <div class="doc-top-nav-tab " >
            <a href="/testcafe/documentation/getting-started/">Getting Started</a>      
          </div>
        
          <div class="doc-top-nav-tab " >
            <a href="/testcafe/documentation/using-testcafe/">Using TestCafe</a>      
          </div>
        
          <div class="doc-top-nav-tab active" >
            <a href="/testcafe/documentation/test-api/">Test API</a>      
          </div>
        
          <div class="doc-top-nav-tab " >
            <a href="/testcafe/documentation/extending-testcafe/">Extending TestCafe</a>      
          </div>
        
          <div class="doc-top-nav-tab " >
            <a href="/testcafe/documentation/recipes/">Recipes</a>      
          </div>
        
      </div>
    </div>
  </div>



      <div class="container">
    
	
	

	
	

	
	
	<nav class="doc-nav">	
		<div class="doc-nav-content">
			<ul>
				<li>
				<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/typescript-support.html"  >TypeScript Support</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html"  >Test Code Structure</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#fixtures"  >Fixtures</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#tests"  >Tests</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#test-controller"  >Test Controller</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#setting-test-speed"  >Setting Test Speed</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#specifying-the-start-webpage"  >Specifying the Start Webpage</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#specifying-testing-metadata"  >Specifying Testing Metadata</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#using-metadata-in-reports"  >Using Metadata in Reports</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#initialization-and-clean-up"  >Initialization and Clean-Up</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#test-hooks"  >Test Hooks</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#fixture-hooks"  >Fixture Hooks</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#skipping-tests"  >Skipping Tests</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/"  >Selecting Page Elements</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors/"  >Selectors</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors/creating-selectors.html"  >Creating Selectors</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors/using-selectors.html"  >Using Selectors</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors/functional-style-selectors.html"  >Functional-Style Selectors</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors/selector-options.html"  >Selector Options</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors/extending-selectors.html"  >Extending Selectors</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors/edge-cases-and-limitations.html"  >Edge Cases and Limitations</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/dom-node-state.html"  >DOM Node State</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/framework-specific-selectors.html"  >Framework-Specific Selectors</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/examples-of-working-with-dom-elements.html"  >Examples of Working with DOM Elements</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/"  >Actions</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/click.html"  >Click</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/double-click.html"  >Double Click</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/right-click.html"  >Right Click</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/drag-element.html"  >Drag Element</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/hover.html"  >Hover</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/select-text.html"  >Select Text</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/type-text.html"  >Type Text</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/press-key.html"  >Press Key</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/navigate.html"  >Navigate</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/take-screenshot.html"  >Take Screenshot</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/upload.html"  >Upload</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/resize-window.html"  >Resize Window</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/action-options.html"  >Action Options</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/assertions/"  >Assertions</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/assertions/assertion-api.html"  >Assertion API</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/obtaining-data-from-the-client/" class="active" >Obtaining Data from the Client</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/obtaining-data-from-the-client/examples-of-using-client-functions.html"  >Examples of Using Client Functions</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/intercepting-http-requests/"  >Intercepting HTTP Requests</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/intercepting-http-requests/logging-http-requests.html"  >Logging HTTP Requests</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/intercepting-http-requests/mocking-http-responses.html"  >Mocking HTTP Responses</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/intercepting-http-requests/creating-a-custom-http-request-hook.html"  >Creating a Custom HTTP Request Hook</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/intercepting-http-requests/specifying-which-requests-are-handled-by-the-hook.html"  >Specifying Which Requests are Handled by the Hook</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/intercepting-http-requests/attaching-hooks-to-tests-and-fixtures.html"  >Attaching Hooks to Tests and Fixtures</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/intercepting-http-requests/requestoptions-object.html"  >requestOptions Object</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/built-in-waiting-mechanisms.html"  >Built-In Waiting Mechanisms</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/authentication/"  >Authentication</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/authentication/user-roles.html"  >User Roles</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/authentication/http-authentication.html"  >HTTP Authentication</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/pausing-the-test.html"  >Pausing the Test</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/handling-native-dialogs.html"  >Handling Native Dialogs</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/working-with-iframes.html"  >Working with &lt;iframes&gt;</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/debugging.html"  >Debugging</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/accessing-console-messages.html"  >Accessing Console Messages</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/a-z.html"  >A-Z Index</a>
		
    </li>

</ul>
				</li>
			</ul>
		</div>
	</nav>
	

	
	

	
	
	


<main>
	<article class="doc">
		<div class="post-content">

			<h1>Obtaining Data from the Client</h1>
<p>TestCafe allows you to create <em>client functions</em> that can return any
serializable value from the client side, like the current URL
or custom data calculated by a client script.</p>
<blockquote class="important"><div class="blockquote-content"><p>Do not modify the tested webpage within client functions.
To interact with the page, use <a href="../actions/">test actions</a>.</p>
</div></blockquote>
<p>This topic contains the following sections.</p>

<ul>
<li><a href="#creating-client-functions">Creating Client Functions</a>

<ul>
<li><a href="#running-asynchronous-client-code">Running Asynchronous Client Code</a></li>
</ul></li>
<li><a href="#executing-client-functions">Executing Client Functions</a></li>
<li><a href="#options">Options</a></li>
<li><a href="#one-time-client-code-execution">One-Time Client Code Execution</a></li>
<li><a href="#calling-client-functions-from-nodejs-callbacks">Calling Client Functions from Node.js Callbacks</a></li>
<li><a href="#limitations">Limitations</a></li>
</ul>
<h2><a class="anchor" name="creating-client-functions"></a>Creating Client Functions <a class="permalink" href="#creating-client-functions">#</a></h2>
<p>To create a client function, use the <code>ClientFunction</code> constructor.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">ClientFunction( fn [, options] )
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>fn</code></td>
<td>Function</td>
<td>A function to be executed on the client side.</td>
</tr>
<tr>
<td><code>options</code>&#160;<em>(optional)</em></td>
<td>Object</td>
<td>See <a href="#options">Options</a>.</td>
</tr>
</tbody></table>
<blockquote class="important"><div class="blockquote-content"><p>Client functions cannot return DOM nodes. Use <a href="../selecting-page-elements/selectors/">selectors</a> for this.</p>
</div></blockquote>
<p>The following example shows how to create a client function.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">ClientFunction</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">getWindowLocation</span> <span class="o">=</span> <span class="nx">ClientFunction</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">);</span>
</code></pre></div><h3><a class="anchor" name="running-asynchronous-client-code"></a>Running Asynchronous Client Code <a class="permalink" href="#running-asynchronous-client-code">#</a></h3>
<p>You can create client functions that run asynchronous code.
To this end, pass a function that returns a Promise to the <code>ClientFunction</code> constructor.
In this instance, the client function will complete only when this Promise resolves.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">ClientFunction</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">performAsyncOperation</span> <span class="o">=</span> <span class="nx">ClientFunction</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span> <span class="c1">// some async operations</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre></div><h2><a class="anchor" name="executing-client-functions"></a>Executing Client Functions <a class="permalink" href="#executing-client-functions">#</a></h2>
<p>To execute a client function, call it with the <code>await</code> keyword.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">ClientFunction</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">getWindowLocation</span> <span class="o">=</span> <span class="nx">ClientFunction</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">);</span>

<span class="nx">fixture</span> <span class="s2">`My fixture`</span>
    <span class="p">.</span><span class="nx">page</span> <span class="s2">`http://www.example.com/`</span><span class="p">;</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'My Test'</span><span class="p">,</span> <span class="k">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">location</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">getWindowLocation</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div><h2><a class="anchor" name="options"></a>Options <a class="permalink" href="#options">#</a></h2>
<p>You can pass the following options to the
<a href="#creating-client-functions">ClientFunction constructor</a> and the
<a href="#one-time-client-code-execution">t.eval</a> function.</p>
<h3><a class="anchor" name="optionsdependencies"></a>options.dependencies <a class="permalink" href="#optionsdependencies">#</a></h3>
<p><strong>Type</strong>: Object</p>

<p>Contains functions, variables or objects used by the client function internally.
Properties of the <code>dependencies</code> object will be added to the client function&#39;s scope as variables.</p>

<p>The following sample demonstrates a client function (<code>getArticleHeaderHTML</code>) that
calls a <a href="../selecting-page-elements/selectors/">selector</a> (<code>articleHeader</code>) internally.
This selector is passed to <code>getArticleHeaderHTML</code> as a dependency.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">Selector</span><span class="p">,</span> <span class="nx">ClientFunction</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">articleHeader</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="s1">'#article-header'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">getArticleHeaderHTML</span> <span class="o">=</span> <span class="nx">ClientFunction</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">articleHeader</span><span class="p">().</span><span class="nx">innerHTML</span><span class="p">,</span> <span class="p">{</span>
     <span class="na">dependencies</span><span class="p">:</span> <span class="p">{</span> <span class="nx">articleHeader</span> <span class="p">}</span>
<span class="p">});</span>
</code></pre></div><blockquote><div class="blockquote-content"><p>When a client function calls a <a href="../selecting-page-elements/selectors/">selector</a> internally,
the selector does not wait for the element to appear in the DOM
but is executed at once, like a client function.</p>
</div></blockquote><h3><a class="anchor" name="optionsboundtestrun"></a>options.boundTestRun <a class="permalink" href="#optionsboundtestrun">#</a></h3>
<p><strong>Type</strong>: Object</p>

<p>If you need to call a client function from a Node.js callback,
assign the current <a href="../test-code-structure.html#test-controller">test controller</a>
to the <code>boundTestRun</code> option.</p>

<p>For details, see <a href="#calling-client-functions-from-nodejs-callbacks">Calling Client Functions from Node.js Callbacks</a>.</p>
<h3><a class="anchor" name="overwriting-options"></a>Overwriting Options <a class="permalink" href="#overwriting-options">#</a></h3>
<p>You can overwrite client function options by using the ClientFunction&#39;s <code>with</code> function.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">clientFunction.with( options ) → ClientFunction
</code></pre></div>
<p><code>with</code> returns a new client function with a different set of options that includes options
from the original function and new <code>options</code> that overwrite the original ones.</p>

<p>The sample below shows how to overwrite the client function options.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">Selector</span><span class="p">,</span> <span class="nx">ClientFunction</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">option</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="s1">'option'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">thirdOption</span> <span class="o">=</span> <span class="nx">option</span><span class="p">.</span><span class="nx">nth</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">getThirdOptionHTML</span> <span class="o">=</span> <span class="nx">ClientFunction</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">option</span><span class="p">().</span><span class="nx">innerHTML</span><span class="p">,</span> <span class="p">{</span>
     <span class="na">dependencies</span><span class="p">:</span> <span class="p">{</span> <span class="na">option</span><span class="p">:</span> <span class="nx">thirdOption</span> <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">fourthOption</span> <span class="o">=</span> <span class="nx">option</span><span class="p">.</span><span class="nx">nth</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">getFourthOptionHTML</span> <span class="o">=</span> <span class="nx">getThirdOptionHTML</span><span class="p">.</span><span class="kd">with</span><span class="p">({</span>
    <span class="na">dependencies</span><span class="p">:</span> <span class="p">{</span> <span class="na">option</span><span class="p">:</span> <span class="nx">fourthOption</span> <span class="p">}</span>
<span class="p">});</span>
</code></pre></div><h2><a class="anchor" name="one-time-client-code-execution"></a>One-Time Client Code Execution <a class="permalink" href="#one-time-client-code-execution">#</a></h2>
<p>To create a client function and immediately execute it without saving it,
use the <code>eval</code> method of the <a href="../test-code-structure.html#test-controller">test controller</a>.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">t.eval( fn [, options] )
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>fn</code></td>
<td>Function</td>
<td>A function to be executed on the client side.</td>
</tr>
<tr>
<td><code>options</code>&#160;<em>(optional)</em></td>
<td>Object</td>
<td>See <a href="#options">Options</a>.</td>
</tr>
</tbody></table>

<p>The following example shows how to get the document&#39;s URI with <code>t.eval</code>.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">fixture</span> <span class="s2">`My fixture`</span>
    <span class="p">.</span><span class="nx">page</span> <span class="s2">`http://www.example.com/`</span><span class="p">;</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'My Test'</span><span class="p">,</span> <span class="k">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">docURI</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">t</span><span class="p">.</span><span class="kr">eval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentURI</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><blockquote><div class="blockquote-content"><p>Since the <code>eval</code> method returns a value, not an object, you cannot call other methods of the test controller in the chain after calling &#39;eval&#39;.</p>
</div></blockquote><h2><a class="anchor" name="calling-client-functions-from-nodejs-callbacks"></a>Calling Client Functions from Node.js Callbacks <a class="permalink" href="#calling-client-functions-from-nodejs-callbacks">#</a></h2>
<p>Client functions need access to the <a href="../test-code-structure.html#test-controller">test controller</a> to be executed.
When called right from the test function, they implicitly obtain the test controller.</p>

<p>However, if you need to call a client function from a Node.js callback that fires during the test run,
you will have to manually bind this function to the test controller.</p>

<p>Use the <a href="#optionsboundtestrun">boundTestRun</a> option for this.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="nx">fs</span> <span class="k">from</span> <span class="s1">'fs'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ClientFunction</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="nx">fixture</span> <span class="s2">`My fixture`</span>
    <span class="p">.</span><span class="nx">page</span> <span class="s2">`http://www.example.com/`</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">getDataFromClient</span> <span class="o">=</span> <span class="nx">ClientFunction</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">getSomeData</span><span class="p">());</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'Check client data'</span><span class="p">,</span> <span class="k">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">boundGetDataFromClient</span> <span class="o">=</span> <span class="nx">getDataFromClient</span><span class="p">.</span><span class="kd">with</span><span class="p">({</span> <span class="na">boundTestRun</span><span class="p">:</span> <span class="nx">t</span> <span class="p">});</span>

    <span class="kd">const</span> <span class="nx">equal</span> <span class="o">=</span> <span class="kr">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s1">'/home/user/tests/reference/clientData.json'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">boundGetDataFromClient</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">clientData</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">clientData</span><span class="p">)</span> <span class="o">===</span> <span class="nx">data</span><span class="p">);</span>
            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">});</span>

    <span class="kr">await</span> <span class="nx">t</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="nx">equal</span><span class="p">).</span><span class="nx">ok</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>
<p>This approach only works for Node.js callbacks that fire during the test run. To ensure that the test function
does not finish before the callback is executed, suspend the test until the callback fires. You can do this
by introducing a promise and synchronously waiting for it to complete as shown in the example above.</p>
<h2><a class="anchor" name="limitations"></a>Limitations <a class="permalink" href="#limitations">#</a></h2>
<ul>
<li><p>You cannot use generators or <code>async/await</code> syntax within client functions.</p></li>
<li><p>Client functions cannot access variables defined in the outer scope in test code.
However, you can use arguments to pass data inside these functions, except for self-invoking functions
that cannot take any parameters from the outside.</p>

<p>Likewise, the return value is the only way to obtain data from client functions.</p></li>
</ul>


		</div>
		<div class="widget-container hidden">
			<div id="share-button">
				<div id="graph-icon">
					<img src="/testcafe/images/icon-share.svg"/>
				</div>
				<p>TELL<br/>YOUR<br/>FRIENDS</p>
			</div>
			<div class="widget-panel">
				<div id="tweet">
					<a href="https://twitter.com/intent/tweet?text=Check%20out%20%23TestCafe%20-%20a%20free%20node.js%20tool%20for%20e2e%20testing%20https%3A%2F%2Fdevexpress.github.io%2Ftestcafe%2F"
					onclick="return !window.open(this.href, 'Twitter', 'width=690,height=450')"
					target="_blank">
						<img src="/testcafe/images/icon-tweet.svg"/>
					</a>
				</div>
				<div id="facebook">
					<a href="https://www.facebook.com/sharer/sharer.php?u=https://devexpress.github.io/testcafe/"
					onclick="return !window.open(this.href, 'Facebook', 'width=500,height=500')"
					target="_blank">
						<image src="/testcafe/images/icon-facebook.svg"/>
					</a>
				</div>
				<div id="collapse">
					<img src="/testcafe/images/icon-close.svg"/>
				</div>
			</div>
		</div>
	</article>
</main>
</div>

      <div class="push"></div>
    </div>

    <footer class="site-footer">
    <div class="site-footer-content">
        <div class="footer-col-1">
            <p><strong>TestCafe</strong>: A node.js tool to automate end-to-end web testing<br/>
            Use of this site constitutes acceptance of our <a href="https://www.devexpress.com/aboutus/privacy-policy.xml"  target="_blank">Privacy Policy</a><br/>
            Copyright © 2012-2018 Developer Express Inc.</p>
        </div>
    </div>
</footer>


    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript"> var search = docsearch({
     apiKey: '938fb7894c0af8c01af3e2b4c53d4bdd',
     indexName: 'testcafe',
     inputSelector: '#search',
     debug: false // Set debug to true if you want to inspect the dropdown
 });

 search.autocomplete.on('autocomplete:opened', function(e) {
     var searchInput = document.querySelector('#search');
     var dropdown    = document.querySelector('.ds-dropdown-menu');
     
     if(searchInput && dropdown) {
         dropdown.style.maxWidth = "none";
         dropdown.style.width = searchInput.offsetWidth + "px";
     }
 });
</script> 

    <script defer src="/testcafe/scripts/cookie-notice.js" type="text/javascript"></script>
<div class="cookie-notice">
    <div class="close-icon"></div>
    <div class="cookie-notice-content">
        <div class="cookie-notice-message">
            <div class="cookie-notice-header">Why We Use Cookies</div>
            <div class="cookie-notice-text">This site uses cookies to make your browsing experience more convenient and personal. Cookies store useful information on your computer to help us improve the efficiency and relevance of our site for you. In some cases, they are essential to making the site work properly. By accessing this site, you consent to the use of cookies. For more information, refer to DevExpress' <a href="https://www.devexpress.com/AboutUs/privacy-policy.xml" target="_blank">privacy policy</a> and <a href="https://www.devexpress.com/AboutUs/cookie-policy.xml" target="_blank">cookie policy</a>.</div>
        </div>
        <div class="cookie-notice-button">I understand</div>
    </div>
</div>

  </body>

</html>
