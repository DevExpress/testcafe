<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Selectors | TestCafe</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">

  <link rel="shortcut icon" href="/testcafe/favicon.ico">
  <link rel="stylesheet" href="/testcafe/css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/docco.min.css">
  <link rel="canonical" href="http://devexpress.github.io/testcafe/documentation/test-api/selecting-page-elements/selectors.html">
  <link rel="alternate" type="application/rss+xml" title="TestCafe" href="http://devexpress.github.io/testcafe/feed.xml">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
  <script>
      document.addEventListener('DOMContentLoaded', function (e) {
          hljs.initHighlightingOnLoad();
      });
  </script>

  
  <script>
    // Google Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-83678642-1', 'auto');
    ga('send', 'pageview');
  </script>
  

  
  

  

  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.12/css/perfect-scrollbar.min.css">
    <script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.12/js/perfect-scrollbar.min.js"></script>
    <script>
        function initNav(nav) {
            var MIN_BODY_WIDTH = 900;
            var FOOTER_HEIGHT  = 63;
            var HEADER_HEIGHT  = 52;

            function updatePosition() {
                var footerVisibleHeight = FOOTER_HEIGHT - document.body.scrollHeight + window.pageYOffset + document.body.clientHeight;

                nav.style.marginLeft = '-' + window.pageXOffset + 'px';
            
                if (footerVisibleHeight > 0) {
                    if(nav.style.bottom !== footerVisibleHeight + 'px') {
                        nav.style.bottom = footerVisibleHeight + 'px';
                        Ps.update(nav);
                    }
                }
                else if(nav.style.bottom !== '0') {
                    nav.style.bottom = '0';
                    Ps.update(nav);
                }

                if (document.body.clientWidth > MIN_BODY_WIDTH) {
                    if (nav.style.top !== HEADER_HEIGHT + 'px') {
                        nav.style.top = HEADER_HEIGHT + 'px';
                        Ps.update(nav);
                    }
                }
                else {
                    var top = window.pageYOffset <= HEADER_HEIGHT ? (HEADER_HEIGHT - window.pageYOffset) + 'px' : '0';

                    if(nav.style.top !== top) {
                        nav.style.top = top;
                        Ps.update(nav);
                    }
                }
            }
            function initScrollBar() {
                Ps.initialize(nav);
                
                window.addEventListener('resize', function () {
                    Ps.update(nav);
                });
            }

            initScrollBar();
            updatePosition();
            window.addEventListener('scroll', updatePosition);
            window.addEventListener('resize', updatePosition);
        }
        document.addEventListener('DOMContentLoaded', function (e) {
            var nav = document.querySelector('.doc-nav');

            if(nav)
                initNav(nav);
        });
    </script>
  
    <script>
        function initHeader(siteHeader, contentWrapper) {
            var MIN_BODY_WIDTH = 900;

            function updateHeader() {
                var bodyMinimized = document.body.clientWidth === MIN_BODY_WIDTH;
                
                

                siteHeader.style.position = bodyMinimized ? 'static' : '';

                if(contentWrapper)
                    contentWrapper.style.paddingTop = bodyMinimized ? '0' : '';
            }

            updateHeader();
            window.addEventListener('scroll', updateHeader);
            window.addEventListener('resize', updateHeader);
        }
        document.addEventListener('DOMContentLoaded', function (e) {
            var contentWrapper = document.querySelector('.container');
            var siteHeader     = document.querySelector('.site-header');

            if(siteHeader) 
                initHeader(siteHeader, contentWrapper);
        });
    </script>
</head>


  <body>
    <div class="page-content-wrapper">

      <header class="site-header minimized">
  <div class="site-header-content">
    <a class="site-logo" href="/testcafe/"></a>

    <nav class="site-nav">
      <div class="trigger">
        
          
          <a class="page-link active" href="/testcafe/documentation/getting-started/">Documentation</a>
          <span class="page-link-separator">|</span>
        
          
          <a class="page-link " href="https://github.com/DevExpress/testcafe">GitHub</a>
          <span class="page-link-separator">|</span>
        
          
          <a class="page-link " href="/testcafe/blog/">Blog</a>
          <span class="page-link-separator">|</span>
        
          
          <a class="page-link " href="https://github.com/DevExpress/testcafe/issues">Issues</a>
          <span class="page-link-separator">|</span>
        
          
          <a class="page-link " href="https://testcafe-discuss.devexpress.com/">Discuss</a>
          <span class="page-link-separator">|</span>
        
          
          <a class="page-link " href="https://twitter.com/dxtestcafe">Twitter</a>
          <span class="page-link-separator">|</span>
        
      </div>
    </nav>
  </div>
</header>


      <div class="container">
    	<nav class="doc-nav">	
		<div class="doc-nav-content">
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/getting-started/"  >GETTING STARTED</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/using-testcafe/"  >USING TESTCAFE</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/using-testcafe/installing-testcafe.html"  >Installing TestCafe</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/using-testcafe/command-line-interface.html"  >Command Line Interface</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/using-testcafe/programming-interface/"  >Programming Interface</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/using-testcafe/programming-interface/testcafe.html"  >TestCafe Class</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/using-testcafe/programming-interface/browserconnection.html"  >BrowserConnection Class</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/using-testcafe/programming-interface/runner.html"  >Runner Class</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/using-testcafe/programming-interface/createtestcafe.html"  >createTestCafe Factory</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/using-testcafe/common-concepts/"  >Common Concepts</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/using-testcafe/common-concepts/browser-support.html"  >Browser Support</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/using-testcafe/common-concepts/reporters.html"  >Reporters</a>
		
    </li>

</ul>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/"  >TEST API</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html"  >Test Code Structure</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/"  >Actions</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/click.html"  >Click</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/double-click.html"  >Double Click</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/right-click.html"  >Right Click</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/drag-element.html"  >Drag Element</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/hover.html"  >Hover</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/select-text.html"  >Select Text</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/type-text.html"  >Type Text</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/press-key.html"  >Press Key</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/navigate.html"  >Navigate</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/take-screenshot.html"  >Take Screenshot</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/upload.html"  >Upload</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/resize-window.html"  >Resize Window</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/action-options.html"  >Action Options</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/"  >Selecting Page Elements</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors.html" class="active" >Selectors</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selector-options.html"  >Selector Options</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/dom-node-snapshots.html"  >DOM Node Snapshots</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/assertions.html"  >Assertions</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/obtaining-data-from-the-client.html"  >Obtaining Data from the Client</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/pausing-the-test.html"  >Pausing the Test</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/handling-native-dialogs.html"  >Handling Native Dialogs</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/working-with-iframes.html"  >Working with &lt;iframes&gt;</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/a-z.html"  >A-Z Index</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/extending-testcafe/"  >EXTENDING TESTCAFE</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/extending-testcafe/reporter-plugin/"  >Reporter Plugin</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/extending-testcafe/reporter-plugin/reporter-methods.html"  >Reporter Methods</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/extending-testcafe/reporter-plugin/helpers.html"  >Helpers</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/extending-testcafe/browser-provider-plugin/"  >Browser Provider Plugin</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/extending-testcafe/browser-provider-plugin/browser-provider-methods.html"  >Browser Provider Methods</a>
		
    </li>

</ul>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/recipes/"  >RECIPES</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/recipes/running-tests-using-travis-ci-and-sauce-labs.html"  >Running Tests Using Travis CI and Sauce Labs</a>
		
    </li>

</ul>
		
    </li>

</ul>
		</div>
	</nav>


<main>
	<article class="doc">
		<div class="post-content">

			<h1>Selectors</h1>
<p>A selector is a function that is executed in the browser and returns a DOM node.
The identification and state of this node are passed to the server where
they can be used to define an <a href="../actions/">action&#39;s</a> target or
provide information for an <a href="../assertions.html">assertion</a>.</p>
<blockquote class="important"><div class="blockquote-content"><p>Do not modify the tested webpage within selectors.
To interact with the page, use <a href="../actions/">test actions</a>.</p>
</div></blockquote>
<p>This topic contains the following sections.</p>

<ul>
<li><a href="#creating-selectors">Creating Selectors</a></li>
<li><a href="#selector-initializers">Selector Initializers</a>

<ul>
<li><a href="#initializers-that-return-multiple-nodes">Initializers that Return Multiple Nodes</a></li>
</ul></li>
<li><a href="#executing-selectors">Executing Selectors</a>

<ul>
<li><a href="#dom-node-snapshots">DOM Node Snapshots</a>

<ul>
<li><a href="#snapshot-api-shorthands">Snapshot API Shorthands</a></li>
</ul></li>
<li><a href="#selector-timeout">Selector Timeout</a></li>
</ul></li>
<li><a href="#one-time-selection">One-Time Selection</a></li>
<li><a href="#using-selectors-to-define-action-targets">Using Selectors to Define Action Targets</a></li>
<li><a href="#calling-selectors-from-nodejs-callbacks">Calling Selectors from Node.js Callbacks</a></li>
<li><a href="#limitations">Limitations</a></li>
</ul>
<h2><a class="anchor" name="creating-selectors"></a>Creating Selectors <a class="permalink" href="#creating-selectors">#</a></h2>
<p>To create a selector, use the <code>Selector</code> constructor.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Selector( init [, options] )
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>init</code></td>
<td>Function &#124; String &#124; Selector &#124; Snapshot &#124; Promise</td>
<td>Identifies a DOM node to be selected. See <a href="#selector-initializers">Selector Initializers</a>.</td>
</tr>
<tr>
<td><code>options</code>&#160;<em>(optional)</em></td>
<td>Object</td>
<td>See <a href="selector-options.html">Options</a>.</td>
</tr>
</tbody></table>
<blockquote class="important"><div class="blockquote-content"><p>Selectors cannot return anything but a single DOM node or <code>null</code>.
Use <a href="../obtaining-data-from-the-client.html">client functions</a> to return arbitrary data.</p>
</div></blockquote>
<p>The following example creates a selector from a function that returns a DOM element by its ID.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">elementWithId</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">id</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">));</span>
</code></pre></div><h2><a class="anchor" name="selector-initializers"></a>Selector Initializers <a class="permalink" href="#selector-initializers">#</a></h2>
<p>You can initialize a selector with any of these objects.</p>

<ul>
<li><p>A regular function. Executed on the client side. Must return a DOM node, array of DOM nodes,
NodeList, HTMLCollection, <code>null</code> or <code>undefined</code>. Cannot use outer-scope variables from test code.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="c1">// A selector is created from a regular function.</span>
<span class="c1">// This selector will take the 'id' parameter and return</span>
<span class="c1">// a DOM element that has this ID.</span>
<span class="kr">const</span> <span class="nx">elementWithId</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">id</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">));</span>
</code></pre></div></li>
<li><p>A CSS selector string that matches one or several nodes.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="c1">// A selector is created from a CSS selector string.</span>
<span class="c1">// This selector will return the first matching DOM node.</span>
<span class="kr">const</span> <span class="nx">submitButton</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="s1">'#submit-button'</span><span class="p">);</span>
</code></pre></div></li>
<li><p>A selector.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="c1">// This selector is created from a function that returs all elements of a specified class.</span>
<span class="c1">// The selector returns the third such element since its `index` option is set to 2.</span>
<span class="kr">const</span> <span class="nx">thirdElemWithClass</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">cl</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="nx">cl</span><span class="p">),</span> <span class="p">{</span>
    <span class="na">index</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">});</span>

<span class="c1">// This selector is created based on the previous selector and inherits its initializer,</span>
<span class="c1">// but overwrites the `index` parameter to return the fourth element.</span>
<span class="kr">const</span> <span class="nx">fourthElemWithClass</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">thirdElemWithClass</span><span class="p">,</span> <span class="p">{</span> <span class="na">index</span><span class="p">:</span> <span class="mi">3</span> <span class="p">});</span>
</code></pre></div></li>
<li><p>A <a href="#dom-node-snapshots">DOM node snapshot</a>.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">elementWithId</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">id</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">));</span>

<span class="nx">fixture</span> <span class="err">`</span><span class="nx">My</span> <span class="nx">fixture</span><span class="err">`</span>
    <span class="p">.</span><span class="nx">page</span> <span class="err">`</span><span class="nx">http</span><span class="err">:</span><span class="c1">//www.example.com/`;</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'My Test'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">topMenuSnapshot</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">elementWithId</span><span class="p">(</span><span class="s1">'top-menu'</span><span class="p">);</span>

    <span class="c1">// This selector is created from a DOM node snapshot returned</span>
    <span class="c1">// by a different selector. The new selector will use the same initializer</span>
    <span class="c1">// as 'elementWithId' and will always be executed with the same parameter</span>
    <span class="c1">// values that were used to obtain 'topMenuSnapshot'. You can still</span>
    <span class="c1">// overwrite the selector options.</span>
    <span class="kr">const</span> <span class="nx">visibleTopMenu</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">topMenuSnapshot</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">visibilityCheck</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></li>
<li><p>A promise returned by a selector.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">elementWithId</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">id</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">));</span>

<span class="nx">fixture</span> <span class="err">`</span><span class="nx">My</span> <span class="nx">fixture</span><span class="err">`</span>
    <span class="p">.</span><span class="nx">page</span> <span class="err">`</span><span class="nx">http</span><span class="err">:</span><span class="c1">//www.example.com/`;</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'My Test'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="c1">// This selector is created from a promise returned by a call to a</span>
    <span class="c1">// different selector. The new selector will be initialized with the</span>
    <span class="c1">// same function as the old one and with hard-coded parameter values</span>
    <span class="c1">// as in the previous example.</span>
    <span class="kr">const</span> <span class="nx">submitButton</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">elementWithId</span><span class="p">(</span><span class="s1">'submit-button'</span><span class="p">));</span>
<span class="p">});</span>
</code></pre></div></li>
</ul>
<h3><a class="anchor" name="initializers-that-return-multiple-nodes"></a>Initializers that Return Multiple Nodes <a class="permalink" href="#initializers-that-return-multiple-nodes">#</a></h3>
<p>Functions and CSS selector stings that initialize a selector can return multiple DOM nodes.
In this instance, you must filter these nodes to select a single node that will eventually be returned by the selector.
Use the <a href="selector-options.html#optionstext">text</a> and <a href="selector-options.html#optionsindex">index</a> options for this.</p>

<p>The <a href="selector-options.html#optionstext">text</a> option specifies text content of the node that should be returned
or a regular expression that matches this content.</p>

<p>The <a href="selector-options.html#optionsindex">index</a> option specifies the index of the node that should be returned.</p>

<p>The following example demonstrates how to use the <code>text</code> and <code>index</code> options.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">expect</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'chai'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="nx">fixture</span> <span class="err">`</span><span class="nx">My</span> <span class="nx">fixture</span><span class="err">`</span>
    <span class="p">.</span><span class="nx">page</span> <span class="err">`</span><span class="nx">http</span><span class="err">:</span><span class="c1">//www.example.com/`;</span>

<span class="kr">const</span> <span class="nx">removeButton</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">cl</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="nx">cl</span><span class="p">),</span> <span class="p">{</span> <span class="na">text</span><span class="p">:</span> <span class="s1">'Remove'</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">secondButton</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">cl</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="nx">cl</span><span class="p">),</span> <span class="p">{</span> <span class="na">index</span><span class="p">:</span> <span class="mi">1</span> <span class="p">});</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'A shadowed remove button is focused'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">await</span> <span class="nx">removeButton</span><span class="p">(</span><span class="s1">'shadowed'</span><span class="p">).</span><span class="nx">focused</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="kc">true</span><span class="p">;</span>
<span class="p">});</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'The second disabled button is visible'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">await</span> <span class="nx">secondButton</span><span class="p">(</span><span class="s1">'disabled'</span><span class="p">).</span><span class="nx">visible</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="kc">true</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
<p>If both options are specified, nodes are first filtered by the <code>text</code> filter,
then a node at the <code>index</code> position is selected from the remaining nodes.</p>

<p>If all nodes are filtered out, the selector returns <code>null</code>.</p>
<blockquote><div class="blockquote-content"><p>The <a href="selector-options.html#optionstext">text</a> and <a href="selector-options.html#optionsindex">index</a> options
are also applied when the selector is called from another selector or a <a href="../obtaining-data-from-the-client.html">client function</a>.</p>
</div></blockquote><h2><a class="anchor" name="executing-selectors"></a>Executing Selectors <a class="permalink" href="#executing-selectors">#</a></h2>
<p>To execute a selector, call it with the <code>await</code> keyword like you would do with regular async functions.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">elementWithId</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">id</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">));</span>

<span class="nx">fixture</span> <span class="err">`</span><span class="nx">My</span> <span class="nx">fixture</span><span class="err">`</span>
    <span class="p">.</span><span class="nx">page</span> <span class="err">`</span><span class="nx">http</span><span class="err">:</span><span class="c1">//www.example.com/`;</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'My test'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">elementWithId</span><span class="p">(</span><span class="s1">'my-button'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><h3><a class="anchor" name="dom-node-snapshots"></a>DOM Node Snapshots <a class="permalink" href="#dom-node-snapshots">#</a></h3>
<p>TestCafe executes tests on the server, so selectors cannot return actual DOM objects to test code.
Instead, they return <em>DOM node snapshots</em> - server-side representation of the node&#39;s state.</p>

<p>A snapshot contains information about the node&#39;s size, position, classes, parent and child nodes, etc.
It exposes <a href="dom-node-snapshots.html">API</a> that is similar to DOM objects.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">expect</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'chai'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">elementWithId</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">id</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">));</span>

<span class="nx">fixture</span> <span class="err">`</span><span class="nx">My</span> <span class="nx">fixture</span><span class="err">`</span>
    <span class="p">.</span><span class="nx">page</span> <span class="err">`</span><span class="nx">http</span><span class="err">:</span><span class="c1">//www.example.com/`;</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'Login field height'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">loginInput</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">elementWithId</span><span class="p">(</span><span class="s1">'login'</span><span class="p">);</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">loginInput</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="mi">95</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">loginInput</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="mi">35</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">loginInput</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s1">'glow'</span><span class="p">)).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">ok</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
<p>For a list of members exposed by DOM node snapshots, see <a href="dom-node-snapshots.html">DOM Node Snapshots</a>.</p>
<h4><a class="anchor" name="snapshot-api-shorthands"></a>Snapshot API Shorthands <a class="permalink" href="#snapshot-api-shorthands">#</a></h4>
<p>Selectors and promises returned by selectors expose snapshot API directly (except for
snapshot&#39;s <code>getChildElement</code>, <code>getChildNode</code> and <code>getParentNode</code> methods).
This is convenient when you need to use only one snapshot property or method.
In this instance, you save a line of code, because you do not need to obtain and save the snapshot object explicitly.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">expect</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'chai'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">loginInput</span>    <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="s1">'#login-box'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">elementWithId</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">id</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">));</span>

<span class="nx">fixture</span> <span class="err">`</span><span class="nx">My</span> <span class="nx">fixture</span><span class="err">`</span>
    <span class="p">.</span><span class="nx">page</span><span class="p">(</span><span class="s1">'http://www.example.com/'</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'Login field height'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">await</span> <span class="nx">loginInput</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="mi">95</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">await</span> <span class="nx">elementWithId</span><span class="p">(</span><span class="s1">'password-box'</span><span class="p">).</span><span class="nx">offsetHeight</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="mi">35</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Note that snapshot methods and property getters exposed through selectors are asynchronous.</p>
<h3><a class="anchor" name="selector-timeout"></a>Selector Timeout <a class="permalink" href="#selector-timeout">#</a></h3>
<p>When a selector is called in test code, TestCafe waits for the target node to appear
in the DOM within the <em>selector timeout</em>.</p>

<p>You can specify the selector timeout in test code by using the <a href="selector-options.html#optionstimeout">timeout</a> option.
To set this timeout when launching tests, pass it to the <a href="../../using-testcafe/programming-interface/runner.html#run">runner.run</a>
method if you use API or specify the <a href="../../using-testcafe/command-line-interface.html#--selector-timeout-ms">selector-timeout</a> option
if you run TestCafe from the command line.</p>

<p>Within the selector timeout, the selector is executed over and over again, until it returns a
DOM node or the timeout exceeds.</p>

<p>Note that you can additionally require that the node returned by the selector is visible.
To do this, use the <a href="selector-options.html#optionsvisibilitycheck">visibilityCheck</a> option.</p>
<h2><a class="anchor" name="one-time-selection"></a>One-Time Selection <a class="permalink" href="#one-time-selection">#</a></h2>
<p>To create a selector and immediately execute it without saving it,
use the <code>select</code> method of the <a href="../test-code-structure.html#test-controller">test controller</a>.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">t.select( init [, options] )
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>init</code></td>
<td>Function &#124; String &#124; Selector &#124; Snapshot &#124; Promise</td>
<td>Identifies a DOM node to be selected. See <a href="#selector-initializers">Selector Initializers</a>.</td>
</tr>
<tr>
<td><code>options</code>&#160;<em>(optional)</em></td>
<td>Object</td>
<td>See <a href="selector-options.html">Options</a>.</td>
</tr>
</tbody></table>

<p>The following example shows how to get a DOM element by ID with <code>t.select</code>.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">fixture</span> <span class="err">`</span><span class="nx">My</span> <span class="nx">fixture</span><span class="err">`</span>
    <span class="p">.</span><span class="nx">page</span> <span class="err">`</span><span class="nx">http</span><span class="err">:</span><span class="c1">//www.example.com/`;</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'My Test'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">header</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">t</span><span class="p">.</span><span class="nx">select</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'header'</span><span class="p">));</span>
<span class="p">});</span>
</code></pre></div><h2><a class="anchor" name="using-selectors-to-define-action-targets"></a>Using Selectors to Define Action Targets <a class="permalink" href="#using-selectors-to-define-action-targets">#</a></h2>
<p>You can pass selectors to <a href="../actions/">test actions</a> to use the returned element as the action target.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="nx">fixture</span> <span class="err">`</span><span class="nx">My</span> <span class="nx">fixture</span><span class="err">`</span>
    <span class="p">.</span><span class="nx">page</span> <span class="err">`</span><span class="nx">http</span><span class="err">:</span><span class="c1">//www.example.com/`;</span>

<span class="kr">const</span> <span class="nx">lastItem</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'.toc-item:last-child'</span><span class="p">));</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'My Test'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">await</span> <span class="nx">t</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">lastItem</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>In this instance, the selector will be called with no arguments.</p>

<p>You can also pass a promise returned by a selector if you need to call it with arguments.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">elementWithId</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">id</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">));</span>

<span class="nx">fixture</span> <span class="err">`</span><span class="nx">My</span> <span class="nx">fixture</span><span class="err">`</span>
    <span class="p">.</span><span class="nx">page</span> <span class="err">`</span><span class="nx">http</span><span class="err">:</span><span class="c1">//www.example.com/`;</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'My Test'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">await</span> <span class="nx">t</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">elementWithId</span><span class="p">(</span><span class="s1">'submit-button'</span><span class="p">));</span>
<span class="p">});</span>
</code></pre></div>
<p>DOM element snapshots can also be passed to test actions.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">elementWithId</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">id</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">));</span>

<span class="nx">fixture</span> <span class="err">`</span><span class="nx">My</span> <span class="nx">fixture</span><span class="err">`</span>
    <span class="p">.</span><span class="nx">page</span> <span class="err">`</span><span class="nx">http</span><span class="err">:</span><span class="c1">//www.example.com/`;</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'My Test'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">topMenuSnapshot</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">elementWithId</span><span class="p">(</span><span class="s1">'top-menu'</span><span class="p">);</span>

    <span class="nx">await</span> <span class="nx">t</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">topMenuSnapshot</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>In this instance, the selector that was used to fetch this snapshot will be called once again.</p>

<p>Before executing an action, TestCafe waits for the target element to appear
in the DOM and become visible. If this does not happen
within the <a href="#selector-timeout">selector timeout</a>, the test fails.</p>
<h2><a class="anchor" name="calling-selectors-from-nodejs-callbacks"></a>Calling Selectors from Node.js Callbacks <a class="permalink" href="#calling-selectors-from-nodejs-callbacks">#</a></h2>
<p>Selectors need access to the <a href="../test-code-structure.html#test-controller">test controller</a> to be executed.
When called right from the test function, they implicitly obtain the test controller.</p>

<p>However, if you need to call a selector from a Node.js callback that fires during the test run,
you have to manually bind it to the test controller.</p>

<p>Use the <a href="selector-options.html#optionsboundtestrun">boundTestRun</a> option for this.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">http</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'http'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">expect</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'chai'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="nx">fixture</span> <span class="err">`</span><span class="nx">My</span> <span class="nx">fixture</span><span class="err">`</span>
    <span class="p">.</span><span class="nx">page</span> <span class="err">`</span><span class="nx">http</span><span class="err">:</span><span class="c1">//www.example.com/`;</span>

<span class="kr">const</span> <span class="nx">elementWithId</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="nx">id</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">));</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'Title changed'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">boundSelector</span> <span class="o">=</span> <span class="nx">elementWithId</span><span class="p">.</span><span class="kd">with</span><span class="p">({</span> <span class="na">boundTestRun</span><span class="p">:</span> <span class="nx">t</span> <span class="p">});</span>

    <span class="c1">// Performs an HTTP request that changes the article title on the page.</span>
    <span class="c1">// Resolves to a value indicating whether the title has been changed.</span>
    <span class="kr">const</span> <span class="nx">match</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="cm">/* request options */</span><span class="p">,</span> <span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">===</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">boundSelector</span><span class="p">(</span><span class="s1">'article-title'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">titleEl</span> <span class="o">=&gt;</span> <span class="p">{</span>
                    <span class="nx">resolve</span><span class="p">(</span><span class="nx">titleEl</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">===</span> <span class="s1">'New title'</span><span class="p">);</span>
                <span class="p">});</span>
            <span class="p">}</span>
        <span class="p">});</span>

        <span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">title</span><span class="p">)</span>
        <span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
    <span class="p">});</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">match</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="kc">true</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
<p>This approach only works for Node.js callbacks that fire during the test run. To ensure that the test function
does not finish before the callback is executed, suspend the test until the callback fires. You can do this
by introducing a promise and synchronously waiting for it to complete as shown in the example above.</p>
<h2><a class="anchor" name="limitations"></a>Limitations <a class="permalink" href="#limitations">#</a></h2>
<ul>
<li><p>You cannot use generators or <code>async/await</code> syntax within selectors.</p></li>
<li><p>Selectors cannot access variables defined in the outer scope in test code.
However, you can use arguments to pass data inside the selectors, except for those that are self-invoked.
They cannot take any parameters from the outside.</p>

<p>Likewise, the return value is the only way to obtain data from selectors.</p></li>
</ul>


		</div>
	</article>
</main>
</div>

      <div class="push"></div>
    </div>

    <footer class="site-footer">
    <div class="site-footer-content">
        <div class="footer-col-1">
            <p><strong>TestCafe</strong>: Automated browser testing for the modern web development stack<br/>
            Copyright © 1998-2016 Developer Express Inc.</p>
        </div>
    </div>
</footer>


  </body>

</html>
