<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <title>Intercepting HTTP Requests | TestCafe</title>

  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  
  <meta property="og:image" content="https://raw.githubusercontent.com/DevExpress/testcafe-gh-page-assets/master/src/images/testcafe-ogp-icon.png">
  <meta property="og:type" content="website" />
  <meta property="og:url" content="http://devexpress.github.io/testcafe/documentation/test-api/intercepting-http-requests/" />
  <meta property="og:title" content="Intercepting HTTP Requests | TestCafe" />

  <link rel="shortcut icon" href="/testcafe/favicon.ico">
  <link rel="stylesheet" href="/testcafe/css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/docco.min.css">
  <link rel="canonical" href="http://devexpress.github.io/testcafe/documentation/test-api/intercepting-http-requests/">
  <link rel="alternate" type="application/rss+xml" title="TestCafe" href="http://devexpress.github.io/testcafe/feed.xml">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
  <script defer src="https://buttons.github.io/buttons.js"></script>
  <script defer type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.3.min.js"></script>
  <script src="/testcafe/scripts/mobile-detect.min.js" type="text/javascript"></script>
  <script>
      document.addEventListener('DOMContentLoaded', function (e) {
          hljs.initHighlightingOnLoad();
      });
  </script>

  
  <script>
    // Google Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-83678642-1', 'auto');
    ga('send', 'pageview');
  </script>
  

  
  
  

  <script>
    (function () {
        var VISIT_DAY = {
            first: 1,
            second: 2,
            more: 3
        };

        var isLandingPage = false;
        var isGettingStarted = false;
        var isDocumentation = true;

        function updateVisitDay () {
            var FIRST_VISIT_DAY_ITEM_NAME = 'first-visit-day';
            var SECOND_VISIT_DAY_ITEM_NAME = 'second-visit-day';
            var DIFFERENT_VISITS_DELAY = 12 * 60 * 60 * 1000; 
            
            // TODO: ignore old visits
            var now = Date.now();
            var firstVisit = window.localStorage.getItem(FIRST_VISIT_DAY_ITEM_NAME);
            var secondVisit = window.localStorage.getItem(SECOND_VISIT_DAY_ITEM_NAME);

            if(!firstVisit) {
                window.localStorage.setItem(FIRST_VISIT_DAY_ITEM_NAME, now);
                return VISIT_DAY.first;
            }

            firstVisit = parseInt(firstVisit);

            if(!secondVisit) {
                if(!isLandingPage && now - firstVisit >=DIFFERENT_VISITS_DELAY) {
                    window.localStorage.setItem(SECOND_VISIT_DAY_ITEM_NAME, now);
                    return VISIT_DAY.second;
                }

                return VISIT_DAY.first;
            }
            
            secondVisit = parseInt(secondVisit);

            return now - secondVisit >= DIFFERENT_VISITS_DELAY ? VISIT_DAY.more : VISIT_DAY.second;
        }

        window.needShowShareWidget = function () {
            if(!isDocumentation || isGettingStarted)
                return false;

            var visitDay = updateVisitDay();

            return visitDay === VISIT_DAY.more;
        };
    })();
  </script>

  

  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.12/css/perfect-scrollbar.min.css">
    <style>
        .ps-container > .ps-scrollbar-x-rail,
        .ps-container > .ps-scrollbar-y-rail {
            opacity: 0.6;
        }
    </style>
    <script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.12/js/perfect-scrollbar.min.js"></script>
    <script defer type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.3.min.js"></script>
    <script defer src="/testcafe/scripts/widget.js" type="text/javascript"></script>

    <script>
        var MIN_BODY_WIDTH = 1230;
        var FOOTER_HEIGHT  = 113;
        var HEADER_HEIGHT  = 126;

        var nav            = null;
        var article        = null;
        var md             = new MobileDetect(window.navigator.userAgent);
        var isMobileDevice = !!md.mobile();

        function setNavTopPosition () {
            var isMobileZoomed = isMobileDevice && window.innerWidth !== document.body.scrollWidth;
            var top            = null;

            if(isMobileDevice) {
                top = window.pageYOffset >= HEADER_HEIGHT ? window.pageYOffset - HEADER_HEIGHT + 'px' : '0';

                if (nav.style.paddingTop !== top) {
                    nav.style.paddingTop = top;
                    Ps.update(nav);
                }

                return;
            }

            if (document.body.clientWidth > MIN_BODY_WIDTH) {
                if (nav.style.top !== HEADER_HEIGHT + 'px') {
                    nav.style.top = HEADER_HEIGHT + 'px';
                    Ps.update(nav);
                }
            }
            else if(!isMobileZoomed) {
                top = window.pageYOffset <= HEADER_HEIGHT ? HEADER_HEIGHT - window.pageYOffset + 'px' : '0';

                if (nav.style.top !== top) {
                    nav.style.top = top;
                    Ps.update(nav);
                }
            }
        }

        function setNavBottomPosition () {
            var footerVisibleHeight = FOOTER_HEIGHT - document.body.scrollHeight + window.pageYOffset +
                                      document.body.clientHeight;

            if (footerVisibleHeight > 0) {
                if (nav.style.bottom !== footerVisibleHeight + 'px') {
                    nav.style.bottom = footerVisibleHeight + 'px';
                    Ps.update(nav);
                }
            }
            else if (nav.style.bottom !== '0') {
                nav.style.bottom = '0';
                Ps.update(nav);
            }
        }

        function updatePosition () {
            if (isMobileDevice)
                changeBodyHeight();
            else
                nav.style.marginLeft = '-' + window.pageXOffset + 'px';

            setNavBottomPosition();
            setNavTopPosition();
        }

        function changeBodyHeight () {
            if (document.body.style.height !== window.innerHeight + 'px')
                document.body.style.height = window.innerHeight + 'px';
        }

        function initScrollBar() {
            Ps.initialize(nav);

            window.addEventListener('resize', function () {
                Ps.update(nav);
            });
        }

        function initNav() {
            if(isMobileDevice) {
                nav.style.position = 'relative';
                nav.style.float = 'left';
                nav.style.top = '0px';

                article.style.marginTop = '0px';
                article.style.paddingTop = '22px';
            }

            initScrollBar();
            updatePosition();
            window.addEventListener('scroll', updatePosition);
            window.addEventListener('resize', updatePosition);

            if(isMobileDevice) {
                nav.style.height = window.innerHeight + 'px';
            }
        }

        document.addEventListener('DOMContentLoaded', function (e) {
            nav     = document.querySelector('.doc-nav');
            article = document.querySelector('.doc');

            if(nav)
                initNav(nav);
        });
    </script>
  
    <script>
        function initHeader(siteHeader, contentWrapper, docTopMenu, article, gs) {
            var MIN_BODY_WIDTH = 1230;

            function updateHeader() {
                var bodyMinimized = document.body.clientWidth === MIN_BODY_WIDTH;

                

                siteHeader.style.position = bodyMinimized ? 'static' : '';

                if(docTopMenu)
                    docTopMenu.style.position = bodyMinimized ? 'static' : '';

                if(contentWrapper)
                    contentWrapper.style.paddingTop = bodyMinimized ? '0' : '';

                if(article)
                    article.style.marginTop = bodyMinimized ? '21px' : '72px';
 
                if(gs)
                    gs.style.paddingTop = bodyMinimized ? '21px' : '72px';
            }

            updateHeader();
            window.addEventListener('scroll', updateHeader);
            window.addEventListener('resize', updateHeader);
        }
        document.addEventListener('DOMContentLoaded', function (e) {
            var contentWrapper = document.querySelector('.container');
            var siteHeader     = document.querySelector('.site-header');
            var docTopMenu     = document.querySelector('.doc-top-nav');
            var article        = document.querySelector('.doc');
            var gs             = document.querySelector('.gs');

            if(siteHeader) 
                initHeader(siteHeader, contentWrapper, docTopMenu, article, gs);
        });
    </script>
</head>


  <body>
    <div class="page-content-wrapper">

      <header class="site-header fixed">
  <div class="site-header-content">
    <a class="site-logo" href="/testcafe/"></a>
    <nav class="site-nav">
        
          
          <div class="site-nav-tab active">
            <a class="page-link" href="/testcafe/documentation/getting-started/">Documentation</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="https://github.com/DevExpress/testcafe" target="_blank">GitHub</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="/testcafe/faq/">FAQ</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="/testcafe/publications/">Publications</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="/testcafe/blog/">Release Notes</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="https://github.com/DevExpress/testcafe/issues" target="_blank">Issues</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="https://stackoverflow.com/questions/tagged/testcafe" target="_blank">Q&amp;A</a>
          </div>
        
      <a id="twitter-button" href="https://twitter.com/dxtestcafe" target="_blank"></a>
      <div id="search-icon"></div>
      <div class="star-button">
        <a class="github-button" href="https://github.com/DevExpress/testcafe" data-size="large" data-count-href="/DevExpress/testcafe/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star DevExpress/testcafe on GitHub"><span style="color:#ffffff">Star</span></a>
      </div>
      <div id="search-panel" class="hidden">
          <input type="text" placeholder="Search query" id="search"/>
          <div id="close-search"></div>
      </div>
      </nav>
  </div>
</header>

<script>
  function has(parentEl, el)  {
    var descendants = parentEl.getElementsByTagName('*');
    
    for(i = 0; i < descendants.length; i++) 
        if(descendants[i] === el) return true;

    return false;
  }

  function closeSearchBox(e) {
      var clickOutsideSearchBox = searchPanel !== e.target && !has(searchPanel, e.target);

      if(clickOutsideSearchBox && searchPanel.className.indexOf('hidden') === -1) 
          searchPanel.className += ' hidden';
  }

  var searchButton      = document.querySelector('#search-icon');
  var searchPanel       = document.querySelector('#search-panel');
  var searchInput       = document.querySelector('#search');
  var closeSearchButton = document.querySelector('#close-search');

  searchButton.addEventListener('click', function () {
      searchPanel.className = searchPanel.className.replace(/hidden/,'');
      searchInput.focus();      
  });
  
  closeSearchButton.addEventListener('click', function () {
      searchPanel.className += ' hidden';
  });

  window.addEventListener('mousedown', closeSearchBox);        
  window.addEventListener('touchstart', closeSearchBox);
</script>


  <div class="doc-top-nav">
    <div class="doc-top-nav-content">
      <div class="doc-top-nav-wrapper">
        
          <div class="doc-top-nav-tab " >
            <a href="/testcafe/documentation/getting-started/">Getting Started</a>      
          </div>
        
          <div class="doc-top-nav-tab " >
            <a href="/testcafe/documentation/using-testcafe/">Using TestCafe</a>      
          </div>
        
          <div class="doc-top-nav-tab active" >
            <a href="/testcafe/documentation/test-api/">Test API</a>      
          </div>
        
          <div class="doc-top-nav-tab " >
            <a href="/testcafe/documentation/extending-testcafe/">Extending TestCafe</a>      
          </div>
        
          <div class="doc-top-nav-tab " >
            <a href="/testcafe/documentation/recipes/">Recipes</a>      
          </div>
        
      </div>
    </div>
  </div>



      <div class="container">
    
	
	

	
	

	
	
	<nav class="doc-nav">	
		<div class="doc-nav-content">
			<ul>
				<li>
				<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/typescript-support.html"  >TypeScript Support</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html"  >Test Code Structure</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#fixtures"  >Fixtures</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#tests"  >Tests</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#test-controller"  >Test Controller</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#setting-test-speed"  >Setting Test Speed</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#specifying-the-start-webpage"  >Specifying the Start Webpage</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#specifying-testing-metadata"  >Specifying Testing Metadata</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#using-metadata-in-reports"  >Using Metadata in Reports</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#initialization-and-clean-up"  >Initialization and Clean-Up</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#test-hooks"  >Test Hooks</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#fixture-hooks"  >Fixture Hooks</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/test-code-structure.html#skipping-tests"  >Skipping Tests</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/"  >Selecting Page Elements</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors/"  >Selectors</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors/creating-selectors.html"  >Creating Selectors</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors/using-selectors.html"  >Using Selectors</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors/functional-style-selectors.html"  >Functional-Style Selectors</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors/selector-options.html"  >Selector Options</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors/extending-selectors.html"  >Extending Selectors</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/selectors/edge-cases-and-limitations.html"  >Edge Cases and Limitations</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/dom-node-state.html"  >DOM Node State</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/framework-specific-selectors.html"  >Framework-Specific Selectors</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/selecting-page-elements/examples-of-working-with-dom-elements.html"  >Examples of Working with DOM Elements</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/"  >Actions</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/click.html"  >Click</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/double-click.html"  >Double Click</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/right-click.html"  >Right Click</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/drag-element.html"  >Drag Element</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/hover.html"  >Hover</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/select-text.html"  >Select Text</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/type-text.html"  >Type Text</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/press-key.html"  >Press Key</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/navigate.html"  >Navigate</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/take-screenshot.html"  >Take Screenshot</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/upload.html"  >Upload</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/resize-window.html"  >Resize Window</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/actions/action-options.html"  >Action Options</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/assertions/"  >Assertions</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/assertions/assertion-api.html"  >Assertion API</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/obtaining-data-from-the-client/"  >Obtaining Data from the Client</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/obtaining-data-from-the-client/examples-of-using-client-functions.html"  >Examples of Using Client Functions</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/intercepting-http-requests/" class="active" >Intercepting HTTP Requests</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/intercepting-http-requests/logging-http-requests.html"  >Logging HTTP Requests</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/intercepting-http-requests/mocking-http-responses.html"  >Mocking HTTP Responses</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/intercepting-http-requests/creating-a-custom-http-request-hook.html"  >Creating a Custom HTTP Request Hook</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/intercepting-http-requests/specifying-which-requests-are-handled-by-the-hook.html"  >Specifying Which Requests are Handled by the Hook</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/intercepting-http-requests/attaching-hooks-to-tests-and-fixtures.html"  >Attaching Hooks to Tests and Fixtures</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/intercepting-http-requests/requestoptions-object.html"  >requestOptions Object</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/waiting-for-page-elements-to-appear.html"  >Waiting for Page Elements to Appear</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/authentication/"  >Authentication</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/authentication/user-roles.html"  >User Roles</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/authentication/http-authentication.html"  >HTTP Authentication</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/pausing-the-test.html"  >Pausing the Test</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/handling-native-dialogs.html"  >Handling Native Dialogs</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/working-with-iframes.html"  >Working with &lt;iframes&gt;</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/debugging.html"  >Debugging</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/accessing-console-messages.html"  >Accessing Console Messages</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/test-api/a-z.html"  >A-Z Index</a>
		
    </li>

</ul>
				</li>
			</ul>
		</div>
	</nav>
	

	
	

	
	
	


<main>
	<article class="doc">
		<div class="post-content">

			<h1>Intercepting HTTP Requests</h1>
<p>This section describes how to handle HTTP requests in your tests. TestCafe allows you to log them and mock the responses out of the box. You can also create a custom HTTP request hook, which allows you, for instance, to emulate authentications like <strong>Kerberos</strong> or <strong>Client Certificate Authentication</strong>.</p>

<ul>
<li><a href="logging-http-requests.html">Logging HTTP Requests</a></li>
<li><a href="mocking-http-responses.html">Mocking HTTP Responses</a></li>
<li><a href="creating-a-custom-http-request-hook.html">Creating a Custom HTTP Request Hook</a></li>
<li><a href="specifying-which-requests-are-handled-by-the-hook.html">Specifying Which Requests are Handled by the Hook</a></li>
<li><a href="attaching-hooks-to-tests-and-fixtures.html">Attaching Hooks to Tests and Fixtures</a></li>
</ul>
<h2><a class="anchor" name="logging-http-requests"></a>Logging HTTP Requests <a class="permalink" href="#logging-http-requests">#</a></h2>
<p>You can use the request logger to record HTTP requests the tested web app sends and responses it receives. For instance, you may want to make sure that the data from a remote service is correct. In this example, the test checks the DevExpress grid control&#39;s data.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span><span class="p">,</span> <span class="nx">RequestLogger</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">fs</span> <span class="nx">from</span> <span class="s1">'fs'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">path</span> <span class="nx">from</span> <span class="s1">'path'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">'https://demos.devexpress.com/ASPxGridViewDemos/Exporting/Exporting.aspx'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">RequestLogger</span><span class="p">({</span> <span class="nx">url</span><span class="p">,</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span> <span class="p">},</span> <span class="p">{</span>
    <span class="na">logResponseHeaders</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">logResponseBody</span><span class="p">:</span>    <span class="kc">true</span>
<span class="p">});</span>

<span class="nx">fixture</span> <span class="err">`</span><span class="nx">Export</span><span class="err">`</span>
    <span class="p">.</span><span class="nx">page</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">requestHooks</span><span class="p">(</span><span class="nx">logger</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'export to csv'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">exportToCSVButton</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="s1">'span'</span><span class="p">).</span><span class="nx">withText</span><span class="p">(</span><span class="s1">'Export to CSV'</span><span class="p">);</span>

    <span class="nx">await</span> <span class="nx">t</span>
        <span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">exportToCSVButton</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="nx">logger</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">r</span> <span class="o">=&gt;</span> <span class="nx">r</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">===</span> <span class="mi">200</span><span class="p">)).</span><span class="nx">ok</span><span class="p">();</span>

    <span class="c1">// After clicking 'Export', the response comes as a gziped CSV.</span>
    <span class="c1">// The browser unpacks the archive and gives you the file that was inside.</span>
    <span class="c1">// The test receives the archive as is.</span>
    <span class="kr">const</span> <span class="nx">filePath</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">'exported-grid.zip'</span><span class="p">);</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">filePath</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">logger</span><span class="p">.</span><span class="nx">requests</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">);</span>

    <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="nx">filePath</span><span class="p">,</span> <span class="nx">logger</span><span class="p">.</span><span class="nx">requests</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>

    <span class="c1">// Here you can use 3rd party modules to</span>
    <span class="c1">// unpack the archive, parse CSV and check the data.</span>
    <span class="c1">// Or you can just manually verify the file.</span>
<span class="p">});</span>
</code></pre></div>
<p>See <a href="logging-http-requests.html">Logging HTTP Requests</a> for more information.</p>
<h2><a class="anchor" name="mocking-http-responses"></a>Mocking HTTP Responses <a class="permalink" href="#mocking-http-responses">#</a></h2>
<p>Use TestCafe request mocker to substitute infrastructure that is difficult to deploy or that you do not want to use when testing. This can be a third-party service that charges you per pageview or an analytics service that should not log page views tests generate.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span><span class="p">,</span> <span class="nx">RequestMock</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="c1">// A URL to which Google Analytics sends data.</span>
<span class="kr">const</span> <span class="nx">collectDataGoogleAnalyticsRegExp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">'https://www.google-analytics.com/collect'</span><span class="p">);</span>

<span class="c1">// Technically, Google Analytics sends an XHR request for a GIF image.</span>
<span class="c1">// So, we prepare a mocked response with binary data.</span>
<span class="kr">const</span> <span class="nx">mockedResponse</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">from</span><span class="p">([</span><span class="mh">0x47</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x46</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x39</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">]);</span>

<span class="kr">const</span> <span class="nx">mock</span> <span class="o">=</span> <span class="nx">RequestMock</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">onRequestTo</span><span class="p">(</span><span class="nx">collectDataGoogleAnalyticsRegExp</span><span class="p">)</span>

    <span class="c1">// We respond to Analytics requests with the prepared data</span>
    <span class="c1">// represented as a GIF image and change the status code to 202.</span>
    <span class="p">.</span><span class="nx">respond</span><span class="p">(</span><span class="nx">mockedResponse</span><span class="p">,</span> <span class="mi">202</span><span class="p">,</span> <span class="p">{</span>
        <span class="s1">'content-length'</span><span class="p">:</span> <span class="nx">mockedResponse</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
        <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'image/gif'</span>
    <span class="p">});</span>

<span class="nx">fixture</span> <span class="err">`</span><span class="nx">Fixture</span><span class="err">`</span>
    <span class="p">.</span><span class="nx">page</span><span class="p">(</span><span class="s1">'https://devexpress.github.io/testcafe/'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">requestHooks</span><span class="p">(</span><span class="nx">mock</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'basic'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">await</span> <span class="nx">t</span>
        <span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">'.get-started-button'</span><span class="p">)</span>

        <span class="c1">// During the pause, you can open DevTools and</span>
        <span class="c1">// find the request sent to Analytics</span>
        <span class="c1">// and the mocked response received.</span>
        <span class="p">.</span><span class="nx">debug</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>
<p>See <a href="mocking-http-responses.html">Mocking HTTP Responses</a> for more information.</p>
<h2><a class="anchor" name="creating-a-custom-http-request-hook"></a>Creating a Custom HTTP Request Hook <a class="permalink" href="#creating-a-custom-http-request-hook">#</a></h2>
<p>You can create your own request hook to handle HTTP requests.</p>

<p>The example below shows a custom hook that adds the <code>Authorization</code> header for <a href="https://tools.ietf.org/html/rfc7519">JWT</a> bearer authorization.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Selector</span><span class="p">,</span> <span class="nx">RequestHook</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'testcafe'</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">JwtBearerAuthorization</span> <span class="kr">extends</span> <span class="nx">RequestHook</span> <span class="p">{</span>
    <span class="nx">constructor</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// No URL filtering applied to this hook</span>
        <span class="c1">// so it will be used for all requests.</span>
        <span class="kr">super</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="nx">onRequest</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">requestOptions</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'generate token here'</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">jwtBearerAuthorization</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">JwtBearerAuthorization</span><span class="p">();</span>

<span class="nx">fixture</span> <span class="err">`</span><span class="nx">Fixture</span><span class="err">`</span>
    <span class="p">.</span><span class="nx">page</span><span class="p">(</span><span class="s1">'&lt;website URL&gt;'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">requestHooks</span><span class="p">(</span><span class="nx">jwtBearerAuthorization</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'basic'</span><span class="p">,</span> <span class="nx">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="cm">/* some actions */</span>
<span class="p">});</span>
</code></pre></div>
<p>See <a href="creating-a-custom-http-request-hook.html">Creating a Custom HTTP Request Hook</a> for more information.</p>


		</div>
		<div class="widget-container hidden">
			<div id="share-button">
				<div id="graph-icon">
					<img src="/testcafe/images/icon-share.svg"/>
				</div>
				<p>TELL<br/>YOUR<br/>FRIENDS</p>
			</div>
			<div class="widget-panel">
				<div id="tweet">
					<a href="https://twitter.com/intent/tweet?text=Check%20out%20%23TestCafe%20-%20a%20free%20node.js%20tool%20for%20e2e%20testing%20https%3A%2F%2Fdevexpress.github.io%2Ftestcafe%2F"
					onclick="return !window.open(this.href, 'Twitter', 'width=690,height=450')"
					target="_blank">
						<img src="/testcafe/images/icon-tweet.svg"/>
					</a>
				</div>
				<div id="facebook">
					<a href="https://www.facebook.com/sharer/sharer.php?u=https://devexpress.github.io/testcafe/"
					onclick="return !window.open(this.href, 'Facebook', 'width=500,height=500')"
					target="_blank">
						<image src="/testcafe/images/icon-facebook.svg"/>
					</a>
				</div>
				<div id="collapse">
					<img src="/testcafe/images/icon-close.svg"/>
				</div>
			</div>
		</div>
	</article>
</main>
</div>

      <div class="push"></div>
    </div>

    <footer class="site-footer">
    <div class="site-footer-content">
        <div class="footer-col-1">
            <p><strong>TestCafe</strong>: A node.js tool to automate end-to-end web testing<br/>
            Use of this site constitutes acceptance of our <a href="https://www.devexpress.com/aboutus/privacy-policy.xml"  target="_blank">Privacy Policy</a><br/>
            Copyright Â© 2012-2018 Developer Express Inc.</p>
        </div>
    </div>
</footer>


    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript"> var search = docsearch({
     apiKey: '938fb7894c0af8c01af3e2b4c53d4bdd',
     indexName: 'testcafe',
     inputSelector: '#search',
     debug: false // Set debug to true if you want to inspect the dropdown
 });

 search.autocomplete.on('autocomplete:opened', function(e) {
     var searchInput = document.querySelector('#search');
     var dropdown    = document.querySelector('.ds-dropdown-menu');
     
     if(searchInput && dropdown) {
         dropdown.style.maxWidth = "none";
         dropdown.style.width = searchInput.offsetWidth + "px";
     }
 });
</script> 

    <script defer src="/testcafe/scripts/cookie-notice.js" type="text/javascript"></script>
<div class="cookie-notice">
    <div class="close-icon"></div>
    <div class="cookie-notice-content">
        <div class="cookie-notice-message">
            <div class="cookie-notice-header">Why We Use Cookies</div>
            <div class="cookie-notice-text">This site uses cookies to make your browsing experience more convenient and personal. Cookies store useful information on your computer to help us improve the efficiency and relevance of our site for you. In some cases, they are essential to making the site work properly. By accessing this site, you consent to the use of cookies. For more information, refer to DevExpress' <a href="https://www.devexpress.com/AboutUs/privacy-policy.xml" target="_blank">privacy policy</a> and <a href="https://www.devexpress.com/AboutUs/cookie-policy.xml" target="_blank">cookie policy</a>.</div>
        </div>
        <div class="cookie-notice-button">I understand</div>
    </div>
</div>

  </body>

</html>
