<!DOCTYPE html>
<html>

  <head>
  
  
  
  
  
  

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <title>Intercept HTTP Requests | TestCafe</title>

  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">

  <meta property="og:image" content="https://raw.githubusercontent.com/DevExpress/testcafe-gh-page-assets/master/src/images/testcafe-ogp-icon.png">
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://devexpress.github.io/testcafe/documentation/guides/advanced-guides/intercept-http-requests.html" />
  <meta property="og:title" content="Intercept HTTP Requests | TestCafe" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:image" content="https://raw.githubusercontent.com/DevExpress/testcafe-gh-page-assets/master/src/images/testcafe-twitter-card-icon.png" />
  <meta name="twitter:site" content="@DXTestCafe" />
  
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/styles/docco.min.css">
  
  
  <link rel="shortcut icon" href="/testcafe/favicon.ico">
  <link rel="stylesheet" href="/testcafe/css/main.css">
  <link rel="canonical" href="https://devexpress.github.io/testcafe/documentation/guides/advanced-guides/intercept-http-requests.html">
  <link rel="alternate" type="application/rss+xml" title="TestCafe" href="https://devexpress.github.io/testcafe/feed.xml">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
  <link rel="apple-touch-icon" sizes="180x180" href="/testcafe/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/testcafe/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/testcafe/favicon-16x16.png">
  <link rel="manifest" href="/testcafe/site.webmanifest">
  <meta name="msapplication-TileColor" content="#2d89ef">
  <meta name="msapplication-config" content="/testcafe/browserconfig.xml" />
  <meta name="theme-color" content="#ffffff">
  <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/highlight.min.js"></script>
  <script defer src="https://buttons.github.io/buttons.js"></script>
  <script defer type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.3.min.js"></script>
  <script src="/testcafe/scripts/mobile-detect.min.js" type="text/javascript"></script>
  <script>
     var md             = new MobileDetect(window.navigator.userAgent);
     var isMobileDevice = !!md.mobile();
  </script>
  <script>
      var SUMMER_2019_SURVEY_COMPLETED_FLAG        = 'summer-2019-survey-completed';
      var SUMMER_2019_SURVEY_PAGE_OPEN_DATE_FLAG   = 'summer-2019-survey-page-open-date';
      var SUMMER_2019_SURVEY_BANNER_DISMISSED_FLAG = 'summer-2019-survey-banner-dismissed';
  </script>
  <script>
      document.addEventListener('DOMContentLoaded', function (e) {
          hljs.initHighlightingOnLoad();
      });
  </script>

  
  <script>
    // Google Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-83678642-1', 'auto');
    ga('set', 'anonymizeIp', true);
    ga('send', 'pageview');
  </script>
  

  

  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.12/css/perfect-scrollbar.min.css">
  <link rel="stylesheet" href="/testcafe/css/docs.css">
    
  <style>
      .ps-container > .ps-scrollbar-x-rail,
      .ps-container > .ps-scrollbar-y-rail {
          opacity: 0.6;
      }
  </style>
  

  

    

  <script>
    function linkCss (href) {
        var link  = document.createElement('link');
        var html  = document.querySelector('html');
        var head  = document.head;

        link.rel  = 'stylesheet';
        link.type = 'text/css';
        link.href = href;
        link.media = 'all';

        head.appendChild(link);

        window.addEventListener('load', function () {
            html.style.display = 'block';
        });

        html.style.display = 'none';
    }
  </script>
    
    <script>
        if (isMobileDevice) {
            document.addEventListener('DOMContentLoaded', function (e) {
                var siteNav         = document.querySelector('.site-nav');
                var hamburgerButton = document.querySelector('.hamburger-button');

                hamburgerButton.addEventListener('click', function (e) {
                    if (hamburgerButton.className.indexOf('active') !== -1) {
                        hamburgerButton.className = hamburgerButton.className.replace(' active', '');
                        siteNav.className = siteNav.className.replace(' active', '');
                        document.documentElement.style.overflowY = 'scroll';
                        document.body.style.overflowY = 'initial';
                    }
                    else {
                        hamburgerButton.className += ' active';
                        siteNav.className += ' active';
                        document.documentElement.style.overflowY = 'hidden';
                        document.body.style.overflowY = 'hidden';
                    }
                });

                var docTopNav          = document.querySelector('.doc-top-nav');
                var docMenuItem        = document.querySelector('.site-nav-tab');
                var mainMenuSecondItem = document.querySelector('.site-nav-tab:nth-child(2)');

                siteNav.insertBefore(docTopNav, mainMenuSecondItem);
                
                var searchPanel = document.getElementById('search-panel');
                
                siteNav.insertBefore(searchPanel, docMenuItem);

                var docMenuItemIcon = document.createElement('div');

                docMenuItemIcon.className = 'doc-menu-item-icon';
                docMenuItem.appendChild(docMenuItemIcon);

                
                    docMenuItem.className += ' expanded';
                    docTopNav.className += ' expanded';
                

                docMenuItem.addEventListener('click', function (e) {
                    if (docTopNav.className.indexOf('expanded') !== -1) {
                        docMenuItem.className = docMenuItem.className.replace(' expanded', '');
                        docTopNav.className = docTopNav.className.replace(' expanded', '');
                    }
                    else {
                        docMenuItem.className += ' expanded';
                        docTopNav.className += ' expanded';
                    }
                    e.preventDefault();
                });
            });

            linkCss('/testcafe/css/mobile.css');
        }
    </script>

  

  

    

  
    <script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.12/js/perfect-scrollbar.min.js"></script>
    <script defer type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.3.min.js"></script>

    <script>
        var MIN_BODY_WIDTH = 1230;
        var FOOTER_HEIGHT  = 225;

        var nav     = null;
        var article = null;

        function getHeaderHeight () {
            var DOCS_HEADER_HEIGHT   = 126;
            var SURVEY_HEADER_HEIGHT = 32;

            var surveyBanner          = document.querySelector('.survey-banner');
            var isSurveyBannerVisible = surveyBanner && surveyBanner.className.indexOf('hidden') === -1;

            return isSurveyBannerVisible ? DOCS_HEADER_HEIGHT + SURVEY_HEADER_HEIGHT : DOCS_HEADER_HEIGHT;
        }

        function setNavTopPosition () {
            var headerHeight = getHeaderHeight();
            var top          = null;

            if (document.body.clientWidth > MIN_BODY_WIDTH) {
                if (nav.style.top !== headerHeight + 'px') {
                    nav.style.top = headerHeight + 'px';
                    Ps.update(nav);
                }
            }
            else {
                top = window.pageYOffset <= headerHeight ? headerHeight - window.pageYOffset + 'px' : '0';

                if (nav.style.top !== top) {
                    nav.style.top = top;
                    Ps.update(nav);
                }
            }
        }

        function setNavBottomPosition () {
            var footerVisibleHeight = FOOTER_HEIGHT - document.body.scrollHeight + window.pageYOffset +
                                      document.body.clientHeight;

            if (footerVisibleHeight > 0) {
                if (nav.style.bottom !== footerVisibleHeight + 'px') {
                    nav.style.bottom = footerVisibleHeight + 'px';
                    Ps.update(nav);
                }
            }
            else if (nav.style.bottom !== '0') {
                nav.style.bottom = '0';
                Ps.update(nav);
            }
        }

        function updateNavMenuPosition () {
            nav.style.marginLeft = '-' + window.pageXOffset + 'px';

            setNavBottomPosition();
            setNavTopPosition();
        }

        function changeBodyHeight () {
            if (document.body.style.height !== window.innerHeight + 'px')
                document.body.style.height = window.innerHeight + 'px';
        }

        function initScrollBar() {
            Ps.initialize(nav);

            window.addEventListener('resize', function () {
                Ps.update(nav);
            });
        }

        function initNav() {
            initScrollBar();
            updateNavMenuPosition();
            window.addEventListener('scroll', updateNavMenuPosition);
            window.addEventListener('resize', updateNavMenuPosition);
        }

        function scrollToActiveItem() {
            var activeItem = document.querySelector('.doc-nav .active');
            var scrollContainer = document.querySelector('.ps-container');

            if (scrollContainer && activeItem) {
                scrollContainer.scrollTop = activeItem.offsetTop;
            }
        }

        document.addEventListener('DOMContentLoaded', function (e) {
            if (isMobileDevice)
                return;

            nav     = document.querySelector('.doc-nav');
            article = document.querySelector('.doc');

            if (nav)
                initNav(nav);

            scrollToActiveItem();
        });
    </script>
    
    <script>
        if (isMobileDevice) {
            linkCss('/testcafe/css/docs.mobile.css');           
            
            if (false == false) {
                document.addEventListener('DOMContentLoaded', function (e) {
                    var docNavPanel = document.querySelector('.doc-nav-panel');
                    var docNav      = document.querySelector('.doc-nav');

                    docNavPanel.addEventListener('click', function (e) {
                        if (docNav.className.indexOf('active') !== -1) {
                            docNav.className = docNav.className.replace(' active', '');
                            document.documentElement.style.overflowY = 'scroll';
                            document.body.style.overflowY = 'initial';
                        }
                        else {
                            docNav.className += ' active';
                            document.documentElement.style.overflowY = 'hidden';
                            document.body.style.overflowY = 'hidden';
                        }
                    });
                });
            }
        }
    </script>
  
    <script>
        function initHeader(siteHeader, contentWrapper, docTopMenu, article, gs, surveyBanner) {
            var MIN_BODY_WIDTH = 1230;

            function updateHeader() {
                var CONTENT_MARGIN_WITH_DOC_MENU     = '72px';
                var CONTENT_MARGIN_WITHOUT_DOC_MENU  = '21px';
                var CONTENT_MARGIN_COMMUNITY_DESKTOP = '27px';
                var CONTENT_MARGIN_COMMUNITY_MOBILE  = '48px';

                var bodyMinimized          = document.body.clientWidth === MIN_BODY_WIDTH;
                var docContentMargin       = bodyMinimized ? CONTENT_MARGIN_WITHOUT_DOC_MENU : CONTENT_MARGIN_WITH_DOC_MENU;
                var isCommunitySection     = false;
                var contentMarginCommunity = isMobileDevice ? CONTENT_MARGIN_COMMUNITY_MOBILE : CONTENT_MARGIN_COMMUNITY_DESKTOP;
                var contentMargin          = isCommunitySection ? contentMarginCommunity : docContentMargin;

                

                siteHeader.style.position = bodyMinimized ? 'static' : '';

                if(docTopMenu)
                    docTopMenu.style.position = bodyMinimized ? 'static' : '';

                if(surveyBanner)
                    surveyBanner.style.position = bodyMinimized ? 'static' : '';

                if(contentWrapper)
                    contentWrapper.style.paddingTop = bodyMinimized ? '0' : '';

                if(article && !isMobileDevice)
                    article.style.marginTop = contentMargin;
                if(gs && !isMobileDevice)
                    gs.style.paddingTop = contentMargin;
            }

            updateHeader();
            window.addEventListener('scroll', updateHeader);
            window.addEventListener('resize', updateHeader);
        }
        document.addEventListener('DOMContentLoaded', function (e) {
            var contentWrapper = document.querySelector('.container');
            var siteHeader     = document.querySelector('.site-header');
            var docTopMenu     = document.querySelector('.doc-top-nav');
            var article        = document.querySelector('.doc');
            var gs             = document.querySelector('.gs');
            var surveyBanner   = document.querySelector('.survey-banner');

            if(siteHeader)
                initHeader(siteHeader, contentWrapper, docTopMenu, article, gs, surveyBanner);
        });
    </script>
</head>


  <body>

    <script defer src="/testcafe/scripts/cookie-notice.js" type="text/javascript"></script>
<div class="cookie-notice">
    <div class="close-icon"></div>
    <div class="cookie-notice-content">
        <div class="cookie-notice-message">
            <div class="cookie-notice-header">Why We Use Cookies</div>
            <div class="cookie-notice-text">This site uses cookies to make your browsing experience more convenient and personal. Cookies store useful information on your computer to help us improve the efficiency and relevance of our site for you. In some cases, they are essential to making the site work properly. By accessing this site, you consent to the use of cookies. For more information, refer to DevExpress' <a href="https://www.devexpress.com/AboutUs/privacy-policy.xml" target="_blank">privacy policy</a> and <a href="https://www.devexpress.com/AboutUs/cookie-policy.xml" target="_blank">cookie policy</a>.</div>
        </div>
        <div class="cookie-notice-button">I understand</div>
    </div>
</div>

    <div class="page-content-wrapper">

      
<div class="survey-banner hidden">
  <div class="survey-banner-message">
      <span>How do you like TestCafe? </span><span class="desktop-text">Please take 3 minutes to fill out our survey. </span><a href="https://dxpr.es/2WYA3X4" target="_blank"><span class="desktop-text">Take the survey</span><span class="mobile-text">Take a 3-minute survey.</span></a>
  </div>
  <div class="survey-banner-close-button"></div>
</div>
<script>
  var SURVEY_BANNER_DISPLAY_SETBACK_DAYS = 7;

  function getDaysBetween(fromTime, toTime) {
      var dayDurationMs = 24*60*60*1000;

      return Math.round(Math.abs((fromTime - toTime)/(dayDurationMs)));
  }

  var wasSurveyBannerDismissed = window.localStorage.getItem(SUMMER_2019_SURVEY_BANNER_DISMISSED_FLAG);
  var wasSurveyCompleted       = window.localStorage.getItem(SUMMER_2019_SURVEY_COMPLETED_FLAG);
  var surveyOpenDate           = window.localStorage.getItem(SUMMER_2019_SURVEY_PAGE_OPEN_DATE_FLAG);
  var surveySetbackExpired     = !surveyOpenDate || (getDaysBetween(surveyOpenDate, Date.now()) > SURVEY_BANNER_DISPLAY_SETBACK_DAYS);

  if(!wasSurveyBannerDismissed && !wasSurveyCompleted && surveySetbackExpired) {
      var surveyBanner      = document.querySelector('.survey-banner');
      var surveyLink        = document.querySelector('.survey-banner a');
      var surveyBannerClose = document.querySelector('.survey-banner-close-button');

      function hideSurveyBanner() {
          surveyBanner.className = surveyBanner.className += ' hidden';

          if (!isMobileDevice)
              updateNavMenuPosition();
      }

      surveyBanner.className = surveyBanner.className.replace(/hidden/,'');

      surveyBannerClose.addEventListener('click', function () {
          hideSurveyBanner();
          window.localStorage.setItem(SUMMER_2019_SURVEY_BANNER_DISMISSED_FLAG, true);
      });

      surveyLink.addEventListener('click', function () {
          hideSurveyBanner();
      });
  }
</script>

<header class="site-header fixed">
  <div class="site-header-content">
    <a class="site-logo" href="/testcafe/"></a>
    <div class="hamburger-button">
        <div class="hamburger-icon"></div>
    </div>
    <nav class="site-nav">
      
        
        <div class="site-nav-tab active">
          <a class="page-link" href="/testcafe/documentation/getting-started/"><span>Docs</span></a>
        </div>
      
        
        <div class="site-nav-tab">
          <a class="page-link" href="/testcafe/media/team-blog/"><span>Blog</span></a>
        </div>
      
        
        <div class="site-nav-tab">
          <a class="page-link" href="/testcafe/faq/"><span>FAQ</span></a>
        </div>
      
        
        <div class="site-nav-tab">
          <a class="page-link" href="/testcafe/support/"><span>Support</span></a>
        </div>
      
        
        <div class="site-nav-tab">
          <a class="page-link" href="/testcafe/release-notes/"><span>Release Notes</span></a>
        </div>
      
        
        <div class="site-nav-tab" id="studio-link-tab">
          <a class="page-link" id="studio-link" href="https://www.devexpress.com/products/testcafestudio/" target="_blank"><span>TestCafe Studio</span></a>
        </div>
      
    </nav>
    <div class="site-header-buttons">
      <a id="twitter-button" href="https://twitter.com/dxtestcafe" target="_blank"></a>
      <div id="search-icon"></div>
      <div class="star-button">
        <a class="github-button" href="https://github.com/DevExpress/testcafe" data-size="large" data-count-href="/DevExpress/testcafe/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star DevExpress/testcafe on GitHub"><span style="color:#ffffff">Star</span></a>
      </div>
      <div id="search-panel" class="hidden">
          <input type="text" placeholder="Search documentation" id="search"/>
          <div id="close-search"></div>
      </div>
    </div>
  </div>
</header>

<script>
  function has(parentEl, el)  {
    var descendants = parentEl.getElementsByTagName('*');
    
    for(i = 0; i < descendants.length; i++) 
        if(descendants[i] === el) return true;

    return false;
  }

  function clickOutsideBox(e, box) {
      return box !== e.target && !has(box, e.target);
  }  

  function closeSearchBox(e) {
      if(clickOutsideBox(e, searchPanel) && searchPanel.className.indexOf('hidden') === -1) 
          searchPanel.className += ' hidden';
  }

  var searchButton      = document.getElementById('search-icon');
  var searchPanel       = document.getElementById('search-panel');
  var searchInput       = document.getElementById('search');
  var closeSearchButton = document.getElementById('close-search');

  searchButton.addEventListener('click', function () {
      searchPanel.className = searchPanel.className.replace(/hidden/,'');
      searchInput.focus();      
  });
  
  closeSearchButton.addEventListener('click', function () {
      searchPanel.className += ' hidden';
  });

  window.addEventListener('mousedown', closeSearchBox);        
  window.addEventListener('touchstart', closeSearchBox);

  if (window.isMobileDevice) {
      function closeHamburgerMenuBox(e) {
          if(clickOutsideBox(e, hamburgerMenu) && clickOutsideBox(e, hamburgerButton) && hamburgerMenu.className.indexOf('active') !== -1) {
              hamburgerMenu.className = hamburgerMenu.className.replace(' active', '');
              hamburgerButton.className = hamburgerButton.className.replace(' active', '');
              document.documentElement.style.overflowY = 'scroll';
              document.body.style.overflowY = 'initial';
          }
      }

      var hamburgerMenu = document.querySelector('.site-nav');
      var hamburgerButton = document.querySelector('.hamburger-button');

      window.addEventListener('mousedown', closeHamburgerMenuBox);        
      window.addEventListener('touchstart', closeHamburgerMenuBox);

      window.addEventListener('DOMContentLoaded', function (e) {
          var docNav = document.querySelector('.doc-nav');

          if(docNav) {
              function closeDocNav() {
                  docNav.className = docNav.className.replace(' active', '');
                  document.documentElement.style.overflowY = 'scroll';
                  document.body.style.overflowY = 'initial';
              }

              function clickWithDocNavInvoked(e) {
                  if(clickOutsideBox(e, docNav) && clickOutsideBox(e, docNavPanel) && docNav.className.indexOf('active') !== -1) 
                      closeDocNav();
              }

              var docNavPanel = document.querySelector('.doc-nav-panel');

              window.addEventListener('mousedown', clickWithDocNavInvoked);        
              window.addEventListener('touchstart', clickWithDocNavInvoked);

              var docNavLinks = document.querySelectorAll('.doc-nav a');

              docNavLinks.forEach(function (link) {
                  link.addEventListener('click', closeDocNav);
              });
          }
      });
  }
</script>

<script>
  var studioLink = document.getElementById('studio-link');

  studioLink.addEventListener('click', function () {
      ga('send', 'event', 'topMenu', 'studioLinkClicked');
  });
</script>

<div class="doc-top-nav">
  <div class="doc-top-nav-content">
    <div class="doc-top-nav-wrapper">
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/getting-started/">Getting Started</a>      
        </div>
      
        <div class="doc-top-nav-tab active" >
          <a href="/testcafe/documentation/guides/">Guides</a>      
        </div>
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/reference/">Reference</a>      
        </div>
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/recipes/">Recipes</a>      
        </div>
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/how-it-works/">How It Works</a>      
        </div>
      
    </div>
  </div>
</div>


      <div class="container">
    

	
	

	
	
	<div class="doc-nav-panel">
		<div class="toggle-nav-button"></div>
		<div class="doc-nav-panel-header">
			<div class="doc-nav-panel-heading">Documentation</div>
			<div class="doc-nav-panel-title">Guides</div>
		</div>
	</div>
	<nav class="doc-nav">	
		<div class="doc-nav-content">
			<ul>
				<li>
				<ul>

    <li>
		    
		

<span>Basic Guides</span>

		
			<ul>

    <li>
		    
		

<a href="/testcafe/documentation/guides/basic-guides/install-testcafe.html"  >Install TestCafe</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/basic-guides/organize-tests.html"  >Organize Tests</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/basic-guides/select-page-elements.html"  >Select Page Elements</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/basic-guides/interact-with-the-page.html"  >Interact with the Page</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/basic-guides/assert.html"  >Assert</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/basic-guides/obtain-client-side-info.html"  >Obtain Client-Side Info</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/basic-guides/run-tests.html"  >Run Tests</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/basic-guides/debug.html"  >Debug</a>

		
    </li>

</ul>
		
    </li>

    <li>
		    
		

<span>Advanced Guides</span>

		
			<ul>

    <li>
		    
		

<a href="/testcafe/documentation/guides/advanced-guides/authentication.html"  >Authentication</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/advanced-guides/screenshots-and-videos.html"  >Screenshots and Videos</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/advanced-guides/intercept-http-requests.html" class="active" >Intercept HTTP Requests</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/advanced-guides/inject-client-scripts.html"  >Inject Client Scripts</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/advanced-guides/test-https-features-and-http2-websites.html"  >Test HTTPS Features and HTTP/2 Websites</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/advanced-guides/detect-the-client-browser-and-platform.html"  >Detect the Client Browser and Platform</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/advanced-guides/use-testcafe-docker-image.html"  >Use TestCafe Docker Image</a>

		
    </li>

</ul>
		
    </li>

    <li>
		    
		

<span>Concepts</span>

		
			<ul>

    <li>
		    
		

<a href="/testcafe/documentation/guides/concepts/browsers.html"  >Browsers</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/concepts/reporters.html"  >Reporters</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/concepts/page-model.html"  >Page Model</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/concepts/typescript-and-coffeescript.html"  >TypeScript and CoffeeScript</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/concepts/built-in-wait-mechanisms.html"  >Built-in Wait Mechanisms</a>

		
    </li>

</ul>
		
    </li>

    <li>
		    
		

<span>Continuous Integration</span>

		
			<ul>

    <li>
		    
		

<a href="/testcafe/documentation/guides/continuous-integration/appveyor.html"  >AppVeyor</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/continuous-integration/azure-devops.html"  >Azure DevOps</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/continuous-integration/bitbucket-pipelines.html"  >Bitbucket Pipelines</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/continuous-integration/circleci.html"  >CircleCI</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/continuous-integration/github-actions.html"  >GitHub Actions</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/continuous-integration/gitlab.html"  >GitLab</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/continuous-integration/jenkins.html"  >Jenkins</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/continuous-integration/teamcity.html"  >TeamCity</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/continuous-integration/travis.html"  >Travis</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/continuous-integration/travis-and-sauce-labs.html"  >Travis + Sauce Labs</a>

		
    </li>

</ul>
		
    </li>

    <li>
		    
		

<span>Extend TestCafe</span>

		
			<ul>

    <li>
		    
		

<a href="/testcafe/documentation/guides/extend-testcafe/install-plugins.html"  >Install Plugins</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/extend-testcafe/reporter-plugin.html"  >Reporter Plugin</a>

		
    </li>

    <li>
		    
		

<a href="/testcafe/documentation/guides/extend-testcafe/browser-provider-plugin.html"  >Browser Provider Plugin</a>

		
    </li>

</ul>
		
    </li>

</ul>
				</li>
			</ul>
		</div>
	</nav>
	

	
	

	
	
	


<main>
	<article class="doc">
		<div class="post-content">

			<h1>Intercept HTTP Requests</h1>
<p>This section describes how to handle HTTP requests in your tests. TestCafe ships with request hooks that allow you to log the requests and mock the responses. You can also create a custom HTTP request hook, which enables you, for instance, to emulate authentications like <strong>Kerberos</strong> or <strong>Client Certificate Authentication</strong>.</p>

<ul>
<li><a href="#log-http-requests">Log HTTP Requests</a></li>
<li><a href="#mock-http-requests">Mock HTTP Requests</a></li>
<li><a href="#create-a-custom-request-hook">Create a Custom Request Hook</a></li>
<li><a href="#attach-hooks-to-tests-and-fixtures">Attach Hooks to Tests and Fixtures</a></li>
</ul>
<h2><a class="anchor" id="log-http-requests"></a>Log HTTP Requests <a class="permalink" href="#log-http-requests">#</a></h2>
<p>You can use the <a href="../../reference/test-api/requestlogger/">request logger</a> to record HTTP requests the tested web app sends and responses it receives. For instance, you may want to make sure that the data from a remote service is correct.</p>

<p>Use the <a href="../../reference/test-api/requestlogger/constructor.html">RequestLogger</a> constructor to create a request logger.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">RequestLogger</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">testcafe</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">simpleLogger</span> <span class="o">=</span> <span class="nx">RequestLogger</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://example.com</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">headerLogger</span> <span class="o">=</span> <span class="nx">RequestLogger</span><span class="p">(</span><span class="sr">/testcafe/</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">logRequestHeaders</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">logResponseHeaders</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>
</code></pre></div>
<p>To enable the logger to track requests, <a href="#attach-hooks-to-tests-and-fixtures">attach the logger to a test or fixture</a>.</p>

<p>The <code>RequestLogger</code> stores the following parameters by default:</p>

<ul>
<li>The URL where the request is sent.</li>
<li>The request&#39;s HTTP method.</li>
<li>The status code received in the response.</li>
<li>The user agent that sent the request.</li>
</ul>

<p>Use the logger&#39;s API to access the data it stores.</p>
<div class="table-wrapper"><table><thead><tr>
<th>Member</th>
<th>Description</th>
</tr>
</thead><tbody><tr>
<td><a href="../../reference/test-api/requestlogger/contains.html">contains</a></td>
<td>Returns whether the logger contains a request that matches the predicate.</td>
</tr>
<tr>
<td><a href="../../reference/test-api/requestlogger/count.html">count</a></td>
<td>Returns the number of requests that match the predicate.</td>
</tr>
<tr>
<td><a href="../../reference/test-api/requestlogger/clear.html">clear</a></td>
<td>Clears all logged requests.</td>
</tr>
<tr>
<td><a href="../../reference/test-api/requestlogger/requests.html">requests</a></td>
<td>Returns an array of logged requests.</td>
</tr>
</tbody></table></div>
<p><strong>Example</strong></p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">Selector</span><span class="p">,</span> <span class="nx">RequestLogger</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">testcafe</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">fs</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">path</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://demos.devexpress.com/ASPxGridViewDemos/Exporting/Exporting.aspx</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">RequestLogger</span><span class="p">({</span> <span class="nx">url</span><span class="p">,</span> <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">post</span><span class="dl">'</span> <span class="p">},</span> <span class="p">{</span>
    <span class="na">logResponseHeaders</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">logResponseBody</span><span class="p">:</span>    <span class="kc">true</span>
<span class="p">});</span>

<span class="nx">fixture</span> <span class="s2">`Export`</span>
    <span class="p">.</span><span class="nx">page</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">requestHooks</span><span class="p">(</span><span class="nx">logger</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="dl">'</span><span class="s1">export to csv</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">exportToCSVButton</span> <span class="o">=</span> <span class="nx">Selector</span><span class="p">(</span><span class="dl">'</span><span class="s1">span</span><span class="dl">'</span><span class="p">).</span><span class="nx">withText</span><span class="p">(</span><span class="dl">'</span><span class="s1">Export to CSV</span><span class="dl">'</span><span class="p">);</span>

    <span class="k">await</span> <span class="nx">t</span>
        <span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">exportToCSVButton</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="nx">logger</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">r</span> <span class="o">=&gt;</span> <span class="nx">r</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">===</span> <span class="mi">200</span><span class="p">)).</span><span class="nx">ok</span><span class="p">();</span>

    <span class="c1">// After clicking 'Export', the response comes as a gziped CSV.</span>
    <span class="c1">// The browser unpacks the archive and gives you the file that was inside.</span>
    <span class="c1">// The test receives the archive as is.</span>
    <span class="kd">const</span> <span class="nx">filePath</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">exported-grid.zip</span><span class="dl">'</span><span class="p">);</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">filePath</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">logger</span><span class="p">.</span><span class="nx">requests</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">);</span>

    <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="nx">filePath</span><span class="p">,</span> <span class="nx">logger</span><span class="p">.</span><span class="nx">requests</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>

    <span class="c1">// Here you can use 3rd party modules to</span>
    <span class="c1">// unpack the archive, parse CSV and check the data.</span>
    <span class="c1">// Or you can just verify the file manually.</span>
<span class="p">});</span>
</code></pre></div><h2><a class="anchor" id="mock-http-requests"></a>Mock HTTP Requests <a class="permalink" href="#mock-http-requests">#</a></h2>
<p>Use TestCafe <a href="../../reference/test-api/requestmock/">request mocker</a> to substitute infrastructure that is difficult to deploy or that you do not want to use for test purposes. This can be a third-party service that charges you per pageview or an analytics service that should not log page views that tests generate. The mocker can intercept requests to this resource and emulate the response as needed.</p>

<p>Use the <a href="../../reference/test-api/requestmock/constructor.html">RequestMock</a> constructor to create a request mocker.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">mock</span> <span class="o">=</span> <span class="nx">RequestMock</span><span class="p">();</span>
</code></pre></div>
<p>Then call the <a href="../../reference/test-api/requestmock/onrequestto.html">onRequestTo</a> and <a href="../../reference/test-api/requestmock/respond.html">respond</a> methods in a chained fashion. The <a href="../../reference/test-api/requestmock/onrequestto.html">onRequestTo</a> method specifies a request to intercept, while the <a href="../../reference/test-api/requestmock/respond.html">respond</a> method specifies the mocked response for this request. Call these methods repeatedly to provide a mock for every request you need.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">mock</span> <span class="o">=</span> <span class="nx">RequestMock</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">onRequestTo</span><span class="p">(</span><span class="nx">request1</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">respond</span><span class="p">(</span><span class="nx">responseMock1</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">onRequestTo</span><span class="p">(</span><span class="nx">request2</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">respond</span><span class="p">(</span><span class="nx">responseMock2</span><span class="p">);</span>
</code></pre></div>
<p>Next, <a href="#attach-hooks-to-tests-and-fixtures">attach it to a test or fixture</a>.</p>

<p><strong>Example</strong></p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">Selector</span><span class="p">,</span> <span class="nx">RequestMock</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">testcafe</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// A URL to which Google Analytics sends data.</span>
<span class="kd">const</span> <span class="nx">collectDataGoogleAnalyticsRegExp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://www.google-analytics.com/collect</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Technically, Google Analytics sends an XHR request for a GIF image.</span>
<span class="c1">// So, the mocked response should contain binary data.</span>
<span class="kd">const</span> <span class="nx">mockedResponse</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">([</span><span class="mh">0x47</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x46</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x39</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">]);</span>

<span class="kd">const</span> <span class="nx">mock</span> <span class="o">=</span> <span class="nx">RequestMock</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">onRequestTo</span><span class="p">(</span><span class="nx">collectDataGoogleAnalyticsRegExp</span><span class="p">)</span>

    <span class="c1">// The hook responds to Analytics requests with the prepared data</span>
    <span class="c1">// represented as a GIF image and changes the status code to 202.</span>
    <span class="p">.</span><span class="nx">respond</span><span class="p">(</span><span class="nx">mockedResponse</span><span class="p">,</span> <span class="mi">202</span><span class="p">,</span> <span class="p">{</span>
        <span class="dl">'</span><span class="s1">content-length</span><span class="dl">'</span><span class="p">:</span> <span class="nx">mockedResponse</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">image/gif</span><span class="dl">'</span>
    <span class="p">});</span>

<span class="nx">fixture</span> <span class="s2">`Fixture`</span>
    <span class="p">.</span><span class="nx">page</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://devexpress.github.io/testcafe/</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">requestHooks</span><span class="p">(</span><span class="nx">mock</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="dl">'</span><span class="s1">basic</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">t</span>
        <span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="dl">'</span><span class="s1">.get-started-button</span><span class="dl">'</span><span class="p">)</span>

        <span class="c1">// During the pause, you can open DevTools and</span>
        <span class="c1">// find the request sent to Analytics</span>
        <span class="c1">// and the mocked response received.</span>
        <span class="p">.</span><span class="nx">debug</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div><h2><a class="anchor" id="create-a-custom-request-hook"></a>Create a Custom Request Hook <a class="permalink" href="#create-a-custom-request-hook">#</a></h2>
<p>You can create your own request hook to handle HTTP requests. This topic describes request hooks and how to create a custom hook.</p>

<p>Do the following to write a custom hook:</p>

<ul>
<li>inherit from the <a href="../../reference/test-api/requesthook/">RequestHook</a> class,</li>
<li>override the <a href="../../reference/test-api/requesthook/onrequest.html">onRequest</a> method to handle the request before it is sent,</li>
<li>override the <a href="../../reference/test-api/requesthook/onresponse.html">onResponse</a> method to handle the response after it is received.</li>
</ul>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">RequestHook</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">testcafe</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">MyRequestHook</span> <span class="kd">extends</span> <span class="nx">RequestHook</span> <span class="p">{</span>
    <span class="kd">constructor</span> <span class="p">(</span><span class="nx">requestFilterRules</span><span class="p">,</span> <span class="nx">responseEventConfigureOpts</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">requestFilterRules</span><span class="p">,</span> <span class="nx">responseEventConfigureOpts</span><span class="p">);</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
    <span class="k">async</span> <span class="nx">onRequest</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
    <span class="k">async</span> <span class="nx">onResponse</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>In test code, create a hook instance and <a href="#attach-hooks-to-tests-and-fixtures">attach it to a test or fixture</a>.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">MyRequestHook</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./my-request-hook</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">customHook</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyRequestHook</span><span class="p">(</span><span class="sr">/https</span><span class="se">?</span><span class="sr">:</span><span class="se">\/\/</span><span class="sr">example.com/</span><span class="p">);</span>

<span class="nx">fixture</span> <span class="s2">`My fixture`</span>
    <span class="p">.</span><span class="nx">page</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://example.com</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">requestHooks</span><span class="p">(</span><span class="nx">customHook</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="dl">'</span><span class="s1">My test</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// test actions</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Example</strong></p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">Selector</span><span class="p">,</span> <span class="nx">RequestHook</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">testcafe</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">JwtBearerAuthorization</span> <span class="kd">extends</span> <span class="nx">RequestHook</span> <span class="p">{</span>
    <span class="kd">constructor</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// No URL filtering applied to this hook</span>
        <span class="c1">// so it will be used for all requests.</span>
        <span class="k">super</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="nx">onRequest</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">requestOptions</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">generate token here</span><span class="dl">'</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">onResponse</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// This method must also be overridden,</span>
        <span class="c1">// but you can leave it blank.</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">jwtBearerAuthorization</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">JwtBearerAuthorization</span><span class="p">();</span>

<span class="nx">fixture</span> <span class="s2">`Fixture`</span>
    <span class="p">.</span><span class="nx">page</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;website URL&gt;</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">requestHooks</span><span class="p">(</span><span class="nx">jwtBearerAuthorization</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="dl">'</span><span class="s1">basic</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="cm">/* some actions */</span>
<span class="p">});</span>
</code></pre></div><h2><a class="anchor" id="attach-hooks-to-tests-and-fixtures"></a>Attach Hooks to Tests and Fixtures <a class="permalink" href="#attach-hooks-to-tests-and-fixtures">#</a></h2>
<p>To attach a hook to a test or fixture, use the <a href="../../reference/test-api/fixture/requesthooks.html">fixture.requestHooks</a> and <a href="../../reference/test-api/test/requesthooks.html">test.requestHooks</a> methods. A hook attached to a fixture handles requests from all tests in the fixture.</p>
<blockquote><div class="blockquote-content"><p>Hooks attached to a fixture are invoked before the hooks attached to individual tests.</p>
</div></blockquote>
<p>You can use the <a href="../../reference/test-api/testcontroller/addrequesthooks.html">t.addRequestHooks</a> and <a href="../../reference/test-api/testcontroller/removerequesthooks.html">t.removeRequestHooks</a> methods to attach and detach hooks during the test.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">RequestLogger</span><span class="p">,</span> <span class="nx">RequestMock</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">testcafe</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">RequestLogger</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://example.com</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">mock</span>   <span class="o">=</span> <span class="nx">RequestMock</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">onRequestTo</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://external-service.com/api/</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">respond</span><span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span> <span class="p">});</span>

<span class="nx">fixture</span> <span class="s2">`My fixture`</span>
    <span class="p">.</span><span class="nx">page</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://example.com</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">requestHooks</span><span class="p">(</span><span class="nx">logger</span><span class="p">);</span>

<span class="nx">test</span>
    <span class="p">.</span><span class="nx">requestHooks</span><span class="p">(</span><span class="nx">mock</span><span class="p">)</span>
    <span class="p">(</span><span class="dl">'</span><span class="s1">My test</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">t</span>
         <span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="dl">'</span><span class="s1">#send-logged-request</span><span class="dl">'</span><span class="p">)</span>
         <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="nx">logger</span><span class="p">.</span><span class="nx">count</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">)).</span><span class="nx">eql</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
         <span class="p">.</span><span class="nx">removeRequestHooks</span><span class="p">(</span><span class="nx">logger</span><span class="p">)</span>
         <span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="dl">'</span><span class="s1">#send-unlogged-request</span><span class="dl">'</span><span class="p">)</span>
         <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="nx">logger</span><span class="p">.</span><span class="nx">count</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">)).</span><span class="nx">eql</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
         <span class="p">.</span><span class="nx">addRequestHooks</span><span class="p">(</span><span class="nx">logger</span><span class="p">)</span>
         <span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="dl">'</span><span class="s1">#send-logged-request</span><span class="dl">'</span><span class="p">)</span>
         <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="nx">logger</span><span class="p">.</span><span class="nx">count</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">)).</span><span class="nx">eql</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>

		</div>
	</article>

</main>
</div>

    </div>

    <footer class="site-footer">
    <div class="site-footer-content">
        <div class="footer-links">
            <div class="footer-link-content">
                <div class="link"><a href="/testcafe/documentation/">Docs</a></div>
                <div class="link"><a href="/testcafe/media/team-blog/">Blog</a></div>
                <div class="link"><a href="/testcafe/faq/">FAQ</a></div>
                <div class="link"><a href="/testcafe/support/">Support</a></div>
                <div class="link"><a href="/testcafe/roadmap/">Roadmap</a></div>
                <div class="link"><a href="/testcafe/release-notes/">Release Notes</a></div>
                <div class="link"><a href="https://devexpress.com/products/testcafestudio">TestCafe Studio</a></div>
            </div>
        </div>
        <div class="footer-icons">
            <div class="icon"><a href="https://twitter.com/DXTestCafe"><img src="/testcafe/images/twitter-footer.svg"/></a></div>
            <div class="icon"><a href="https://github.com/DevExpress/testcafe"><img src="/testcafe/images/github-footer.svg"/></a></div>
        </div>
        <div class="footer-legal">
            Use of this site constitutes acceptance of our <a href="https://www.devexpress.com/aboutus/privacy-policy.xml"  target="_blank">Privacy Policy</a><br/>
            Copyright © 2012–2020 Developer Express Inc.</p>
        </div>
    </div>
</footer>


    
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript"> var search = docsearch({
     apiKey: '938fb7894c0af8c01af3e2b4c53d4bdd',
     indexName: 'testcafe',
     inputSelector: '#search',
     debug: false // Set debug to true if you want to inspect the dropdown
 });

 search.autocomplete.on('autocomplete:opened', function(e) {
     var searchInput = document.querySelector('#search');
     var dropdown    = document.querySelector('.ds-dropdown-menu');
     
     if(searchInput && dropdown) {
         dropdown.style.maxWidth = "none";
         dropdown.style.width = searchInput.offsetWidth + "px";
     }
 });
</script> 

  </body>

</html>
