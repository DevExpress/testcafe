<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <title>Browser Provider Plugin | TestCafe</title>

  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  
  <meta property="og:image" content="https://raw.githubusercontent.com/DevExpress/testcafe-gh-page-assets/master/src/images/testcafe-ogp-icon.png">
  <meta property="og:type" content="website" />
  <meta property="og:url" content="http://devexpress.github.io/testcafe/documentation/extending-testcafe/browser-provider-plugin/" />
  <meta property="og:title" content="Browser Provider Plugin | TestCafe" />

  <link rel="shortcut icon" href="/testcafe/favicon.ico">
  <link rel="stylesheet" href="/testcafe/css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/docco.min.css">
  <link rel="canonical" href="http://devexpress.github.io/testcafe/documentation/extending-testcafe/browser-provider-plugin/">
  <link rel="alternate" type="application/rss+xml" title="TestCafe" href="http://devexpress.github.io/testcafe/feed.xml">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
  <script defer src="https://buttons.github.io/buttons.js"></script>
  <script>
      document.addEventListener('DOMContentLoaded', function (e) {
          hljs.initHighlightingOnLoad();
      });
  </script>

  
  <script>
    // Google Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-83678642-1', 'auto');
    ga('send', 'pageview');
  </script>
  

  
  
  

  <script>
    (function () {
        var VISIT_DAY = {
            first: 1,
            second: 2,
            more: 3
        };

        var isLandingPage = false;
        var isGettingStarted = false;
        var isDocumentation = true;

        function updateVisitDay () {
            var FIRST_VISIT_DAY_ITEM_NAME = 'first-visit-day';
            var SECOND_VISIT_DAY_ITEM_NAME = 'second-visit-day';
            var DIFFERENT_VISITS_DELAY = 12 * 60 * 60 * 1000; 
            
            // TODO: ignore old visits
            var now = Date.now();
            var firstVisit = window.localStorage.getItem(FIRST_VISIT_DAY_ITEM_NAME);
            var secondVisit = window.localStorage.getItem(SECOND_VISIT_DAY_ITEM_NAME);

            if(!firstVisit) {
                window.localStorage.setItem(FIRST_VISIT_DAY_ITEM_NAME, now);
                return VISIT_DAY.first;
            }

            firstVisit = parseInt(firstVisit);

            if(!secondVisit) {
                if(!isLandingPage && now - firstVisit >=DIFFERENT_VISITS_DELAY) {
                    window.localStorage.setItem(SECOND_VISIT_DAY_ITEM_NAME, now);
                    return VISIT_DAY.second;
                }

                return VISIT_DAY.first;
            }
            
            secondVisit = parseInt(secondVisit);

            return now - secondVisit >= DIFFERENT_VISITS_DELAY ? VISIT_DAY.more : VISIT_DAY.second;
        }

        window.needShowShareWidget = function () {
            if(!isDocumentation || isGettingStarted)
                return false;

            var visitDay = updateVisitDay();

            return visitDay === VISIT_DAY.more;
        };
    })();
  </script>

  

  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.12/css/perfect-scrollbar.min.css">
    <style>
        .ps-container > .ps-scrollbar-x-rail,
        .ps-container > .ps-scrollbar-y-rail {
            opacity: 0.6;
        }
    </style>
    <script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.12/js/perfect-scrollbar.min.js"></script>
    <script defer type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.3.min.js"></script>
    <script defer src="/testcafe/scripts/widget.js" type="text/javascript"></script>
    <script src="/testcafe/scripts/mobile-detect.min.js" type="text/javascript"></script>

    <script>
        var MIN_BODY_WIDTH = 1230;
        var FOOTER_HEIGHT  = 113;
        var HEADER_HEIGHT  = 126;

        var nav            = null;
        var article        = null;
        var md             = new MobileDetect(window.navigator.userAgent);
        var isMobileDevice = !!md.mobile();

        function setNavTopPosition () {
            var isMobileZoomed = isMobileDevice && window.innerWidth !== document.body.scrollWidth;
            var top            = null;

            if(isMobileDevice) {
                top = window.pageYOffset >= HEADER_HEIGHT ? window.pageYOffset - HEADER_HEIGHT + 'px' : '0';

                if (nav.style.paddingTop !== top) {
                    nav.style.paddingTop = top;
                    Ps.update(nav);
                }

                return;
            }

            if (document.body.clientWidth > MIN_BODY_WIDTH) {
                if (nav.style.top !== HEADER_HEIGHT + 'px') {
                    nav.style.top = HEADER_HEIGHT + 'px';
                    Ps.update(nav);
                }
            }
            else if(!isMobileZoomed) {
                top = window.pageYOffset <= HEADER_HEIGHT ? HEADER_HEIGHT - window.pageYOffset + 'px' : '0';

                if (nav.style.top !== top) {
                    nav.style.top = top;
                    Ps.update(nav);
                }
            }
        }

        function setNavBottomPosition () {
            var footerVisibleHeight = FOOTER_HEIGHT - document.body.scrollHeight + window.pageYOffset +
                                      document.body.clientHeight;

            if (footerVisibleHeight > 0) {
                if (nav.style.bottom !== footerVisibleHeight + 'px') {
                    nav.style.bottom = footerVisibleHeight + 'px';
                    Ps.update(nav);
                }
            }
            else if (nav.style.bottom !== '0') {
                nav.style.bottom = '0';
                Ps.update(nav);
            }
        }

        function updatePosition () {
            if (isMobileDevice)
                changeBodyHeight();
            else
                nav.style.marginLeft = '-' + window.pageXOffset + 'px';

            setNavBottomPosition();
            setNavTopPosition();
        }

        function changeBodyHeight () {
            if (document.body.style.height !== window.innerHeight + 'px')
                document.body.style.height = window.innerHeight + 'px';
        }

        function initScrollBar() {
            Ps.initialize(nav);

            window.addEventListener('resize', function () {
                Ps.update(nav);
            });
        }

        function initNav() {
            if(isMobileDevice) {
                nav.style.position = 'relative';
                nav.style.float = 'left';
                nav.style.top = '0px';

                article.style.marginTop = '0px';
                article.style.paddingTop = '22px';
            }

            initScrollBar();
            updatePosition();
            window.addEventListener('scroll', updatePosition);
            window.addEventListener('resize', updatePosition);

            if(isMobileDevice) {
                nav.style.height = window.innerHeight + 'px';
            }
        }

        document.addEventListener('DOMContentLoaded', function (e) {
            nav     = document.querySelector('.doc-nav');
            article = document.querySelector('.doc');

            if(nav)
                initNav(nav);
        });
    </script>
  
    <script>
        function initHeader(siteHeader, contentWrapper, docTopMenu, article, gs) {
            var MIN_BODY_WIDTH = 1230;

            function updateHeader() {
                var bodyMinimized = document.body.clientWidth === MIN_BODY_WIDTH;

                

                siteHeader.style.position = bodyMinimized ? 'static' : '';

                if(docTopMenu)
                    docTopMenu.style.position = bodyMinimized ? 'static' : '';

                if(contentWrapper)
                    contentWrapper.style.paddingTop = bodyMinimized ? '0' : '';

                if(article)
                    article.style.marginTop = bodyMinimized ? '21px' : '72px';
 
                if(gs)
                    gs.style.paddingTop = bodyMinimized ? '21px' : '72px';
            }

            updateHeader();
            window.addEventListener('scroll', updateHeader);
            window.addEventListener('resize', updateHeader);
        }
        document.addEventListener('DOMContentLoaded', function (e) {
            var contentWrapper = document.querySelector('.container');
            var siteHeader     = document.querySelector('.site-header');
            var docTopMenu     = document.querySelector('.doc-top-nav');
            var article        = document.querySelector('.doc');
            var gs             = document.querySelector('.gs');

            if(siteHeader) 
                initHeader(siteHeader, contentWrapper, docTopMenu, article, gs);
        });
    </script>
</head>


  <body>
    <div class="page-content-wrapper">

      <header class="site-header fixed">
  <div class="site-header-content">
    <a class="site-logo" href="/testcafe/"></a>
    <nav class="site-nav">
        
          
          <div class="site-nav-tab active">
            <a class="page-link" href="/testcafe/documentation/getting-started/">Documentation</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="https://github.com/DevExpress/testcafe" target="_blank">GitHub</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="/testcafe/faq/">FAQ</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="/testcafe/publications/">Publications</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="/testcafe/blog/">Release Notes</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="https://github.com/DevExpress/testcafe/issues" target="_blank">Issues</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="https://testcafe-discuss.devexpress.com/" target="_blank">Forum</a>
          </div>
        
      <a id="twitter-button" href="https://twitter.com/dxtestcafe" target="_blank"></a>
      <div id="search-icon"></div>
      <div class="star-button">
        <a class="github-button" href="https://github.com/DevExpress/testcafe" data-size="large" data-count-href="/DevExpress/testcafe/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star DevExpress/testcafe on GitHub"><span style="color:#ffffff">Star</span></a>
      </div>
      <div id="search-panel" class="hidden">
          <input type="text" placeholder="Search query" id="search"/>
          <div id="close-search"></div>
      </div>
      </nav>
  </div>
</header>

<script>
  function has(parentEl, el)  {
    var descendants = parentEl.getElementsByTagName('*');
    
    for(i = 0; i < descendants.length; i++) 
        if(descendants[i] === el) return true;

    return false;
  }

  function closeSearchBox(e) {
      var clickOutsideSearchBox = searchPanel !== e.target && !has(searchPanel, e.target);

      if(clickOutsideSearchBox && !searchPanel.className.includes('hidden')) 
          searchPanel.className += ' hidden';
  }

  var searchButton      = document.querySelector('#search-icon');
  var searchPanel       = document.querySelector('#search-panel');
  var searchInput       = document.querySelector('#search');
  var closeSearchButton = document.querySelector('#close-search');

  searchButton.addEventListener('click', function () {
      searchPanel.className = searchPanel.className.replace(/hidden/,'');
      searchInput.focus();      
  });
  
  closeSearchButton.addEventListener('click', function () {
      searchPanel.className += ' hidden';
  });

  window.addEventListener('mousedown', closeSearchBox);        
  window.addEventListener('touchstart', closeSearchBox);
</script>


  <div class="doc-top-nav">
    <div class="doc-top-nav-content">
      <div class="doc-top-nav-wrapper">
        
          <div class="doc-top-nav-tab " >
            <a href="/testcafe/documentation/getting-started/">Getting Started</a>      
          </div>
        
          <div class="doc-top-nav-tab " >
            <a href="/testcafe/documentation/using-testcafe/">Using TestCafe</a>      
          </div>
        
          <div class="doc-top-nav-tab " >
            <a href="/testcafe/documentation/test-api/">Test API</a>      
          </div>
        
          <div class="doc-top-nav-tab active" >
            <a href="/testcafe/documentation/extending-testcafe/">Extending TestCafe</a>      
          </div>
        
          <div class="doc-top-nav-tab " >
            <a href="/testcafe/documentation/recipes/">Recipes</a>      
          </div>
        
      </div>
    </div>
  </div>



      <div class="container">
    
	
	

	
	

	
	

	
	
	<nav class="doc-nav">	
		<div class="doc-nav-content">
			<ul>
				<li>
				<ul>

    <li>
		    
		
<a href="/testcafe/documentation/extending-testcafe/reporter-plugin/"  >Reporter Plugin</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/extending-testcafe/reporter-plugin/reporter-methods.html"  >Reporter Methods</a>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/extending-testcafe/reporter-plugin/helpers.html"  >Helpers</a>
		
    </li>

</ul>
		
    </li>

    <li>
		    
		
<a href="/testcafe/documentation/extending-testcafe/browser-provider-plugin/" class="active" >Browser Provider Plugin</a>
		
			<ul>

    <li>
		    
		
<a href="/testcafe/documentation/extending-testcafe/browser-provider-plugin/browser-provider-methods.html"  >Browser Provider Methods</a>
		
    </li>

</ul>
		
    </li>

</ul>
				</li>
			</ul>
		</div>
	</nav>
	

	
	
	


<main>
	<article class="doc">
		<div class="post-content">

			<h1>Browser Provider Plugin</h1>
<p>TestCafe supports testing in a number of popular browsers (see <a href="../../using-testcafe/common-concepts/browsers/browser-support.html">Browser Support</a>).
If you need to use a different browser (for example, a browser from a cloud service), you can create a <strong>custom browser provider plugin</strong>.
The provider should expose methods for performing common actions on the browser windows during testing: opening and closing it, taking screenshot, etc.</p>

<p>This topic contains the following sections.</p>

<ul>
<li><a href="#generating-browser-provider-project">Generating Browser Provider Project</a></li>
<li><a href="#implementing-the-browser-provider">Implementing the Browser Provider</a></li>
<li><a href="#building-the-provider">Building the Provider</a></li>
<li><a href="#using-the-provider-development-version">Using the Provider Development Version</a></li>
<li><a href="#publishing-the-provider-to-npm">Publishing the Provider to npm</a></li>
<li><a href="#specifying-a-browser-for-a-test-task">Specifying a Browser for a Test Task</a></li>
</ul>
<blockquote><div class="blockquote-content"><p>To run tests on <a href="https://saucelabs.com">Sause Labs</a> or <a href="https://github.com/segmentio/nightmare">headless</a> browsers,
you can use the existing <a href="https://github.com/DevExpress/testcafe-browser-provider-saucelabs/">testcafe-browser-provider-saucelabs</a>
or <a href="https://github.com/ryx/testcafe-browser-provider-nightmare">testcafe-browser-provider-nightmare</a> plugin.</p>
</div></blockquote><h2><a class="anchor" name="generating-browser-provider-project"></a>Generating Browser Provider Project <a class="permalink" href="#generating-browser-provider-project">#</a></h2>
<p>To create a browser provider project, use the <a href="https://github.com/DevExpress/generator-testcafe-browser-provider">TestCafe browser provider generator</a>.
The generator will scaffold out the plugin, so that you only need to write a few lines of code.</p>

<p>First, install <a href="http://yeoman.io">Yeoman</a> and <code>generator-testcafe-browser-provider</code> using <a href="https://www.npmjs.com/">npm</a>.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">npm install -g yo
npm install -g generator-testcafe-browser-provider
</code></pre></div>
<p>Create a new directory where the generator should place your scaffolded project files and go into it.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">mkdir my-provider
<span class="nb">cd </span>my-provider
</code></pre></div><blockquote><div class="blockquote-content"><p>It is recommended that you name the directory as you would name the browser provider project. When you run the generator, it will automatically suggest the browser provider name that matches the browser provider directory name.</p>

<p>The generator will also automatically create the provider package name that consists of two parts - the <code>testcafe-browser-provider-</code> prefix and the name of the provider itself; for example, <code>testcafe-browser-provider-my-provider</code>.</p>

<p><strong>Important:</strong> If you name the provider package manually, its name must start with the <code>testcafe-browser-provider-</code> prefix. Otherwise, TestCafe will be unable to recognize the plugin.</p>
</div></blockquote>
<p>Then, run the browser provider generator to create a new project.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">yo testcafe-browser-provider
</code></pre></div>
<p>The generator will ask you a few questions about the browser provider. Then, Yeoman will automatically scaffold out the provider, install the required dependencies, and pull in several useful Gulp tasks for your workflow.</p>
<h2><a class="anchor" name="implementing-the-browser-provider"></a>Implementing the Browser Provider <a class="permalink" href="#implementing-the-browser-provider">#</a></h2>
<p>Once the browser provider has been scaffolded out, go to the provider directory and open the <code>src/index.js</code> file.</p>

<p>There are several required and optional <a href="browser-provider-methods.html">provider methods</a> you can implement.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Required methods</span>
<span class="nx">async</span> <span class="nx">openBrowser</span> <span class="p">(</span><span class="cm">/* id, pageUrl, browserName */</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'Not implemented!'</span><span class="p">);</span>
<span class="p">},</span>

<span class="nx">async</span> <span class="nx">closeBrowser</span> <span class="p">(</span><span class="cm">/* id */</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'Not implemented!'</span><span class="p">);</span>
<span class="p">},</span>

<span class="c1">// Optional initialization and cleanup methods</span>
<span class="nx">async</span> <span class="nx">init</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">},</span>

<span class="nx">async</span> <span class="nx">dispose</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">},</span>

<span class="c1">// Optional methods for multi-browser support</span>
<span class="nx">async</span> <span class="nx">getBrowserList</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'Not implemented!'</span><span class="p">);</span>
<span class="p">},</span>

<span class="nx">async</span> <span class="nx">isValidBrowserName</span> <span class="p">(</span><span class="cm">/* browserName */</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">},</span>

<span class="c1">// Optional extra methods</span>
<span class="nx">async</span> <span class="nx">resizeWindow</span> <span class="p">(</span><span class="cm">/* id, width, height, currentWidth, currentHeight */</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">reportWarning</span><span class="p">(</span><span class="s1">'The window resize functionality is not supported by the "my-provider" browser provider.'</span><span class="p">);</span>
<span class="p">},</span>

<span class="nx">async</span> <span class="nx">canResizeWindowToDimensions</span> <span class="p">(</span><span class="cm">/* browserId, width, height */</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">async</span> <span class="nx">takeScreenshot</span> <span class="p">(</span><span class="cm">/* id, screenshotPath, pageWidth, pageHeight */</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">reportWarning</span><span class="p">(</span><span class="s1">'The screenshot functionality is not supported by the "my-provider" browser provider.'</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">async</span> <span class="nx">maximizeWindow</span> <span class="p">(</span><span class="cm">/*browserId*/</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">reportWarning</span><span class="p">(</span><span class="s1">'The window maximization functionality is not supported by the "my-provider" browser provider.'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>To implement these methods, you can use the <a href="https://github.com/DevExpress/testcafe-browser-tools">testcafe-browser-tools</a> library that contains methods for performing platform-dependent actions on browser windows.</p>
<h3><a class="anchor" name="example"></a>Example <a class="permalink" href="#example">#</a></h3>
<p>The following example code demonstrates how you can implement the simple browser provider for portable browsers.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">path</span> <span class="nx">from</span> <span class="s1">'path'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">browserTools</span> <span class="nx">from</span> <span class="s1">'testcafe-browser-tools'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">getScreenSize</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span> <span class="na">width</span><span class="p">:</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">availWidth</span><span class="p">,</span> <span class="na">height</span><span class="p">:</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">availHeight</span> <span class="p">};</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">isMultiBrowser</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">screenSizes</span><span class="p">:</span> <span class="p">{},</span>

    <span class="nx">async</span> <span class="nx">openBrowser</span> <span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">pageUrl</span><span class="p">,</span> <span class="nx">browserName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">browserInfo</span> <span class="o">=</span> <span class="p">{};</span>

        <span class="k">switch</span> <span class="p">(</span><span class="nx">browserName</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">case</span> <span class="s1">'firefox'</span><span class="p">:</span>
                <span class="nx">browserInfo</span><span class="p">.</span><span class="nx">path</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORTABLE_BROWSERS_PATH</span><span class="p">,</span> <span class="s1">'FirefoxPortable/FirefoxPortable.exe'</span><span class="p">);</span>
                <span class="nx">browserInfo</span><span class="p">.</span><span class="nx">cmd</span>  <span class="o">=</span> <span class="s1">'-new-window'</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="s1">'chrome'</span><span class="p">:</span>
                <span class="nx">browserInfo</span><span class="p">.</span><span class="nx">path</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORTABLE_BROWSERS_PATH</span><span class="p">,</span> <span class="s1">'GoogleChromePortable/GoogleChromePortable.exe'</span><span class="p">);</span>
                <span class="nx">browserInfo</span><span class="p">.</span><span class="nx">cmd</span>  <span class="o">=</span> <span class="s1">'--new-window'</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="nl">default</span><span class="p">:</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'Unsupported browser!'</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">await</span> <span class="nx">browserTools</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">browserInfo</span><span class="p">,</span> <span class="nx">pageUrl</span><span class="p">);</span>

        <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">waitForConnectionReady</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">screenSizes</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">runInitScript</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">getScreenSize</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
    <span class="p">},</span>

    <span class="nx">async</span> <span class="nx">closeBrowser</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">await</span> <span class="nx">browserTools</span><span class="p">.</span><span class="nx">close</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">async</span> <span class="nx">getBrowserList</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">'firefox'</span><span class="p">,</span> <span class="s1">'chrome'</span><span class="p">];</span>
    <span class="p">},</span>

    <span class="nx">async</span> <span class="nx">isValidBrowserName</span> <span class="p">(</span><span class="nx">browserName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">browserList</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">getBrowserList</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">browserList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">browserName</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">async</span> <span class="nx">resizeWindow</span> <span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">currentWidth</span><span class="p">,</span> <span class="nx">currentHeight</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">await</span> <span class="nx">browserTools</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">currentWidth</span><span class="p">,</span> <span class="nx">currentHeight</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">async</span> <span class="nx">canResizeWindowToDimensions</span> <span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="p">{</span> <span class="na">width</span><span class="p">:</span> <span class="nx">screenWidth</span><span class="p">,</span> <span class="na">height</span><span class="p">:</span> <span class="nx">screenHeight</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">screenSizes</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span>

        <span class="k">return</span> <span class="nx">width</span> <span class="o">&lt;=</span> <span class="nx">screenWidth</span> <span class="o">&amp;&amp;</span> <span class="nx">height</span> <span class="o">&lt;=</span> <span class="nx">screenHeight</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">async</span> <span class="nx">maximizeWindow</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">await</span> <span class="nx">browserTools</span><span class="p">.</span><span class="nx">maximize</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">async</span> <span class="nx">takeScreenshot</span> <span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">screenshotPath</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">await</span> <span class="nx">browserTools</span><span class="p">.</span><span class="nx">screenshot</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">screenshotPath</span><span class="p">);</span>
    <span class="p">},</span>
<span class="p">};</span>
</code></pre></div><blockquote><div class="blockquote-content"><p>To learn how to implement provider methods, you can also explore the existing browser provider plugins,
for example, <a href="https://github.com/DevExpress/testcafe-browser-provider-saucelabs/">testcafe-browser-provider-saucelabs</a>
or <a href="https://github.com/ryx/testcafe-browser-provider-nightmare">testcafe-browser-provider-nightmare</a>.</p>
</div></blockquote><h2><a class="anchor" name="building-the-provider"></a>Building the Provider <a class="permalink" href="#building-the-provider">#</a></h2>
<p>You can build a browser provider project by using the <code>build</code> Gulp task.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">gulp build
</code></pre></div><h2><a class="anchor" name="using-the-provider-development-version"></a>Using the Provider Development Version <a class="permalink" href="#using-the-provider-development-version">#</a></h2>
<p>If you are still developing the browser provider, but need to test it within TestCafe, there is no need to publish the browser provider package to npm.
You can link the browser provider to TestCafe by using the <a href="https://docs.npmjs.com/cli/link">npm link</a> command.
This allows you to work on the browser provider project and test it iteratively without having to re-publish everytime you make a change.</p>

<p>To link the browser provider package, navigate to the provider directory and run <code>npm link</code>:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd </span>my-provider
npm link
</code></pre></div>
<p>After that, TestCafe will use the provider version you are currently developing.</p>

<p>For information on how to specify a browser in tests, see <a href="#specifying-a-browser-for-a-test-task">Specifying a Browser for a Test Task</a>.</p>
<h2><a class="anchor" name="publishing-the-provider-to-npm"></a>Publishing the Provider to npm <a class="permalink" href="#publishing-the-provider-to-npm">#</a></h2>
<p>When you finish developing the provider, you can publish it to npm by running the <code>publish-please</code> npm script.
This script builds the package, tests the provider and then uses <a href="https://github.com/inikulin/publish-please">publish-please</a> to publish it to npm.
That is why using the <code>publish-please</code> script instead of <code>npm publish</code> is what is recommended.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">npm run publish-please
</code></pre></div>
<p>After that, you can install the provider plugin as you would <a href="../#installing-plugins">install any other plugin</a>.</p>
<h2><a class="anchor" name="specifying-a-browser-for-a-test-task"></a>Specifying a Browser for a Test Task <a class="permalink" href="#specifying-a-browser-for-a-test-task">#</a></h2>
<p>When running tests, you can specify a browser accessed through the provider plugin by using a <em>browser alias</em>.
The alias consists of the browser provider name and the name of the browser itself (the latter may be omitted in some providers); for example, <code>saucelabs:Chrome@52.0:Windows 8.1</code> or <code>nightmare</code>.</p>

<p>To obtain all the available aliases for your provider, run the <code>testcafe --list-browsers {shortProviderName}</code> command, where <code>{shortProviderName}</code> is the provider name (without the <code>testcafe-browser-provider-</code> prefix); for example, <code>testcafe --list-browsers my-provider</code>.</p>


		</div>
		<div class="widget-container hidden">
			<div id="share-button">
				<div id="graph-icon">
					<img src="/testcafe/images/icon-share.svg"/>
				</div>
				<p>TELL<br/>YOUR<br/>FRIENDS</p>
			</div>
			<div class="widget-panel">
				<div id="tweet">
					<a href="https://twitter.com/intent/tweet?text=Check%20out%20%23TestCafe%20-%20a%20free%20node.js%20tool%20for%20e2e%20testing%20https%3A%2F%2Fdevexpress.github.io%2Ftestcafe%2F"
					onclick="return !window.open(this.href, 'Twitter', 'width=690,height=450')"
					target="_blank">
						<img src="/testcafe/images/icon-tweet.svg"/>
					</a>
				</div>
				<div id="facebook">
					<a href="https://www.facebook.com/sharer/sharer.php?u=https://devexpress.github.io/testcafe/"
					onclick="return !window.open(this.href, 'Facebook', 'width=500,height=500')"
					target="_blank">
						<image src="/testcafe/images/icon-facebook.svg"/>
					</a>
				</div>
				<div id="collapse">
					<img src="/testcafe/images/icon-close.svg"/>
				</div>
			</div>
		</div>
	</article>
</main>
</div>

      <div class="push"></div>
    </div>

    <footer class="site-footer">
    <div class="site-footer-content">
        <div class="footer-col-1">
            <p><strong>TestCafe</strong>: Automated browser testing for the modern web development stack<br/>
            Copyright © 2012-2017 Developer Express Inc.</p>
        </div>
    </div>
</footer>


    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
     <script type="text/javascript"> var search = docsearch({
          apiKey: '938fb7894c0af8c01af3e2b4c53d4bdd',
          indexName: 'testcafe',
          inputSelector: '#search',
          debug: false // Set debug to true if you want to inspect the dropdown
      });

      search.autocomplete.on('autocomplete:opened', function(e) {
          var searchInput = document.querySelector('#search');
          var dropdown    = document.querySelector('.ds-dropdown-menu');
          
          if(searchInput && dropdown) {
              dropdown.style.maxWidth = "none";
              dropdown.style.width = searchInput.offsetWidth + "px";
          }
      });
    </script> 

  </body>

</html>
