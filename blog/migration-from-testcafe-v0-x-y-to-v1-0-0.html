<!DOCTYPE html>
<html>

  <head>
  
  
  
  
  
  
  

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <title>Migration from TestCafe v0.x.y to v1.0.0 | TestCafe</title>

  <meta name="description" content="Migration from TestCafe v0.x.y to v1.0.0TestCafe v1.0.0 introduces minor changes to the framework&#39;s behavior and programming interface. This document lis...">
  <meta name="viewport" content="width=device-width">

  <meta property="og:image" content="https://raw.githubusercontent.com/DevExpress/testcafe-gh-page-assets/master/src/images/testcafe-ogp-icon.png">
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://devexpress.github.io/testcafe/blog/migration-from-testcafe-v0-x-y-to-v1-0-0.html" />
  <meta property="og:title" content="Migration from TestCafe v0.x.y to v1.0.0 | TestCafe" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:image" content="https://raw.githubusercontent.com/DevExpress/testcafe-gh-page-assets/master/src/images/testcafe-twitter-card-icon.png" />
  <meta name="twitter:site" content="@DXTestCafe" />
  
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/styles/docco.min.css">
  
  
  <link rel="shortcut icon" href="/testcafe/favicon.ico">
  <link rel="stylesheet" href="/testcafe/css/main.css">
  <link rel="stylesheet" href="/testcafe/css/banner.css">
  <link rel="canonical" href="https://devexpress.github.io/testcafe/blog/migration-from-testcafe-v0-x-y-to-v1-0-0.html">
  <link rel="alternate" type="application/rss+xml" title="TestCafe" href="https://devexpress.github.io/testcafe/feed.xml">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
  <link rel="apple-touch-icon" sizes="180x180" href="/testcafe/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/testcafe/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/testcafe/favicon-16x16.png">
  <link rel="manifest" href="/testcafe/site.webmanifest">
  <meta name="msapplication-TileColor" content="#2d89ef">
  <meta name="msapplication-config" content="/testcafe/browserconfig.xml" />
  <meta name="theme-color" content="#ffffff">
  <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/highlight.min.js"></script>
  <script defer src="https://buttons.github.io/buttons.js"></script>
  <script defer type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.3.min.js"></script>
  <script src="/testcafe/scripts/mobile-detect.min.js" type="text/javascript"></script>
  <script>
     var md             = new MobileDetect(window.navigator.userAgent);
     var isMobileDevice = !!md.mobile();
  </script>
  <script>
      document.addEventListener('DOMContentLoaded', function (e) {
          hljs.initHighlightingOnLoad();
      });
  </script>

  
  <script>
    // Google Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-83678642-1', 'auto');
    ga('set', 'anonymizeIp', true);
    ga('send', 'pageview');
  </script>
  

  

  

  

  

  

  <script>
    function linkCss (href) {
        var link  = document.createElement('link');
        var html  = document.querySelector('html');
        var head  = document.head;

        link.rel  = 'stylesheet';
        link.type = 'text/css';
        link.href = href;
        link.media = 'all';

        head.appendChild(link);

        window.addEventListener('load', function () {
            html.style.display = 'block';
        });

        html.style.display = 'none';
    }
  </script>
    
    

    <script>
        if (isMobileDevice) {
            linkCss('/testcafe/css/banner.mobile.css');

            document.addEventListener('DOMContentLoaded', function (e) {
                var siteNav         = document.querySelector('.site-nav');
                var hamburgerButton = document.querySelector('.hamburger-button');

                hamburgerButton.addEventListener('click', function (e) {
                    if (hamburgerButton.className.indexOf('active') !== -1) {
                        hamburgerButton.className = hamburgerButton.className.replace(' active', '');
                        siteNav.className = siteNav.className.replace(' active', '');
                        document.documentElement.style.overflowY = 'scroll';
                        document.body.style.overflowY = 'initial';
                    }
                    else {
                        hamburgerButton.className += ' active';
                        siteNav.className += ' active';
                        document.documentElement.style.overflowY = 'hidden';
                        document.body.style.overflowY = 'hidden';
                    }
                });

                var docTopNav          = document.querySelector('.doc-top-nav');
                var docMenuItem        = document.querySelector('.site-nav-tab');
                var mainMenuSecondItem = document.querySelector('.site-nav-tab:nth-child(2)');

                siteNav.insertBefore(docTopNav, mainMenuSecondItem);
                
                var searchPanel = document.getElementById('search-panel');
                
                siteNav.insertBefore(searchPanel, docMenuItem);

                var docMenuItemIcon = document.createElement('div');

                docMenuItemIcon.className = 'doc-menu-item-icon';
                docMenuItem.appendChild(docMenuItemIcon);

                

                docMenuItem.addEventListener('click', function (e) {
                    if (docTopNav.className.indexOf('expanded') !== -1) {
                        docMenuItem.className = docMenuItem.className.replace(' expanded', '');
                        docTopNav.className = docTopNav.className.replace(' expanded', '');
                    }
                    else {
                        docMenuItem.className += ' expanded';
                        docTopNav.className += ' expanded';
                    }
                    e.preventDefault();
                });
            });

            linkCss('/testcafe/css/mobile.css');
        }
    </script>

  

  

    

  
    
    <script>
        if (document.images) {
            img1 = new Image();
            img1.src = '/testcafe/images/test-cafe-logo.png';
        }
    </script>
  
    <script>
        function initHeader(siteHeader, contentWrapper, docTopMenu, article, gs) {
            var MIN_BODY_WIDTH = 1230;

            function updateHeader() {
                var CONTENT_MARGIN_WITH_DOC_MENU     = '72px';
                var CONTENT_MARGIN_WITHOUT_DOC_MENU  = '21px';
                var CONTENT_MARGIN_COMMUNITY_DESKTOP = '27px';
                var CONTENT_MARGIN_COMMUNITY_MOBILE  = '48px';

                var bodyMinimized          = document.body.clientWidth === MIN_BODY_WIDTH;
                var docContentMargin       = bodyMinimized ? CONTENT_MARGIN_WITHOUT_DOC_MENU : CONTENT_MARGIN_WITH_DOC_MENU;
                var isCommunitySection     = false;
                var contentMarginCommunity = isMobileDevice ? CONTENT_MARGIN_COMMUNITY_MOBILE : CONTENT_MARGIN_COMMUNITY_DESKTOP;
                var contentMargin          = isCommunitySection ? contentMarginCommunity : docContentMargin;

                

                siteHeader.style.position = bodyMinimized ? 'static' : '';

                if(docTopMenu)
                    docTopMenu.style.position = bodyMinimized ? 'static' : '';

                if(contentWrapper)
                    contentWrapper.style.paddingTop = bodyMinimized ? '0' : '';

                if(article && !isMobileDevice)
                    article.style.marginTop = contentMargin;
                if(gs && !isMobileDevice)
                    gs.style.paddingTop = contentMargin;
            }

            updateHeader();
            window.addEventListener('scroll', updateHeader);
            window.addEventListener('resize', updateHeader);
        }
        document.addEventListener('DOMContentLoaded', function (e) {
            var contentWrapper = document.querySelector('.container');
            var siteHeader     = document.querySelector('.site-header');
            var docTopMenu     = document.querySelector('.doc-top-nav');
            var article        = document.querySelector('.doc');
            var gs             = document.querySelector('.gs');

            if(siteHeader)
                initHeader(siteHeader, contentWrapper, docTopMenu, article, gs);
        });
    </script>
</head>


  <body>

    <script defer src="/testcafe/scripts/cookie-notice.js" type="text/javascript"></script>
<div class="cookie-notice">
    <div class="close-icon"></div>
    <div class="cookie-notice-content">
        <div class="cookie-notice-message">
            <div class="cookie-notice-header">Why We Use Cookies</div>
            <div class="cookie-notice-text">This site uses cookies to make your browsing experience more convenient and personal. Cookies store useful information on your computer to help us improve the efficiency and relevance of our site for you. In some cases, they are essential to making the site work properly. By accessing this site, you consent to the use of cookies. For more information, refer to DevExpress' <a href="https://www.devexpress.com/AboutUs/privacy-policy.xml" target="_blank">privacy policy</a> and <a href="https://www.devexpress.com/AboutUs/cookie-policy.xml" target="_blank">cookie policy</a>.</div>
        </div>
        <div class="cookie-notice-button">I understand</div>
    </div>
</div>

    <div class="page-content-wrapper">

      

<script>
    var TEAM_BLOG_LAST_VISITED_FLAG = 'team-blog-last-visited';
    var TEAM_BLOG_LINK_ID           = 'blog-link';
    var TEAM_BLOG_LINK_NEW_CLASS    = 'new-post';
    var NOTIFICATIONS_ACTIVE_SINCE  = new Date(2020, 4, 21)

    var teamBlogLastVisited = window.localStorage.getItem(TEAM_BLOG_LAST_VISITED_FLAG) || NOTIFICATIONS_ACTIVE_SINCE;

    window.addEventListener('DOMContentLoaded', function (e) {
        var lastPostDate = new Date(1607634000 * 1000);
        
        if(lastPostDate > teamBlogLastVisited) {
            var blogLink = document.getElementById(TEAM_BLOG_LINK_ID).parentElement;
            
            if(blogLink)
                blogLink.className += ` ${TEAM_BLOG_LINK_NEW_CLASS}`;
        }
    });
</script>
<header class="site-header fixed">
  <div class="site-header-content">
    <a class="site-logo" href="/testcafe/"></a>
    <div class="hamburger-button">
        <div class="hamburger-icon"></div>
    </div>
    <nav class="site-nav">
      
        
        <div class="site-nav-tab">
          <a class="page-link" href="/testcafe/documentation/getting-started/"><span>Docs</span></a>
        </div>
      
        
        <div class="site-nav-tab" id="blog-link-tab">
          <a class="page-link" id="blog-link" href="/testcafe/media/team-blog/"><span>Blog</span></a>
        </div>
      
        
        <div class="site-nav-tab">
          <a class="page-link" href="/testcafe/faq/"><span>FAQ</span></a>
        </div>
      
        
        <div class="site-nav-tab">
          <a class="page-link" href="/testcafe/support/"><span>Support</span></a>
        </div>
      
        
        <div class="site-nav-tab active">
          <a class="page-link" href="/testcafe/release-notes/"><span>Release Notes</span></a>
        </div>
      
        
        <div class="site-nav-tab" id="studio-link-tab">
          <a class="page-link" id="studio-link" href="https://www.devexpress.com/products/testcafestudio/" target="_blank"><span>TestCafe Studio</span></a>
        </div>
      
    </nav>
    <div class="site-header-buttons">
      <a id="twitter-button" href="https://twitter.com/dxtestcafe" target="_blank"></a>
      <div id="search-icon"></div>
      <div class="star-button">
        <a class="github-button" href="https://github.com/DevExpress/testcafe" data-size="large" data-count-href="/DevExpress/testcafe/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star DevExpress/testcafe on GitHub"><span style="color:#ffffff">Star</span></a>
      </div>
      <div id="search-panel" class="hidden">
          <input type="text" placeholder="Search documentation" id="search"/>
          <div id="close-search"></div>
      </div>
    </div>
  </div>
</header>

<script>
  function has(parentEl, el)  {
    var descendants = parentEl.getElementsByTagName('*');
    
    for(i = 0; i < descendants.length; i++) 
        if(descendants[i] === el) return true;

    return false;
  }

  function clickOutsideBox(e, box) {
      return box !== e.target && !has(box, e.target);
  }  

  function closeSearchBox(e) {
      if(clickOutsideBox(e, searchPanel) && searchPanel.className.indexOf('hidden') === -1) 
          searchPanel.className += ' hidden';
  }

  var searchButton      = document.getElementById('search-icon');
  var searchPanel       = document.getElementById('search-panel');
  var searchInput       = document.getElementById('search');
  var closeSearchButton = document.getElementById('close-search');

  searchButton.addEventListener('click', function () {
      searchPanel.className = searchPanel.className.replace(/hidden/,'');
      searchInput.focus();      
  });
  
  closeSearchButton.addEventListener('click', function () {
      searchPanel.className += ' hidden';
  });

  window.addEventListener('mousedown', closeSearchBox);        
  window.addEventListener('touchstart', closeSearchBox);

  if (window.isMobileDevice) {
      function closeHamburgerMenuBox(e) {
          if(clickOutsideBox(e, hamburgerMenu) && clickOutsideBox(e, hamburgerButton) && hamburgerMenu.className.indexOf('active') !== -1) {
              hamburgerMenu.className = hamburgerMenu.className.replace(' active', '');
              hamburgerButton.className = hamburgerButton.className.replace(' active', '');
              document.documentElement.style.overflowY = 'scroll';
              document.body.style.overflowY = 'initial';
          }
      }

      var hamburgerMenu = document.querySelector('.site-nav');
      var hamburgerButton = document.querySelector('.hamburger-button');

      window.addEventListener('mousedown', closeHamburgerMenuBox);        
      window.addEventListener('touchstart', closeHamburgerMenuBox);

      window.addEventListener('DOMContentLoaded', function (e) {
          var docNav = document.querySelector('.doc-nav');

          if(docNav) {
              function closeDocNav() {
                  docNav.className = docNav.className.replace(' active', '');
                  document.documentElement.style.overflowY = 'scroll';
                  document.body.style.overflowY = 'initial';
              }

              function clickWithDocNavInvoked(e) {
                  if(clickOutsideBox(e, docNav) && clickOutsideBox(e, docNavPanel) && docNav.className.indexOf('active') !== -1) 
                      closeDocNav();
              }

              var docNavPanel = document.querySelector('.doc-nav-panel');

              window.addEventListener('mousedown', clickWithDocNavInvoked);        
              window.addEventListener('touchstart', clickWithDocNavInvoked);

              var docNavLinks = document.querySelectorAll('.doc-nav a');

              docNavLinks.forEach(function (link) {
                  link.addEventListener('click', closeDocNav);
              });
          }
      });
  }
</script>

<script>
  var studioLink = document.getElementById('studio-link');

  studioLink.addEventListener('click', function () {
      ga('send', 'event', 'topMenu', 'studioLinkClicked');
  });
</script>

<div class="doc-top-nav">
  <div class="doc-top-nav-content">
    <div class="doc-top-nav-wrapper">
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/getting-started/">Getting Started</a>
        </div>
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/guides/">Guides</a>
        </div>
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/reference/">Reference</a>
        </div>
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/recipes/">Recipes</a>
        </div>
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/how-it-works/">How It Works</a>
        </div>
      
        <div class="doc-top-nav-tab " >
          <a href="/testcafe/documentation/examples/">Examples</a>
        </div>
      
    </div>
  </div>
</div>


      <div class="container">
    <main>
    <div class="post">
        <div class="post-date">
            FEB  7, 2019
        </div>
        <article class="post-content">
            <h1>Migration from TestCafe v0.x.y to v1.0.0</h1>
<p>TestCafe v1.0.0 introduces minor changes to the framework&#39;s behavior and programming interface. This document lists these changes and describes how to migrate to the new version.</p>

<!--more-->

<ul>
<li><a href="#test-syntax-validation-disabled-all-input-files-are-executed">Test Syntax Validation Disabled: All Input Files Are Executed</a></li>
<li><a href="#custom-request-hooks-asynchronous-api">Custom Request Hooks: Asynchronous API</a></li>
<li><a href="#custom-reporter-plugins-asynchronous-api">Custom Reporter Plugins: Asynchronous API</a></li>
<li><a href="#programming-interface-multiple-method-calls-prohibited">Programming Interface: Multiple Method Calls Prohibited</a></li>
</ul>
<h2><a class="anchor" id="test-syntax-validation-disabled-all-input-files-are-executed"></a>Test Syntax Validation Disabled: All Input Files Are Executed <a class="permalink" href="#test-syntax-validation-disabled-all-input-files-are-executed">#</a></h2>
<p>Previous versions performed <em>test syntax validation</em> within input script files before executing them. Only files that contained the <a href="../documentation/guides/basic-guides/organize-tests.html#fixtures">fixture</a> and <a href="../documentation/guides/basic-guides/organize-tests.html#tests">test</a> directives were executed.</p>

<p>Starting with v1.0.0, input script files are <strong>not</strong> validated. This means that TestCafe executes all the scripts you specify as test sources. If you use Glob patterns to specify input test files, please recheck these patterns to avoid unintended file matches.</p>

<p>The <code>--disable-test-syntax-validation</code> command line flag and the <code>disableTestSyntaxValidation</code> option for the <a href="../documentation/reference/testcafe-api/runner/run.html">runner.run</a> API method that disabled test syntax validation were removed in v1.0.0.</p>
<h3><a class="anchor" id="what-has-improved"></a>What Has Improved <a class="permalink" href="#what-has-improved">#</a></h3>
<p>You can now load tests dynamically without additional customization. The following example illustrates how tests can be imported from an external library:</p>

<p><strong>external-lib.js</strong></p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">runFixture</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fixture</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">page</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>

    <span class="nx">test</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">url</span><span class="p">}</span><span class="s2"> test`</span><span class="p">,</span> <span class="k">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>test.js</strong></p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="nx">runFixture</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./external-lib</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">fixtureName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">My fixture</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://testPage</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">runFixture</span><span class="p">(</span><span class="nx">fixtureName</span><span class="p">,</span> <span class="nx">url</span><span class="p">);</span>
</code></pre></div><h2><a class="anchor" id="programming-interface-multiple-method-calls-prohibited"></a>Programming Interface: Multiple Method Calls Prohibited <a class="permalink" href="#programming-interface-multiple-method-calls-prohibited">#</a></h2>
<p>Previous versions allowed you to call the <a href="../documentation/reference/testcafe-api/runner/src.html">runner.src</a>, <a href="../documentation/reference/testcafe-api/runner/browsers.html">runner.browsers</a> and <a href="../documentation/reference/testcafe-api/runner/reporter.html">runner.reporter</a> methods several times to specify multiple test files, browsers or reporters.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">const</span> <span class="nx">stream</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">report.json</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">runner</span>
    <span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="dl">'</span><span class="s1">/home/user/tests/fixture1.js</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="dl">'</span><span class="s1">fixture5.js</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">browsers</span><span class="p">(</span><span class="dl">'</span><span class="s1">chrome</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">browsers</span><span class="p">(</span><span class="dl">'</span><span class="s1">firefox:headless</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">reporter</span><span class="p">(</span><span class="dl">'</span><span class="s1">minimal</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">reporter</span><span class="p">(</span><span class="dl">'</span><span class="s1">json</span><span class="dl">'</span><span class="p">,</span> <span class="nx">stream</span><span class="p">);</span>
</code></pre></div>
<p>Starting with v1.0.0, pass arrays to these methods to specify multiple values.</p>

<p>To use a reporter that writes to a file, add a <code>{ name, output }</code> object to an array (see the <a href="../documentation/reference/testcafe-api/runner/reporter.html">runner.reporter</a> description for details).</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">runner</span>
    <span class="p">.</span><span class="nx">src</span><span class="p">([</span><span class="dl">'</span><span class="s1">/home/user/tests/fixture1.js</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">fixture5.js</span><span class="dl">'</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">browsers</span><span class="p">([</span><span class="dl">'</span><span class="s1">chrome</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">firefox:headless</span><span class="dl">'</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">reporter</span><span class="p">([</span><span class="dl">'</span><span class="s1">minimal</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">json</span><span class="dl">'</span><span class="p">,</span> <span class="na">output</span><span class="p">:</span> <span class="dl">'</span><span class="s1">report.json</span><span class="dl">'</span> <span class="p">}]);</span>
</code></pre></div><h3><a class="anchor" id="what-has-improved"></a>What Has Improved <a class="permalink" href="#what-has-improved">#</a></h3>
<p>The <a href="../documentation/reference/configuration-file.html">configuration file</a> we implemented is consistent with the API and command line interface.</p>
<h2><a class="anchor" id="custom-request-hooks-asynchronous-api"></a>Custom Request Hooks: Asynchronous API <a class="permalink" href="#custom-request-hooks-asynchronous-api">#</a></h2>
<p><a href="../documentation/test-api/intercepting-http-requests/">Request hook</a> methods became asynchronous in TestCafe v1.0.0.</p>

<p>If the <a href="../documentation/reference/test-api/requesthook/onrequest.html">onRequest</a> or <a href="../documentation/reference/test-api/requesthook/onresponse.html">onResponse</a> method in your custom hook returns a Promise, TestCafe now waits for this Promise to resolve.</p>

<p>You should add the <code>async</code> keyword to the asynchronous <a href="../documentation/reference/test-api/requesthook/onrequest.html">onRequest</a> and <a href="../documentation/reference/test-api/requesthook/onresponse.html">onResponse</a> method declarations.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">RequestHook</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">testcafe</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">MyRequestHook</span> <span class="kd">extends</span> <span class="nx">RequestHook</span> <span class="p">{</span>
    <span class="kd">constructor</span> <span class="p">(</span><span class="nx">requestFilterRules</span><span class="p">,</span> <span class="nx">responseEventConfigureOpts</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">requestFilterRules</span><span class="p">,</span> <span class="nx">responseEventConfigureOpts</span><span class="p">);</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="k">async</span> <span class="nx">onRequest</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="k">async</span> <span class="nx">onResponse</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3><a class="anchor" id="what-has-improved"></a>What Has Improved <a class="permalink" href="#what-has-improved">#</a></h3>
<p>You can call asynchronous <a href="https://nodejs.org/api/fs.html">fs</a> functions, invoke a <a href="https://nodejs.org/api/child_process.html">child_process</a>, or perform asynchronous network requests (to a database or any other server) from inside the hooks.</p>
<h2><a class="anchor" id="custom-reporter-plugins-asynchronous-api"></a>Custom Reporter Plugins: Asynchronous API <a class="permalink" href="#custom-reporter-plugins-asynchronous-api">#</a></h2>
<p>TestCafe v1.0.0 also introduces an asynchronous API for <a href="../documentation/guides/extend-testcafe/reporter-plugin.html">reporter plugins</a>.</p>

<p>Similarly to <a href="#custom-request-hooks-asynchronous-api">request hooks</a>, if any of the custom reporter&#39;s methods (<a href="../documentation/reference/plugin-api/reporter.html#reporttaskstart">reportTaskStart</a>, <a href="../documentation/reference/plugin-api/reporter.html#reportfixturestart">reportFixtureStart</a>, <a href="../documentation/reference/plugin-api/reporter.html#reporttestdone">reportTestDone</a> or <a href="../documentation/reference/plugin-api/reporter.html#reporttaskdone">reportTaskDone</a>) returns a Promise, this Promise is now awaited.</p>

<p>Since the reporter methods are now asynchronous, add the <code>async</code> keyword to their declarations.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">async</span> <span class="nx">reportTaskStart</span> <span class="p">(</span><span class="nx">startTime</span><span class="p">,</span> <span class="nx">userAgents</span><span class="p">,</span> <span class="nx">testCount</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">},</span>

<span class="k">async</span> <span class="nx">reportFixtureStart</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">path</span><span class="p">,</span> <span class="nx">meta</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">},</span>

<span class="k">async</span> <span class="nx">reportTestDone</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">testRunInfo</span><span class="p">,</span> <span class="nx">meta</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">},</span>

<span class="k">async</span> <span class="nx">reportTaskDone</span> <span class="p">(</span><span class="nx">endTime</span><span class="p">,</span> <span class="nx">passed</span><span class="p">,</span> <span class="nx">warnings</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div><h3><a class="anchor" id="what-has-improved"></a>What Has Improved <a class="permalink" href="#what-has-improved">#</a></h3>
<p>Reporters can call asynchronous <a href="https://nodejs.org/api/fs.html">fs</a> functions, invoke a <a href="https://nodejs.org/api/child_process.html">child_process</a>, or perform asynchronous network requests (to send an email, use REST API, connect to a database, etc).</p>

        </article>
        <div id="back-to-posts-link">
            <p><a href="../release-notes/">Back to Post List</a></p>
        </div>
        <!-- <div id="disqus_thread"></div> -->
    </div>
</main>

<!-- 
<script>
    var disqus_config = function () {
        this.page.url = 'https://devexpress.github.io/testcafe/blog/migration-from-testcafe-v0-x-y-to-v1-0-0.html';
        this.page.identifier = '/blog/migration-from-testcafe-v0-x-y-to-v1-0-0';
    };
    (function() {
        var d = document, s = d.createElement('script');
        
        s.src = '//testcafe-blog.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
 -->
</div>

    </div>

    <footer class="site-footer">
    <div class="site-footer-content">
        <div class="footer-links">
            <div class="footer-link-content">
                <div class="link"><a href="/testcafe/documentation/">Docs</a></div>
                <div class="link"><a href="/testcafe/media/team-blog/">Blog</a></div>
                <div class="link"><a href="/testcafe/faq/">FAQ</a></div>
                <div class="link"><a href="/testcafe/support/">Support</a></div>
                <div class="link"><a href="/testcafe/roadmap/">Roadmap</a></div>
                <div class="link"><a href="/testcafe/release-notes/">Release Notes</a></div>
                <div class="link"><a href="https://devexpress.com/products/testcafestudio">TestCafe Studio</a></div>
            </div>
        </div>
        <div class="footer-icons">
            <div class="icon"><a href="https://twitter.com/DXTestCafe"><img src="/testcafe/images/twitter-footer.svg"/></a></div>
            <div class="icon"><a href="https://github.com/DevExpress/testcafe"><img src="/testcafe/images/github-footer.svg"/></a></div>
        </div>
        <div class="footer-legal">
            Use of this site constitutes acceptance of our <a href="https://www.devexpress.com/aboutus/privacy-policy.xml"  target="_blank">Privacy Policy</a><br/>
            Copyright © 2012–2020 Developer Express Inc.</p>
        </div>
    </div>
</footer>


    
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript"> var search = docsearch({
     apiKey: '938fb7894c0af8c01af3e2b4c53d4bdd',
     indexName: 'testcafe',
     inputSelector: '#search',
     debug: false // Set debug to true if you want to inspect the dropdown
 });

 search.autocomplete.on('autocomplete:opened', function(e) {
     var searchInput = document.querySelector('#search');
     var dropdown    = document.querySelector('.ds-dropdown-menu');
     
     if(searchInput && dropdown) {
         dropdown.style.maxWidth = "none";
         dropdown.style.width = searchInput.offsetWidth + "px";
     }
 });
</script> 

  </body>

</html>
