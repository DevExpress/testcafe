<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <title>TestCafe v0.21.0 Released | TestCafe</title>

  <meta name="description" content="TestCafe v0.21.0 ReleasedTest web pages served over HTTPS, construct screenshot paths with patterns and use more info in custom reporters.">
  <meta name="viewport" content="width=device-width">
  
  <meta property="og:image" content="https://raw.githubusercontent.com/DevExpress/testcafe-gh-page-assets/master/src/images/testcafe-ogp-icon.png">
  <meta property="og:type" content="website" />
  <meta property="og:url" content="http://devexpress.github.io/testcafe/blog/testcafe-v0-21-0-released.html" />
  <meta property="og:title" content="TestCafe v0.21.0 Released | TestCafe" />

  <link rel="shortcut icon" href="/testcafe/favicon.ico">
  <link rel="stylesheet" href="/testcafe/css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/docco.min.css">
  <link rel="canonical" href="http://devexpress.github.io/testcafe/blog/testcafe-v0-21-0-released.html">
  <link rel="alternate" type="application/rss+xml" title="TestCafe" href="http://devexpress.github.io/testcafe/feed.xml">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
  <script defer src="https://buttons.github.io/buttons.js"></script>
  <script defer type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.3.min.js"></script>
  <script src="/testcafe/scripts/mobile-detect.min.js" type="text/javascript"></script>
  <script>
      document.addEventListener('DOMContentLoaded', function (e) {
          hljs.initHighlightingOnLoad();
      });
  </script>

  
  <script>
    // Google Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-83678642-1', 'auto');
    ga('send', 'pageview');
  </script>
  

  
  
  

  <script>
    (function () {
        var VISIT_DAY = {
            first: 1,
            second: 2,
            more: 3
        };

        var isLandingPage = false;
        var isGettingStarted = false;
        var isDocumentation = false;

        function updateVisitDay () {
            var FIRST_VISIT_DAY_ITEM_NAME = 'first-visit-day';
            var SECOND_VISIT_DAY_ITEM_NAME = 'second-visit-day';
            var DIFFERENT_VISITS_DELAY = 12 * 60 * 60 * 1000; 
            
            // TODO: ignore old visits
            var now = Date.now();
            var firstVisit = window.localStorage.getItem(FIRST_VISIT_DAY_ITEM_NAME);
            var secondVisit = window.localStorage.getItem(SECOND_VISIT_DAY_ITEM_NAME);

            if(!firstVisit) {
                window.localStorage.setItem(FIRST_VISIT_DAY_ITEM_NAME, now);
                return VISIT_DAY.first;
            }

            firstVisit = parseInt(firstVisit);

            if(!secondVisit) {
                if(!isLandingPage && now - firstVisit >=DIFFERENT_VISITS_DELAY) {
                    window.localStorage.setItem(SECOND_VISIT_DAY_ITEM_NAME, now);
                    return VISIT_DAY.second;
                }

                return VISIT_DAY.first;
            }
            
            secondVisit = parseInt(secondVisit);

            return now - secondVisit >= DIFFERENT_VISITS_DELAY ? VISIT_DAY.more : VISIT_DAY.second;
        }

        window.needShowShareWidget = function () {
            if(!isDocumentation || isGettingStarted)
                return false;

            var visitDay = updateVisitDay();

            return visitDay === VISIT_DAY.more;
        };
    })();
  </script>

  

  
    <script>
        if (document.images) {
            img1 = new Image();
            img1.src = '/testcafe/images/test-cafe-logo.png';
        }
    </script>
  
    <script>
        function initHeader(siteHeader, contentWrapper, docTopMenu, article, gs) {
            var MIN_BODY_WIDTH = 1230;

            function updateHeader() {
                var bodyMinimized = document.body.clientWidth === MIN_BODY_WIDTH;

                

                siteHeader.style.position = bodyMinimized ? 'static' : '';

                if(docTopMenu)
                    docTopMenu.style.position = bodyMinimized ? 'static' : '';

                if(contentWrapper)
                    contentWrapper.style.paddingTop = bodyMinimized ? '0' : '';

                if(article)
                    article.style.marginTop = bodyMinimized ? '21px' : '72px';
 
                if(gs)
                    gs.style.paddingTop = bodyMinimized ? '21px' : '72px';
            }

            updateHeader();
            window.addEventListener('scroll', updateHeader);
            window.addEventListener('resize', updateHeader);
        }
        document.addEventListener('DOMContentLoaded', function (e) {
            var contentWrapper = document.querySelector('.container');
            var siteHeader     = document.querySelector('.site-header');
            var docTopMenu     = document.querySelector('.doc-top-nav');
            var article        = document.querySelector('.doc');
            var gs             = document.querySelector('.gs');

            if(siteHeader) 
                initHeader(siteHeader, contentWrapper, docTopMenu, article, gs);
        });
    </script>
</head>


  <body>
    <div class="page-content-wrapper">

      <header class="site-header fixed">
  <div class="site-header-content">
    <a class="site-logo" href="/testcafe/"></a>
    <nav class="site-nav">
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="/testcafe/documentation/getting-started/">Documentation</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="https://github.com/DevExpress/testcafe" target="_blank">GitHub</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="/testcafe/faq/">FAQ</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="/testcafe/publications/">Publications</a>
          </div>
        
          
          <div class="site-nav-tab active">
            <a class="page-link" href="/testcafe/blog/">Release Notes</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="https://github.com/DevExpress/testcafe/issues" target="_blank">Issues</a>
          </div>
        
          
          <div class="site-nav-tab ">
            <a class="page-link" href="https://stackoverflow.com/questions/tagged/testcafe" target="_blank">Q&amp;A</a>
          </div>
        
      <a id="twitter-button" href="https://twitter.com/dxtestcafe" target="_blank"></a>
      <div id="search-icon"></div>
      <div class="star-button">
        <a class="github-button" href="https://github.com/DevExpress/testcafe" data-size="large" data-count-href="/DevExpress/testcafe/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star DevExpress/testcafe on GitHub"><span style="color:#ffffff">Star</span></a>
      </div>
      <div id="search-panel" class="hidden">
          <input type="text" placeholder="Search query" id="search"/>
          <div id="close-search"></div>
      </div>
      </nav>
  </div>
</header>

<script>
  function has(parentEl, el)  {
    var descendants = parentEl.getElementsByTagName('*');
    
    for(i = 0; i < descendants.length; i++) 
        if(descendants[i] === el) return true;

    return false;
  }

  function closeSearchBox(e) {
      var clickOutsideSearchBox = searchPanel !== e.target && !has(searchPanel, e.target);

      if(clickOutsideSearchBox && searchPanel.className.indexOf('hidden') === -1) 
          searchPanel.className += ' hidden';
  }

  var searchButton      = document.querySelector('#search-icon');
  var searchPanel       = document.querySelector('#search-panel');
  var searchInput       = document.querySelector('#search');
  var closeSearchButton = document.querySelector('#close-search');

  searchButton.addEventListener('click', function () {
      searchPanel.className = searchPanel.className.replace(/hidden/,'');
      searchInput.focus();      
  });
  
  closeSearchButton.addEventListener('click', function () {
      searchPanel.className += ' hidden';
  });

  window.addEventListener('mousedown', closeSearchBox);        
  window.addEventListener('touchstart', closeSearchBox);
</script>




      <div class="container">
    <main>
    <div class="post">
        <div class="post-date">
            AUG  2, 2018
        </div>
        <article class="post-content">
            <h1>TestCafe v0.21.0 Released</h1>
<p>Test web pages served over HTTPS, construct screenshot paths with patterns and use more info in custom reporters.</p>

<!--more-->
<h2><a class="anchor" name="enhancements"></a>Enhancements <a class="permalink" href="#enhancements">#</a></h2><h3><a class="anchor" name="test-web-pages-served-over-https-1985"></a>⚙ Test Web Pages Served Over HTTPS (<a href="https://github.com/DevExpress/testcafe/issues/1985">#1985</a>) <a class="permalink" href="#test-web-pages-served-over-https-1985">#</a></h3>
<p>Some browser features (like <a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API">Service Workers</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API">Geolocation API</a>, <a href="https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession">ApplePaySession</a>, or <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto">SubtleCrypto</a>) require a secure origin. This means that the website should use the HTTPS protocol.</p>

<p>Starting with v0.21.0, TestCafe can serve proxied web pages over HTTPS. This allows you to test pages that require a secure origin.</p>

<p>To enable HTTPS when you use TestCafe through the command line, specify the <a href="https://devexpress.github.io/testcafe/documentation/using-testcafe/command-line-interface.html#--ssl-options">--ssl</a> flag followed by the <a href="https://nodejs.org/api/https.html#https_https_createserver_options_requestlistener">HTTPS server options</a>. The most commonly used options are described in the <a href="https://nodejs.org/api/tls.html#tls_tls_createsecurecontext_options">TLS topic</a> in the Node.js documentation.</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">testcafe --ssl <span class="nv">pfx</span><span class="o">=</span>path/to/file.pfx;rejectUnauthorized<span class="o">=</span><span class="nb">true</span>;...
</code></pre></div>
<p>When you use a programming API, pass the HTTPS server options to the <a href="https://devexpress.github.io/testcafe/documentation/using-testcafe/programming-interface/createtestcafe.html">createTestCafe</a> method.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="s1">'use strict'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">createTestCafe</span>        <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'testcafe'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">selfSignedSertificate</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'openssl-self-signed-certificate'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">runner</span>                  <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">sslOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">key</span><span class="p">:</span>  <span class="nx">selfSignedSertificate</span><span class="p">.</span><span class="nx">key</span><span class="p">,</span>
    <span class="na">cert</span><span class="p">:</span> <span class="nx">selfSignedSertificate</span><span class="p">.</span><span class="nx">cert</span>
<span class="p">};</span>

<span class="nx">createTestCafe</span><span class="p">(</span><span class="s1">'localhost'</span><span class="p">,</span> <span class="mi">1337</span><span class="p">,</span> <span class="mi">1338</span><span class="p">,</span> <span class="nx">sslOptions</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">testcafe</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">runner</span> <span class="o">=</span> <span class="nx">testcafe</span><span class="p">.</span><span class="nx">createRunner</span><span class="p">();</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">runner</span>
            <span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">'test.js'</span><span class="p">)</span>

            <span class="c1">// Browsers restrict self-signed certificate usage unless you</span>
            <span class="c1">// explicitly set a flag specific to each browser.</span>
            <span class="c1">// For Chrome, this is '--allow-insecure-localhost'.</span>
            <span class="p">.</span><span class="nx">browsers</span><span class="p">(</span><span class="s1">'chrome --allow-insecure-localhost'</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">run</span><span class="p">();</span>
    <span class="p">});</span>
</code></pre></div>
<p>See <a href="https://devexpress.github.io/testcafe/documentation/using-testcafe/common-concepts/connect-to-the-testcafe-server-over-https.html">Connect to TestCafe Server over HTTPS</a> for more information.</p>
<h3><a class="anchor" name="construct-screenshot-paths-with-patterns-2152"></a>⚙ Construct Screenshot Paths with Patterns (<a href="https://github.com/DevExpress/testcafe/issues/2152">#2152</a>) <a class="permalink" href="#construct-screenshot-paths-with-patterns-2152">#</a></h3>
<p>You can now use patterns to construct paths to screenshots. TestCafe provides a number of placeholders you can include in the path, for example, <code>${DATE}</code>, <code>${TIME}</code>, <code>${USERAGENT}</code>, etc. For a complete list, refer to the command line <a href="https://devexpress.github.io/testcafe/documentation/using-testcafe/command-line-interface.html#-p---screenshot-path-pattern">--screenshot-path-pattern flag description</a>.</p>

<p>You specify a screenshot path pattern when you run tests. Each time TestCafe takes a screenshot, it substitutes the placeholders with actual values and saves the screenshot to the resulting path.</p>

<p>The following example shows how to specify a screenshot path pattern through the command line:</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">testcafe all test.js -s screenshots -p <span class="s2">"</span><span class="k">${</span><span class="nv">DATE</span><span class="k">}</span><span class="s2">_</span><span class="k">${</span><span class="nv">TIME</span><span class="k">}</span><span class="s2">/test-</span><span class="k">${</span><span class="nv">TEST_INDEX</span><span class="k">}</span><span class="s2">/</span><span class="k">${</span><span class="nv">USERAGENT</span><span class="k">}</span><span class="s2">/</span><span class="k">${</span><span class="nv">FILE_INDEX</span><span class="k">}</span><span class="s2">.png"</span>
</code></pre></div>
<p>When you use a programming API, pass the screenshot path pattern to the <a href="https://devexpress.github.io/testcafe/documentation/using-testcafe/programming-interface/runner.html#screenshots">runner.screenshots method</a>.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">runner</span><span class="p">.</span><span class="nx">screenshots</span><span class="p">(</span><span class="s1">'reports/screenshots/'</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="s1">'${TEST_INDEX}/${OS}/${BROWSER}-v${BROWSER_VERSION}/${FILE_INDEX}.png'</span><span class="p">);</span>
</code></pre></div><h3><a class="anchor" name="add-info-about-screenshots-and-quarantine-attempts-to-custom-reports-2216"></a>⚙ Add Info About Screenshots and Quarantine Attempts to Custom Reports (<a href="https://github.com/DevExpress/testcafe/issues/2216">#2216</a>) <a class="permalink" href="#add-info-about-screenshots-and-quarantine-attempts-to-custom-reports-2216">#</a></h3>
<p>Custom reporters can now access screenshots&#39; data and the history of quarantine attempts (if the test run in the quarantine mode).</p>

<p>The following information about screenshots is now available:</p>

<ul>
<li>the path to the screenshot file,</li>
<li>the path to the thumbnail image,</li>
<li>the user agent of the browser in which the screenshot was taken,</li>
<li>the quarantine attempt number (if the screenshot was taken in the quarantine mode),</li>
<li>whether the screenshot was taken because the test failed.</li>
</ul>

<p>If the test was run in the quarantine mode, you can also determine which attempts failed and passed.</p>

<p>Refer to the <a href="https://devexpress.github.io/testcafe/documentation/extending-testcafe/reporter-plugin/reporter-methods.html#reporttestdone">reportTestDone method description</a> for details on how to access this information.</p>
<h2><a class="anchor" name="bug-fixes"></a>Bug Fixes <a class="permalink" href="#bug-fixes">#</a></h2>
<ul>
<li>HTML5 drag events are no longer simulated if <code>event.preventDefault</code> is called for the <code>mousedown</code> event (<a href="https://github.com/DevExpress/testcafe/issues/2529">#2529</a>)</li>
<li>File upload no longer causes an exception when there are several file inputs on the page (<a href="https://github.com/DevExpress/testcafe/issues/2642">#2642</a>)</li>
<li>File upload now works with inputs that have the <code>required</code> attribute (<a href="https://github.com/DevExpress/testcafe/issues/2509">#2509</a>)</li>
<li>The <code>load</code> event listener is no longer triggered when added to an image (<a href="https://github.com/DevExpress/testcafe-hammerhead/issues/1688">testcafe-hammerhead/#1688</a>)</li>
</ul>

        </article>
        <div id="back-to-posts-link">
            <p><a href="./">Back to Post List</a></p>
        </div>
        <!-- <div id="disqus_thread"></div> -->
    </div>
</main>

<!-- 
<script>
    var disqus_config = function () {
        this.page.url = 'http://devexpress.github.io/testcafe/blog/testcafe-v0-21-0-released.html';
        this.page.identifier = '/blog/testcafe-v0-21-0-released';
    };
    (function() {
        var d = document, s = d.createElement('script');
        
        s.src = '//testcafe-blog.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
 -->
</div>

      <div class="push"></div>
    </div>

    <footer class="site-footer">
    <div class="site-footer-content">
        <div class="footer-col-1">
            <p><strong>TestCafe</strong>: A node.js tool to automate end-to-end web testing<br/>
            Use of this site constitutes acceptance of our <a href="https://www.devexpress.com/aboutus/privacy-policy.xml"  target="_blank">Privacy Policy</a><br/>
            Copyright © 2012-2018 Developer Express Inc.</p>
        </div>
    </div>
</footer>


    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript"> var search = docsearch({
     apiKey: '938fb7894c0af8c01af3e2b4c53d4bdd',
     indexName: 'testcafe',
     inputSelector: '#search',
     debug: false // Set debug to true if you want to inspect the dropdown
 });

 search.autocomplete.on('autocomplete:opened', function(e) {
     var searchInput = document.querySelector('#search');
     var dropdown    = document.querySelector('.ds-dropdown-menu');
     
     if(searchInput && dropdown) {
         dropdown.style.maxWidth = "none";
         dropdown.style.width = searchInput.offsetWidth + "px";
     }
 });
</script> 

    <script defer src="/testcafe/scripts/cookie-notice.js" type="text/javascript"></script>
<div class="cookie-notice">
    <div class="close-icon"></div>
    <div class="cookie-notice-content">
        <div class="cookie-notice-message">
            <div class="cookie-notice-header">Why We Use Cookies</div>
            <div class="cookie-notice-text">This site uses cookies to make your browsing experience more convenient and personal. Cookies store useful information on your computer to help us improve the efficiency and relevance of our site for you. In some cases, they are essential to making the site work properly. By accessing this site, you consent to the use of cookies. For more information, refer to DevExpress' <a href="https://www.devexpress.com/AboutUs/privacy-policy.xml" target="_blank">privacy policy</a> and <a href="https://www.devexpress.com/AboutUs/cookie-policy.xml" target="_blank">cookie policy</a>.</div>
        </div>
        <div class="cookie-notice-button">I understand</div>
    </div>
</div>

  </body>

</html>
