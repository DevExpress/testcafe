{"version":3,"sources":["utils/http.js"],"names":[],"mappings":";;;;;QAEgB,UAAU,GAAV,UAAU;QAKV,UAAU,GAAV,UAAU;QAKV,eAAe,GAAf,eAAe;QAOf,aAAa,GAAb,aAAa;QAcb,SAAS,GAAT,SAAS;;uBAjCL,SAAS;;;;AAEtB,SAAS,UAAU,CAAE,GAAG,EAAE;AAC7B,OAAG,CAAC,UAAU,GAAG,GAAG,CAAC;AACrB,OAAG,CAAC,GAAG,EAAE,CAAC;CACb;;AAEM,SAAS,UAAU,CAAE,GAAG,EAAE,GAAG,EAAE;AAClC,OAAG,CAAC,UAAU,GAAG,GAAG,CAAC;AACrB,OAAG,CAAC,GAAG,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC;CACtB;;AAEM,SAAS,eAAe,CAAE,GAAG,EAAE,IAAI,EAAE,eAAe,EAAE;AACzD,QAAI,CAAC,eAAe,EAChB,GAAG,CAAC,SAAS,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;;AAEtD,OAAG,CAAC,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;CAC7C;;AAEM,SAAS,aAAa,CAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE;AAC/C,QAAI,QAAQ,CAAC,IAAI,KAAK,GAAG,CAAC,OAAO,CAAC,eAAe,CAAC,EAAE;AAChD,WAAG,CAAC,UAAU,GAAG,GAAG,CAAC;AACrB,WAAG,CAAC,GAAG,EAAE,CAAC;KACb,MAEI;AACD,WAAG,CAAC,SAAS,CAAC,eAAe,EAAE,6BAA6B,CAAC,CAAC;AAC9D,WAAG,CAAC,SAAS,CAAC,MAAM,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;AACrC,WAAG,CAAC,SAAS,CAAC,cAAc,EAAE,QAAQ,CAAC,WAAW,CAAC,CAAC;AACpD,WAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;KAC7B;CACJ;;AAEM,SAAS,SAAS,CAAE,CAAC,EAAE;AAC1B,WAAO,sBAAY,UAAC,OAAO,EAAK;AAC5B,YAAI,MAAM,GAAG,EAAE,CAAC;;AAEhB,SAAC,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,KAAK;mBAAK,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;SAAA,CAAC,CAAC;AAC5C,SAAC,CAAC,EAAE,CAAC,KAAK,EAAE;mBAAM,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;SAAA,CAAC,CAAC;KACrD,CAAC,CAAC;CACN","file":"utils/http.js","sourcesContent":["import Promise from 'promise';\r\n\r\nexport function respond404 (res) {\r\n    res.statusCode = 404;\r\n    res.end();\r\n}\r\n\r\nexport function respond500 (res, err) {\r\n    res.statusCode = 500;\r\n    res.end(err || '');\r\n}\r\n\r\nexport function respondWithJSON (res, data, skipContentType) {\r\n    if (!skipContentType)\r\n        res.setHeader('content-type', 'application/json');\r\n\r\n    res.end(data ? JSON.stringify(data) : '');\r\n}\r\n\r\nexport function respondStatic (req, res, resource) {\r\n    if (resource.etag === req.headers['if-none-match']) {\r\n        res.statusCode = 304;\r\n        res.end();\r\n    }\r\n\r\n    else {\r\n        res.setHeader('cache-control', 'max-age=30, must-revalidate');\r\n        res.setHeader('etag', resource.etag);\r\n        res.setHeader('content-type', resource.contentType);\r\n        res.end(resource.content);\r\n    }\r\n}\r\n\r\nexport function fetchBody (r) {\r\n    return new Promise((resolve) => {\r\n        var chunks = [];\r\n\r\n        r.on('data', (chunk) => chunks.push(chunk));\r\n        r.on('end', () => resolve(Buffer.concat(chunks)));\r\n    });\r\n}"],"sourceRoot":"../src"}